(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{58159:function(e,t,s){Promise.resolve().then(s.bind(s,98549))},98549:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Home}});var n=s(57437),a=s(2265),i=s(94660),c=s(74810);let l={bankStatements:[],arAp:[],loans:[],purposeMappings:[],forecasts:[],userPreferences:null,selectedIndustry:null,kpiMetrics:null,aiAnalysis:null,chatMessages:[],isChatOpen:!1,scenarios:[],financingOptions:[],currentPage:"welcome",isLoading:!1},r=(0,i.Ue)()((0,c.tJ)((e,t)=>({...l,setUserPreferences:t=>e({userPreferences:t}),setSelectedIndustry:t=>e({selectedIndustry:t}),setBankStatements:t=>e({bankStatements:t}),setARAP:t=>e({arAp:t}),setLoans:t=>e({loans:t}),setForecasts:t=>e({forecasts:t}),setKPIMetrics:t=>e({kpiMetrics:t}),setAIAnalysis:t=>e({aiAnalysis:t}),addChatMessage:t=>e(e=>({chatMessages:[...e.chatMessages,t]})),setChatOpen:t=>e({isChatOpen:t}),setCurrentPage:t=>e({currentPage:t}),setLoading:t=>e({isLoading:t}),setScenarios:t=>e({scenarios:t}),setFinancingOptions:t=>e({financingOptions:t}),reset:()=>e(l)}),{name:"cfo-ai-storage",partialize:e=>({userPreferences:e.userPreferences,selectedIndustry:e.selectedIndustry,currentPage:e.currentPage}),skipHydration:!0})),useHydration=()=>{let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{t(!0)},[]),e},useAppStoreHydrated=()=>{let e=r(),t=useHydration();return t?e:{currentPage:"welcome",userPreferences:null,selectedIndustry:null,bankStatements:[],arAp:[],loans:[],forecasts:[],kpiMetrics:null,aiAnalysis:null,chatMessages:[],isChatOpen:!1,scenarios:[],financingOptions:[],isLoading:!1,setUserPreferences:()=>{},setSelectedIndustry:()=>{},setBankStatements:()=>{},setARAP:()=>{},setLoans:()=>{},setForecasts:()=>{},setKPIMetrics:()=>{},setAIAnalysis:()=>{},addChatMessage:()=>{},setChatOpen:()=>{},setCurrentPage:()=>{},setLoading:()=>{},setScenarios:()=>{},setFinancingOptions:()=>{},reset:()=>{}}};var o=s(83474),d=s(96061),m=s(57042),x=s(23986);function cn(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,x.m)((0,m.W)(t))}let u=(0,d.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:c=!1,...l}=e,r=c?o.g7:"button";return(0,n.jsx)(r,{className:cn(u({variant:a,size:i,className:s})),ref:t,...l})});h.displayName="Button";let p=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,className:cn("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});p.displayName="Card";let g=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,className:cn("flex flex-col space-y-1.5 p-6",s),...a})});g.displayName="CardHeader";let j=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("h3",{ref:t,className:cn("text-2xl font-semibold leading-none tracking-tight",s),...a})});j.displayName="CardTitle";let D=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("p",{ref:t,className:cn("text-sm text-muted-foreground",s),...a})});D.displayName="CardDescription";let f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,className:cn("p-6 pt-0",s),...a})});f.displayName="CardContent";let y=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,className:cn("flex items-center p-6 pt-0",s),...a})});y.displayName="CardFooter";let v=(0,d.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge(e){let{className:t,variant:s,...a}=e;return(0,n.jsx)("div",{className:cn(v({variant:s}),t),...a})}var N=s(60272),b=s(66654),w=s(52369),C=s(49036),S=s(92457),A=s(85790),F=s(92851),M=s(68291);function WelcomePage(){let{setCurrentPage:e}=useAppStoreHydrated(),t=[{icon:(0,n.jsx)(N.Z,{className:"h-6 w-6"}),title:"AI-анализ денежных потоков",description:"Интеллектуальное прогнозирование с интервалами доверия P5/P50/P95",color:"bg-blue-500"},{icon:(0,n.jsx)(b.Z,{className:"h-6 w-6"}),title:"Сценарии и стресс-тесты",description:"Персонализированные сценарии с AI-рекомендациями",color:"bg-green-500"},{icon:(0,n.jsx)(w.Z,{className:"h-6 w-6"}),title:"Оптимизация платежей",description:"MILP алгоритмы для приоритизации и управления сроками",color:"bg-yellow-500"},{icon:(0,n.jsx)(C.Z,{className:"h-6 w-6"}),title:"Подбор финансирования",description:"Отраслевые пресеты с Learning-to-Rank рекомендациями",color:"bg-purple-500"},{icon:(0,n.jsx)(S.Z,{className:"h-6 w-6"}),title:"AI-ассистент Chat-CFO",description:"RAG-система для контекстных ответов и быстрых действий",color:"bg-red-500"},{icon:(0,n.jsx)(A.Z,{className:"h-6 w-6"}),title:"Персонализация",description:"Адаптация под отрасль с индивидуальными рекомендациями",color:"bg-indigo-500"}];return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"max-w-6xl w-full",children:[(0,n.jsxs)("div",{className:"text-center mb-12",children:[(0,n.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,n.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-3 rounded-2xl",children:(0,n.jsx)(F.Z,{className:"h-8 w-8 text-white"})})}),(0,n.jsx)("h1",{className:"text-5xl font-bold text-gray-900 mb-4",children:"CFO-AI"}),(0,n.jsx)("p",{className:"text-xl text-gray-600 mb-6",children:"Умное казначейство для малого и среднего бизнеса"}),(0,n.jsx)(Badge,{variant:"secondary",className:"text-sm px-4 py-2",children:"Интеллектуальный анализ денежных потоков"})]}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:t.map((e,t)=>(0,n.jsxs)(p,{className:"hover:shadow-lg transition-shadow duration-300",children:[(0,n.jsx)(g,{children:(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"".concat(e.color," p-2 rounded-lg text-white"),children:e.icon}),(0,n.jsx)(j,{className:"text-lg",children:e.title})]})}),(0,n.jsx)(f,{children:(0,n.jsx)(D,{className:"text-sm",children:e.description})})]},t))}),(0,n.jsxs)("div",{className:"bg-white rounded-2xl p-8 mb-12 shadow-lg",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-center mb-8",children:"Ключевые преимущества"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"bg-blue-100 p-4 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,n.jsx)(A.Z,{className:"h-8 w-8 text-blue-600"})}),(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Снижение рисков"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Предотвращение кассовых разрывов"})]}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"bg-green-100 p-4 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,n.jsx)(b.Z,{className:"h-8 w-8 text-green-600"})}),(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Оптимизация"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Улучшение денежных потоков"})]}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"bg-purple-100 p-4 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,n.jsx)(N.Z,{className:"h-8 w-8 text-purple-600"})}),(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"AI-решения"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Умные рекомендации"})]}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"bg-yellow-100 p-4 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,n.jsx)(w.Z,{className:"h-8 w-8 text-yellow-600"})}),(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Быстрота"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Мгновенные решения"})]})]})]}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsxs)(h,{onClick:()=>{e("personalization")},size:"lg",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-4 text-lg font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300",children:["Начать работу",(0,n.jsx)(M.Z,{className:"ml-2 h-5 w-5"})]}),(0,n.jsx)("p",{className:"text-sm text-gray-500 mt-4",children:"Данные уже загружены и готовы к анализу"})]})]})})}let k=[{id:"retail",name:"Розничная торговля",description:"Магазины, торговые центры, розничные сети",icon:"\uD83D\uDECD️",characteristics:{seasonality:.7,volatility:.6,dso:15,dpo:30,dio:45},financingOptions:[{id:"retail-credit",name:"Торговый кредит",type:"credit",description:"Кредит на пополнение товарных запасов",minAmount:5e5,maxAmount:5e6,interestRate:12,term:12,requirements:["Опыт работы от 1 года","Оборот от 2 млн руб/мес"],advantages:["Быстрое одобрение","Гибкие условия","Сезонные льготы"],disadvantages:["Высокая ставка","Требует залога"],suitability:95,industrySpecific:!0},{id:"retail-factoring",name:"Факторинг дебиторки",type:"factoring",description:"Финансирование под уступку дебиторской задолженности",minAmount:1e5,maxAmount:1e7,interestRate:8,term:6,requirements:["Дебиторка от надежных покупателей","Оборот от 1 млн руб/мес"],advantages:["Низкая ставка","Быстрое получение средств","Без залога"],disadvantages:["Ограниченный круг покупателей","Комиссии"],suitability:90,industrySpecific:!0}],typicalScenarios:[{id:"retail-seasonal",name:"Сезонный рост продаж",type:"optimistic",description:"Увеличение продаж в предпраздничный период",parameters:{revenueChange:.3,costChange:.1,paymentDelay:0,seasonalityFactor:1.5},results:{cashFlow:[1e5,15e4,2e5,18e4],riskScore:20,recommendations:["Увеличить товарные запасы","Настроить логистику","Подготовить персонал"]},timeframe:"short"}]},{id:"services",name:"Услуги",description:"Консалтинг, IT, маркетинг, юридические услуги",icon:"\uD83D\uDCBC",characteristics:{seasonality:.3,volatility:.4,dso:30,dpo:15,dio:0},financingOptions:[{id:"services-overdraft",name:"Овердрафт",type:"overdraft",description:"Краткосрочное финансирование для покрытия кассовых разрывов",minAmount:1e5,maxAmount:2e6,interestRate:15,term:1,requirements:["Стабильный оборот","Хорошая кредитная история"],advantages:["Гибкость использования","Быстрое получение"],disadvantages:["Высокая ставка","Ограниченная сумма"],suitability:85,industrySpecific:!1}],typicalScenarios:[{id:"services-delay",name:"Задержка платежей клиентов",type:"stress",description:"Клиенты задерживают оплату на 30-60 дней",parameters:{revenueChange:-.2,costChange:0,paymentDelay:45,seasonalityFactor:1},results:{cashFlow:[5e4,3e4,2e4,1e4],riskScore:80,recommendations:["Ужесточить условия оплаты","Ввести предоплату","Использовать факторинг"]},timeframe:"short"}]},{id:"ecommerce",name:"Электронная коммерция",description:"Интернет-магазины, маркетплейсы, цифровые товары",icon:"\uD83D\uDED2",characteristics:{seasonality:.8,volatility:.7,dso:5,dpo:45,dio:30},financingOptions:[{id:"ecommerce-investment",name:"Инвестиционный кредит",type:"investment",description:"Финансирование развития платформы и маркетинга",minAmount:1e6,maxAmount:1e7,interestRate:10,term:24,requirements:["Растущий оборот","План развития","Команда"],advantages:["Долгосрочное финансирование","Низкая ставка"],disadvantages:["Сложное одобрение","Требует бизнес-план"],suitability:80,industrySpecific:!0}],typicalScenarios:[{id:"ecommerce-growth",name:"Быстрый рост",type:"optimistic",description:"Увеличение трафика и продаж в 3 раза",parameters:{revenueChange:2,costChange:.5,paymentDelay:0,seasonalityFactor:1.2},results:{cashFlow:[2e5,4e5,6e5,8e5],riskScore:30,recommendations:["Масштабировать инфраструктуру","Нанять персонал","Увеличить маркетинг"]},timeframe:"medium"}]},{id:"construction",name:"Строительство",description:"Жилищное и коммерческое строительство, ремонт",icon:"\uD83C\uDFD7️",characteristics:{seasonality:.5,volatility:.8,dso:60,dpo:90,dio:120},financingOptions:[{id:"construction-project",name:"Проектное финансирование",type:"credit",description:"Финансирование конкретного строительного проекта",minAmount:5e6,maxAmount:1e8,interestRate:14,term:36,requirements:["Лицензия на строительство","Залог недвижимости","Договоры с заказчиками"],advantages:["Большие суммы","Долгосрочное финансирование"],disadvantages:["Высокие требования","Сложное одобрение"],suitability:90,industrySpecific:!0}],typicalScenarios:[{id:"construction-delay",name:"Задержка сдачи объекта",type:"stress",description:"Задержка сдачи объекта на 6 месяцев",parameters:{revenueChange:-.4,costChange:.2,paymentDelay:180,seasonalityFactor:1},results:{cashFlow:[-5e5,-3e5,-2e5,-1e5],riskScore:90,recommendations:["Пересмотреть договоры","Искать дополнительное финансирование","Оптимизировать расходы"]},timeframe:"long"}]},{id:"manufacturing",name:"Производство",description:"Промышленное производство, переработка, сборка",icon:"\uD83C\uDFED",characteristics:{seasonality:.4,volatility:.5,dso:45,dpo:60,dio:90},financingOptions:[{id:"manufacturing-equipment",name:"Лизинг оборудования",type:"leasing",description:"Финансирование приобретения производственного оборудования",minAmount:1e6,maxAmount:5e7,interestRate:8,term:60,requirements:["Техническое обоснование","Гарантии поставщика"],advantages:["Низкая ставка","Налоговые льготы","Быстрое одобрение"],disadvantages:["Ограниченный выбор оборудования"],suitability:95,industrySpecific:!0}],typicalScenarios:[{id:"manufacturing-seasonal",name:"Сезонное снижение спроса",type:"pessimistic",description:"Снижение заказов в летний период",parameters:{revenueChange:-.3,costChange:.1,paymentDelay:30,seasonalityFactor:.7},results:{cashFlow:[8e4,6e4,4e4,2e4],riskScore:60,recommendations:["Диверсифицировать продукцию","Искать новые рынки","Оптимизировать производство"]},timeframe:"medium"}]},{id:"logistics",name:"Логистика",description:"Транспортные услуги, складирование, доставка",icon:"\uD83D\uDE9A",characteristics:{seasonality:.6,volatility:.7,dso:20,dpo:30,dio:15},financingOptions:[{id:"logistics-fleet",name:"Финансирование автопарка",type:"leasing",description:"Лизинг транспортных средств",minAmount:2e6,maxAmount:2e7,interestRate:9,term:48,requirements:["Лицензия на перевозки","Стабильный оборот"],advantages:["Низкая ставка","Налоговые льготы"],disadvantages:["Долгосрочные обязательства"],suitability:90,industrySpecific:!0}],typicalScenarios:[{id:"logistics-fuel",name:"Рост цен на топливо",type:"stress",description:"Увеличение стоимости топлива на 50%",parameters:{revenueChange:0,costChange:.3,paymentDelay:0,seasonalityFactor:1},results:{cashFlow:[12e4,1e5,8e4,6e4],riskScore:70,recommendations:["Пересмотреть тарифы","Оптимизировать маршруты","Рассмотреть альтернативы"]},timeframe:"short"}]}];var I=s(25750),Z=s(98253),E=s(62442);function PersonalizationPage(){let{setSelectedIndustry:e,setUserPreferences:t,setCurrentPage:s}=useAppStoreHydrated(),[i,c]=(0,a.useState)(""),[l,r]=(0,a.useState)("medium"),[o,d]=(0,a.useState)("medium"),m=[{value:"small",label:"Малый бизнес",description:"До 50 сотрудников",icon:(0,n.jsx)(I.Z,{className:"h-5 w-5"})},{value:"medium",label:"Средний бизнес",description:"50-250 сотрудников",icon:(0,n.jsx)(Z.Z,{className:"h-5 w-5"})},{value:"large",label:"Крупный бизнес",description:"Свыше 250 сотрудников",icon:(0,n.jsx)(Z.Z,{className:"h-5 w-5"})}],x=[{value:"low",label:"Консервативный",description:"Минимальные риски",icon:(0,n.jsx)(C.Z,{className:"h-5 w-5"})},{value:"medium",label:"Сбалансированный",description:"Умеренные риски",icon:(0,n.jsx)(A.Z,{className:"h-5 w-5"})},{value:"high",label:"Агрессивный",description:"Высокие риски",icon:(0,n.jsx)(A.Z,{className:"h-5 w-5"})}];return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"max-w-4xl w-full",children:[(0,n.jsxs)("div",{className:"text-center mb-8",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Персонализация"}),(0,n.jsx)("p",{className:"text-xl text-gray-600",children:"Настройте систему под вашу отрасль и бизнес"})]}),(0,n.jsxs)(p,{className:"mb-8",children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(Z.Z,{className:"h-6 w-6 mr-2"}),"Выберите отрасль"]}),(0,n.jsx)(D,{children:"Это поможет нам адаптировать рекомендации и анализ под ваш бизнес"})]}),(0,n.jsx)(f,{children:(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map(e=>(0,n.jsx)(p,{className:"cursor-pointer transition-all duration-200 hover:shadow-md ".concat(i===e.id?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"),onClick:()=>c(e.id),children:(0,n.jsxs)(f,{className:"p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("span",{className:"text-2xl",children:e.icon}),i===e.id&&(0,n.jsx)(E.Z,{className:"h-5 w-5 text-blue-600"})]}),(0,n.jsx)("h3",{className:"font-semibold mb-1",children:e.name}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,n.jsxs)("div",{className:"mt-3 flex flex-wrap gap-1",children:[(0,n.jsxs)(Badge,{variant:"outline",className:"text-xs",children:["DSO: ",e.characteristics.dso,"д"]}),(0,n.jsxs)(Badge,{variant:"outline",className:"text-xs",children:["DPO: ",e.characteristics.dpo,"д"]})]})]})},e.id))})})]}),(0,n.jsxs)(p,{className:"mb-8",children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(I.Z,{className:"h-6 w-6 mr-2"}),"Размер компании"]}),(0,n.jsx)(D,{children:"Это влияет на доступные инструменты финансирования"})]}),(0,n.jsx)(f,{children:(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:m.map(e=>(0,n.jsx)(p,{className:"cursor-pointer transition-all duration-200 hover:shadow-md ".concat(l===e.value?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"),onClick:()=>r(e.value),children:(0,n.jsxs)(f,{className:"p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("div",{className:"text-blue-600",children:e.icon}),l===e.value&&(0,n.jsx)(E.Z,{className:"h-5 w-5 text-blue-600"})]}),(0,n.jsx)("h3",{className:"font-semibold mb-1",children:e.label}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})},e.value))})})]}),(0,n.jsxs)(p,{className:"mb-8",children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(C.Z,{className:"h-6 w-6 mr-2"}),"Толерантность к риску"]}),(0,n.jsx)(D,{children:"Это влияет на рекомендации по финансированию и сценариям"})]}),(0,n.jsx)(f,{children:(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:x.map(e=>(0,n.jsx)(p,{className:"cursor-pointer transition-all duration-200 hover:shadow-md ".concat(o===e.value?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"),onClick:()=>d(e.value),children:(0,n.jsxs)(f,{className:"p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("div",{className:"text-blue-600",children:e.icon}),o===e.value&&(0,n.jsx)(E.Z,{className:"h-5 w-5 text-blue-600"})]}),(0,n.jsx)("h3",{className:"font-semibold mb-1",children:e.label}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})},e.value))})})]}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsxs)(h,{onClick:()=>{if(i){let n=k.find(e=>e.id===i);n&&(e(n),t({industry:i,companySize:l,riskTolerance:o,timeHorizon:"medium",notifications:!0,theme:"light"}),s("ai-welcome"))}},disabled:!i,size:"lg",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-4 text-lg font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300",children:["Продолжить",(0,n.jsx)(M.Z,{className:"ml-2 h-5 w-5"})]})})]})})}var L=s(13008),B=s(8759);function AIWelcomePage(){var e,t;let{selectedIndustry:s,kpiMetrics:i,aiAnalysis:c,setCurrentPage:l,addChatMessage:r}=useAppStoreHydrated(),[o,d]=(0,a.useState)(!0),[m,x]=(0,a.useState)(0),u=["Анализирую ваши данные...","Рассчитываю ключевые показатели...","Определяю риски и возможности...","Формирую персональные рекомендации...","Готово!"];return((0,a.useEffect)(()=>{let e=setInterval(()=>{x(t=>t<u.length-1?t+1:(d(!1),clearInterval(e),t))},1500);return()=>clearInterval(e)},[]),o)?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"max-w-2xl w-full text-center",children:[(0,n.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 rounded-3xl mb-8",children:[(0,n.jsx)(N.Z,{className:"h-16 w-16 text-white mx-auto mb-4 animate-pulse"}),(0,n.jsx)("h1",{className:"text-3xl font-bold text-white mb-4",children:"AI-анализ ваших данных"}),(0,n.jsx)("p",{className:"text-blue-100 text-lg",children:u[m]})]}),(0,n.jsx)("div",{className:"bg-white rounded-2xl p-8 shadow-lg",children:(0,n.jsx)("div",{className:"space-y-4",children:u.map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center space-x-3 ".concat(t<=m?"text-blue-600":"text-gray-400"),children:[(0,n.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center ".concat(t<m?"bg-green-500 text-white":t===m?"bg-blue-500 text-white animate-pulse":"bg-gray-200"),children:t<m?(0,n.jsx)(L.Z,{className:"h-4 w-4"}):t+1}),(0,n.jsx)("span",{className:t<=m?"font-medium":"",children:e})]},t))})})]})}):(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"max-w-6xl w-full",children:[(0,n.jsxs)("div",{className:"text-center mb-8",children:[(0,n.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-4 rounded-2xl w-fit mx-auto mb-6",children:(0,n.jsx)(F.Z,{className:"h-12 w-12 text-white"})}),(0,n.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Добро пожаловать в CFO-AI!"}),(0,n.jsx)("p",{className:"text-xl text-gray-600",children:"Ваш персональный AI-ассистент готов к работе"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(b.Z,{className:"h-6 w-6 mr-2"}),"Ваша отрасль: ",null==s?void 0:s.name]}),(0,n.jsx)(D,{children:null==s?void 0:s.description})]}),(0,n.jsx)(f,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"Сезонность:"}),(0,n.jsxs)(Badge,{variant:"outline",children:[Math.round(100*((null==s?void 0:s.characteristics.seasonality)||0)),"%"]})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"Волатильность:"}),(0,n.jsxs)(Badge,{variant:"outline",children:[Math.round(100*((null==s?void 0:s.characteristics.volatility)||0)),"%"]})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"DSO:"}),(0,n.jsxs)(Badge,{variant:"outline",children:[(null==s?void 0:s.characteristics.dso)||0," дней"]})]})]})})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(g,{children:(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(S.Z,{className:"h-6 w-6 mr-2"}),"Ключевые показатели"]})}),(0,n.jsx)(f,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"Денежный поток:"}),(0,n.jsxs)("span",{className:"font-semibold text-green-600",children:[null==i?void 0:i.cashFlow.toLocaleString()," ₽"]})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"Burn Rate:"}),(0,n.jsxs)("span",{className:"font-semibold",children:[null==i?void 0:i.burnRate.toLocaleString()," ₽/мес"]})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"Runway:"}),(0,n.jsx)("span",{className:"font-semibold",children:(null==i?void 0:i.runway)&&isFinite(i.runway)?"".concat(i.runway," месяцев"):"Н/Д"})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"Риск:"}),(0,n.jsx)(Badge,{variant:"outline",className:(e=(null==i?void 0:i.riskScore)||0)<30?"text-green-600":e<60?"text-yellow-600":"text-red-600",children:(t=(null==i?void 0:i.riskScore)||0)<30?"Низкий":t<60?"Средний":"Высокий"})]})]})})]})]}),(0,n.jsxs)(p,{className:"mb-8",children:[(0,n.jsx)(g,{children:(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(N.Z,{className:"h-6 w-6 mr-2"}),"AI-анализ и рекомендации"]})}),(0,n.jsx)(f,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:"font-semibold text-green-600 mb-3 flex items-center",children:[(0,n.jsx)(L.Z,{className:"h-5 w-5 mr-2"}),"Сильные стороны"]}),(0,n.jsx)("ul",{className:"space-y-2",children:null==c?void 0:c.insights.slice(0,2).map((e,t)=>(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)("span",{className:"text-green-500 mr-2",children:"•"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-semibold",children:e.title}),(0,n.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.description})]})]},t))})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:"font-semibold text-blue-600 mb-3 flex items-center",children:[(0,n.jsx)(B.Z,{className:"h-5 w-5 mr-2"}),"Рекомендации"]}),(0,n.jsx)("ul",{className:"space-y-2",children:null==c?void 0:c.recommendations.slice(0,2).map((e,t)=>(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)("span",{className:"text-blue-500 mr-2",children:"•"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-semibold",children:e.title}),(0,n.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.description})]})]},t))})]})]})})]}),(0,n.jsxs)(p,{className:"mb-8",children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(w.Z,{className:"h-6 w-6 mr-2"}),"Быстрые действия"]}),(0,n.jsx)(D,{children:"Начните с этих действий для оптимизации вашего бизнеса"})]}),(0,n.jsx)(f,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)(h,{variant:"outline",className:"h-auto p-4 flex flex-col items-center space-y-2",onClick:()=>l("dashboard"),children:[(0,n.jsx)(S.Z,{className:"h-8 w-8 text-blue-600"}),(0,n.jsx)("span",{className:"font-semibold",children:"Прогноз ДДС"}),(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"Анализ денежных потоков"})]}),(0,n.jsxs)(h,{variant:"outline",className:"h-auto p-4 flex flex-col items-center space-y-2",onClick:()=>l("dashboard"),children:[(0,n.jsx)(b.Z,{className:"h-8 w-8 text-green-600"}),(0,n.jsx)("span",{className:"font-semibold",children:"Сценарии"}),(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"Стресс-тесты и планирование"})]}),(0,n.jsxs)(h,{variant:"outline",className:"h-auto p-4 flex flex-col items-center space-y-2",onClick:()=>l("dashboard"),children:[(0,n.jsx)(A.Z,{className:"h-8 w-8 text-purple-600"}),(0,n.jsx)("span",{className:"font-semibold",children:"Финансирование"}),(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"Подбор инструментов"})]})]})})]}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsxs)(h,{onClick:()=>{r({id:"welcome-1",role:"assistant",content:"Привет! Я ваш AI-ассистент CFO. Я проанализировал ваши данные и готов помочь с управлением денежными потоками. Что вас интересует в первую очередь?",timestamp:new Date().toISOString(),actions:[{id:"forecast",label:"Посмотреть прогноз",action:"forecast",icon:"\uD83D\uDCCA"},{id:"scenarios",label:"Проанализировать сценарии",action:"scenarios",icon:"\uD83C\uDFAF"},{id:"financing",label:"Подобрать финансирование",action:"financing",icon:"\uD83D\uDCB0"}]}),l("dashboard")},size:"lg",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-4 text-lg font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300",children:["Перейти к дашборду",(0,n.jsx)(M.Z,{className:"ml-2 h-5 w-5"})]})})]})})}var R=s(10106);let O=R.fC,T=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(R.aV,{ref:t,className:cn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...a})});T.displayName=R.aV.displayName;let P=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(R.xz,{ref:t,className:cn("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...a})});P.displayName=R.xz.displayName;let K=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(R.VY,{ref:t,className:cn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});K.displayName=R.VY.displayName;var Y=s(19223),z=s(35048),q=s(90045),H=s(16573),W=s(24235),U=s(50039),V=s(2047),Q=s(79857),_=s(51125),$=s(38227),G=s(44909),J=s(78295),X=s(41125),ee=s(89366),et=s(7205),es=s(77216),en=s(99670),ea=s(35817),ei=s(64280),ec=s(72894),el=s(30525),er=s(80838);function ForecastChart(){let{forecasts:e,kpiMetrics:t,aiAnalysis:s,bankStatements:i,selectedIndustry:c}=useAppStoreHydrated(),[l,r]=(0,a.useState)("area"),[o,d]=(0,a.useState)(!0),[m,x]=(0,a.useState)("month"),u=e.map(e=>({date:new Date(e.date).toLocaleDateString("ru-RU",{month:"short",day:"numeric"}),fullDate:e.date,p5:e.p5,p50:e.p50,p95:e.p95,confidence:Math.round(100*e.confidence),variance:e.p95-e.p5,risk:Math.round((1-e.confidence)*100)})),y=e.filter(e=>e.p5<0),v=e.reduce((e,t)=>e+(1-t.confidence),0)/e.length*100,w=i.reduce((e,t)=>{let s=new Date(t.date).getMonth();return e[s]=(e[s]||0)+t.amount,e},{}),C=Object.entries(w).map(e=>{let[t,s]=e;return{month:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"][parseInt(t)],amount:s,trend:s>0?"positive":"negative"}}),A=e.map(e=>({date:new Date(e.date).toLocaleDateString("ru-RU",{day:"numeric"}),volatility:e.p95-e.p5,confidence:e.confidence}));return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Прогноз денежных потоков"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Вероятностное прогнозирование с интервалами доверия"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsxs)(Badge,{variant:"outline",className:"text-sm",children:[(0,n.jsx)(N.Z,{className:"h-4 w-4 mr-1"}),"AI-анализ"]}),(0,n.jsxs)(Badge,{className:v<20?"text-green-600 bg-green-100":v<40?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",children:["Риск: ",v<20?"Низкий":v<40?"Средний":"Высокий"]})]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("span",{className:"text-sm font-medium",children:"Вид:"}),(0,n.jsxs)(h,{variant:"area"===l?"default":"outline",size:"sm",onClick:()=>r("area"),children:[(0,n.jsx)(et.Z,{className:"h-4 w-4 mr-1"}),"Область"]}),(0,n.jsxs)(h,{variant:"line"===l?"default":"outline",size:"sm",onClick:()=>r("line"),children:[(0,n.jsx)(Y.x,{className:"h-4 w-4 mr-1"}),"Линия"]}),(0,n.jsxs)(h,{variant:"bar"===l?"default":"outline",size:"sm",onClick:()=>r("bar"),children:[(0,n.jsx)(S.Z,{className:"h-4 w-4 mr-1"}),"Столбцы"]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("span",{className:"text-sm font-medium",children:"Период:"}),(0,n.jsx)(h,{variant:"week"===m?"default":"outline",size:"sm",onClick:()=>x("week"),children:"Неделя"}),(0,n.jsx)(h,{variant:"month"===m?"default":"outline",size:"sm",onClick:()=>x("month"),children:"Месяц"}),(0,n.jsx)(h,{variant:"quarter"===m?"default":"outline",size:"sm",onClick:()=>x("quarter"),children:"Квартал"})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsxs)(h,{variant:"outline",size:"sm",onClick:()=>d(!o),children:[o?(0,n.jsx)(es.Z,{className:"h-4 w-4 mr-1"}):(0,n.jsx)(en.Z,{className:"h-4 w-4 mr-1"}),o?"Скрыть":"Показать"," доверие"]}),(0,n.jsxs)(h,{variant:"outline",size:"sm",children:[(0,n.jsx)(ea.Z,{className:"h-4 w-4 mr-1"}),"Экспорт"]}),(0,n.jsxs)(h,{variant:"outline",size:"sm",children:[(0,n.jsx)(ei.Z,{className:"h-4 w-4 mr-1"}),"Обновить"]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)(p,{children:[(0,n.jsx)(g,{className:"pb-2",children:(0,n.jsxs)(j,{className:"text-sm font-medium flex items-center",children:[(0,n.jsx)(b.Z,{className:"h-4 w-4 mr-2 text-blue-600"}),"Средний прогноз"]})}),(0,n.jsxs)(f,{children:[(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(e.reduce((e,t)=>e+t.p50,0)/e.length).toLocaleString()," ₽"]}),(0,n.jsx)("p",{className:"text-xs text-gray-600",children:"P50 интервал"})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(g,{className:"pb-2",children:(0,n.jsxs)(j,{className:"text-sm font-medium flex items-center",children:[(0,n.jsx)(ec.Z,{className:"h-4 w-4 mr-2 text-orange-600"}),"Критические дни"]})}),(0,n.jsxs)(f,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-red-600",children:y.length}),(0,n.jsx)("p",{className:"text-xs text-gray-600",children:"Дней с риском"})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(g,{className:"pb-2",children:(0,n.jsxs)(j,{className:"text-sm font-medium flex items-center",children:[(0,n.jsx)(L.Z,{className:"h-4 w-4 mr-2 text-green-600"}),"Уверенность"]})}),(0,n.jsxs)(f,{children:[(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(e.reduce((e,t)=>e+t.confidence,0)/e.length*100),"%"]}),(0,n.jsx)("p",{className:"text-xs text-gray-600",children:"Средняя точность"})]})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsx)(j,{children:"Вероятностный прогноз денежных потоков"}),(0,n.jsx)(D,{children:"P5 (пессимистичный), P50 (наиболее вероятный), P95 (оптимистичный) интервалы"})]}),(0,n.jsx)(f,{children:(0,n.jsx)("div",{className:"h-96",children:(0,n.jsx)(z.h,{width:"100%",height:"100%",children:"area"===l?(0,n.jsxs)(q.T,{data:u,children:[(0,n.jsx)(H.q,{strokeDasharray:"3 3"}),(0,n.jsx)(W.K,{dataKey:"date"}),(0,n.jsx)(U.B,{tickFormatter:e=>"".concat((e/1e3).toFixed(0),"k")}),(0,n.jsx)(V.u,{formatter:(e,t)=>["".concat(Number(e).toLocaleString()," ₽"),"p5"===t?"Пессимистичный (P5)":"p50"===t?"Наиболее вероятный (P50)":"Оптимистичный (P95)"]}),(0,n.jsx)(Q.D,{}),(0,n.jsx)(_.u,{type:"monotone",dataKey:"p95",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.1,name:"p95"}),(0,n.jsx)(_.u,{type:"monotone",dataKey:"p50",stackId:"2",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.3,name:"p50"}),(0,n.jsx)(_.u,{type:"monotone",dataKey:"p5",stackId:"3",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.1,name:"p5"})]}):"line"===l?(0,n.jsxs)($.w,{data:u,children:[(0,n.jsx)(H.q,{strokeDasharray:"3 3"}),(0,n.jsx)(W.K,{dataKey:"date"}),(0,n.jsx)(U.B,{tickFormatter:e=>"".concat((e/1e3).toFixed(0),"k")}),(0,n.jsx)(V.u,{formatter:(e,t)=>["".concat(Number(e).toLocaleString()," ₽"),"p5"===t?"Пессимистичный (P5)":"p50"===t?"Наиболее вероятный (P50)":"Оптимистичный (P95)"]}),(0,n.jsx)(Q.D,{}),(0,n.jsx)(Y.x,{type:"monotone",dataKey:"p5",stroke:"#ef4444",strokeWidth:2,name:"P5"}),(0,n.jsx)(Y.x,{type:"monotone",dataKey:"p50",stroke:"#3b82f6",strokeWidth:3,name:"P50"}),(0,n.jsx)(Y.x,{type:"monotone",dataKey:"p95",stroke:"#10b981",strokeWidth:2,name:"P95"})]}):(0,n.jsxs)(G.v,{data:u,children:[(0,n.jsx)(H.q,{strokeDasharray:"3 3"}),(0,n.jsx)(W.K,{dataKey:"date"}),(0,n.jsx)(U.B,{tickFormatter:e=>"".concat((e/1e3).toFixed(0),"k")}),(0,n.jsx)(V.u,{formatter:(e,t)=>["".concat(Number(e).toLocaleString()," ₽"),"p5"===t?"Пессимистичный (P5)":"p50"===t?"Наиболее вероятный (P50)":"Оптимистичный (P95)"]}),(0,n.jsx)(Q.D,{}),(0,n.jsx)(J.$,{dataKey:"p5",fill:"#ef4444",name:"P5"}),(0,n.jsx)(J.$,{dataKey:"p50",fill:"#3b82f6",name:"P50"}),(0,n.jsx)(J.$,{dataKey:"p95",fill:"#10b981",name:"P95"})]})})})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(el.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"Сезонность денежных потоков"]}),(0,n.jsx)(D,{children:"Анализ по месяцам за последний период"})]}),(0,n.jsx)(f,{children:(0,n.jsx)("div",{className:"h-64",children:(0,n.jsx)(z.h,{width:"100%",height:"100%",children:(0,n.jsxs)(G.v,{data:C,children:[(0,n.jsx)(H.q,{strokeDasharray:"3 3"}),(0,n.jsx)(W.K,{dataKey:"month"}),(0,n.jsx)(U.B,{tickFormatter:e=>"".concat((e/1e3).toFixed(0),"k")}),(0,n.jsx)(V.u,{formatter:e=>["".concat(Number(e).toLocaleString()," ₽"),"Сумма"]}),(0,n.jsx)(J.$,{dataKey:"amount",fill:"#3b82f6"})]})})})})]}),(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(er.Z,{className:"h-5 w-5 mr-2 text-purple-600"}),"Анализ волатильности"]}),(0,n.jsx)(D,{children:"Разброс прогнозов и уверенность"})]}),(0,n.jsx)(f,{children:(0,n.jsx)("div",{className:"h-64",children:(0,n.jsx)(z.h,{width:"100%",height:"100%",children:(0,n.jsxs)(X.G,{data:A,children:[(0,n.jsx)(H.q,{strokeDasharray:"3 3"}),(0,n.jsx)(W.K,{dataKey:"date"}),(0,n.jsx)(U.B,{dataKey:"volatility"}),(0,n.jsx)(V.u,{formatter:(e,t)=>["volatility"===t?"".concat(Number(e).toLocaleString()," ₽"):"".concat(Number(e),"%"),"volatility"===t?"Волатильность":"Уверенность"]}),(0,n.jsx)(ee.b,{dataKey:"volatility",fill:"#8b5cf6"})]})})})})]})]}),s&&(0,n.jsxs)(p,{children:[(0,n.jsx)(g,{children:(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(N.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"AI-анализ прогноза"]})}),(0,n.jsx)(f,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:"font-semibold text-green-600 mb-3 flex items-center",children:[(0,n.jsx)(L.Z,{className:"h-4 w-4 mr-2"}),"Положительные тренды"]}),(0,n.jsx)("ul",{className:"space-y-2",children:s.insights.slice(0,2).map((e,t)=>(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)("span",{className:"text-green-500 mr-2",children:"•"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-semibold",children:e.title}),(0,n.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.description})]})]},t))})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:"font-semibold text-blue-600 mb-3 flex items-center",children:[(0,n.jsx)(B.Z,{className:"h-4 w-4 mr-2"}),"Рекомендации"]}),(0,n.jsx)("ul",{className:"space-y-2",children:s.recommendations.slice(0,2).map((e,t)=>(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)("span",{className:"text-blue-500 mr-2",children:"•"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-semibold",children:e.title}),(0,n.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.description})]})]},t))})]})]})})]}),y.length>0&&(0,n.jsxs)(p,{className:"border-red-200 bg-red-50",children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center text-red-800",children:[(0,n.jsx)(ec.Z,{className:"h-5 w-5 mr-2"}),"Внимание: Критические дни"]}),(0,n.jsx)(D,{className:"text-red-700",children:"Обнаружены дни с высоким риском кассового разрыва"})]}),(0,n.jsx)(f,{children:(0,n.jsxs)("div",{className:"space-y-2",children:[y.slice(0,3).map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-red-200",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:new Date(e.date).toLocaleDateString("ru-RU")}),(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:["Пессимистичный сценарий: ",e.p5.toLocaleString()," ₽"]})]}),(0,n.jsx)(Badge,{variant:"destructive",children:"Критично"})]},t)),y.length>3&&(0,n.jsxs)("p",{className:"text-sm text-red-600",children:["И еще ",y.length-3," критических дней..."]})]})})]})]})}var eo=s(74522),ed=s(6141);function AdvancedScenarios(){var e;let{scenarios:t,selectedIndustry:s,kpiMetrics:i}=useAppStoreHydrated(),[c,l]=(0,a.useState)(""),[r,o]=(0,a.useState)(!1),handleAnalyzeScenario=e=>{l(e),o(!0),setTimeout(()=>{o(!1)},2e3)},getScenarioIcon=e=>{switch(e){case"optimistic":return(0,n.jsx)(A.Z,{className:"h-5 w-5 text-green-600"});case"pessimistic":return(0,n.jsx)(eo.Z,{className:"h-5 w-5 text-red-600"});case"stress":return(0,n.jsx)(ec.Z,{className:"h-5 w-5 text-orange-600"});default:return(0,n.jsx)(b.Z,{className:"h-5 w-5 text-blue-600"})}},getScenarioColor=e=>{switch(e){case"optimistic":return"text-green-600 bg-green-100";case"pessimistic":return"text-red-600 bg-red-100";case"stress":return"text-orange-600 bg-orange-100";default:return"text-blue-600 bg-blue-100"}},getTimeframeLabel=e=>{switch(e){case"short":return"Краткосрочный (1-3 мес)";case"medium":return"Среднесрочный (3-12 мес)";case"long":return"Долгосрочный (1+ год)";default:return"Неопределенный"}},getTimeframeIcon=e=>{switch(e){case"short":return(0,n.jsx)(w.Z,{className:"h-4 w-4"});case"medium":return(0,n.jsx)(ed.Z,{className:"h-4 w-4"});case"long":return(0,n.jsx)(S.Z,{className:"h-4 w-4"});default:return(0,n.jsx)(b.Z,{className:"h-4 w-4"})}},d=t.find(e=>e.id===c),m=d?(e=>{var t;if(!e)return[];let s=(null==i?void 0:i.cashFlow)||5e5,n="short"===e.timeframe?3:"medium"===e.timeframe?12:24,a=0,c=0;e.parameters?(a=e.parameters.revenueChange||0,c=e.parameters.costChange||0):e.impact&&(a=e.impact.revenue-1,c=e.impact.costs-1);let l=(null===(t=e.results)||void 0===t?void 0:t.riskScore)||(e.probability?(1-e.probability)*100:50);return Array.from({length:n},(e,t)=>({month:"Месяц ".concat(t+1),cashFlow:s*(1+a-c)*(1+.1*t),risk:l,confidence:Math.max(.5,1-.05*t)}))})(d):[];return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Продвинутые сценарии"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Персонализированные сценарии с AI-анализом"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsxs)(Badge,{variant:"outline",className:"text-sm",children:[(0,n.jsx)(N.Z,{className:"h-4 w-4 mr-1"}),"AI-анализ"]}),(0,n.jsx)(Badge,{variant:"outline",className:"text-sm",children:null==s?void 0:s.name})]})]}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>{var t,s,a,i;return(0,n.jsxs)(p,{className:"cursor-pointer transition-all duration-200 hover:shadow-lg ".concat(c===e.id?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"),onClick:()=>l(e.id),children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[getScenarioIcon(e.type||"custom"),(0,n.jsx)(j,{className:"text-lg",children:e.name})]}),(0,n.jsx)(Badge,{className:getScenarioColor(e.type||"custom"),children:"optimistic"===e.type?"Оптимистичный":"pessimistic"===e.type?"Пессимистичный":"stress"===e.type?"Стресс-тест":e.probability?"Вероятность ".concat(Math.round(100*e.probability),"%"):"Пользовательский"})]}),(0,n.jsx)(D,{children:e.description})]}),(0,n.jsx)(f,{children:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Временной горизонт:"}),(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[getTimeframeIcon(e.timeframe),(0,n.jsx)("span",{children:getTimeframeLabel(e.timeframe)})]})]}),((null===(t=e.results)||void 0===t?void 0:t.riskScore)!==void 0||void 0!==e.probability)&&(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Риск:"}),(0,n.jsxs)(Badge,{className:30>((null===(s=e.results)||void 0===s?void 0:s.riskScore)||(e.probability?(1-e.probability)*100:50))?"text-green-600 bg-green-100":60>((null===(a=e.results)||void 0===a?void 0:a.riskScore)||(e.probability?(1-e.probability)*100:50))?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",children:[Math.round((null===(i=e.results)||void 0===i?void 0:i.riskScore)||(e.probability?(1-e.probability)*100:50)),"%"]})]}),e.impact&&(0,n.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Выручка:"}),(0,n.jsxs)("span",{className:"font-medium ".concat(e.impact.revenue>1?"text-green-600":"text-red-600"),children:[e.impact.revenue>1?"+":"",Math.round((e.impact.revenue-1)*100),"%"]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Расходы:"}),(0,n.jsxs)("span",{className:"font-medium ".concat(e.impact.costs>1?"text-red-600":"text-green-600"),children:[e.impact.costs>1?"+":"",Math.round((e.impact.costs-1)*100),"%"]})]})]}),e.parameters&&(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Изменение выручки:"}),(0,n.jsxs)("span",{className:"font-medium ".concat(e.parameters.revenueChange>0?"text-green-600":"text-red-600"),children:[e.parameters.revenueChange>0?"+":"",Math.round(100*e.parameters.revenueChange),"%"]})]}),(0,n.jsx)(h,{onClick:t=>{t.stopPropagation(),handleAnalyzeScenario(e.id)},className:"w-full",disabled:r,children:r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Анализирую..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"AI-анализ"]})})]})})]},e.id)})}),d&&!r&&(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(b.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"Анализ сценария: ",d.name]}),(0,n.jsx)(D,{children:d.description})]}),(0,n.jsx)(f,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.parameters&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(100*d.parameters.revenueChange),"%"]}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Изменение выручки"})]}),(0,n.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{className:"text-2xl font-bold text-red-600",children:[Math.round(100*d.parameters.costChange),"%"]}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Изменение затрат"})]}),(0,n.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[d.parameters.paymentDelay,"д"]}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Задержка платежей"})]})]}),d.impact&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["x",d.impact.revenue]}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Выручка"})]}),(0,n.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{className:"text-2xl font-bold text-red-600",children:["x",d.impact.costs]}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Расходы"})]})]}),d.probability&&(0,n.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round(100*d.probability),"%"]}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Вероятность"})]}),d.results&&(0,n.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[d.results.riskScore,"%"]}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Уровень риска"})]})]})})]}),(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsx)(j,{children:"Прогноз денежных потоков"}),(0,n.jsx)(D,{children:"Динамика денежных потоков в рамках выбранного сценария"})]}),(0,n.jsx)(f,{children:(0,n.jsx)("div",{className:"h-96",children:(0,n.jsx)(z.h,{width:"100%",height:"100%",children:(0,n.jsxs)($.w,{data:m,children:[(0,n.jsx)(H.q,{strokeDasharray:"3 3"}),(0,n.jsx)(W.K,{dataKey:"month"}),(0,n.jsx)(U.B,{tickFormatter:e=>"".concat((e/1e3).toFixed(0),"k")}),(0,n.jsx)(V.u,{formatter:(e,t)=>["".concat(Number(e).toLocaleString()," ₽"),"cashFlow"===t?"Денежный поток":"Риск"]}),(0,n.jsx)(Q.D,{}),(0,n.jsx)(Y.x,{type:"monotone",dataKey:"cashFlow",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",strokeWidth:2,r:4}})]})})})})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(g,{children:(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(N.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"AI-рекомендации"]})}),(0,n.jsx)(f,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:"font-semibold text-green-600 mb-2 flex items-center",children:[(0,n.jsx)(L.Z,{className:"h-4 w-4 mr-2"}),"Рекомендации по управлению"]}),(0,n.jsx)("ul",{className:"space-y-2",children:((null===(e=d.results)||void 0===e?void 0:e.recommendations)||d.recommendations||[]).map((e,t)=>(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)("span",{className:"text-green-500 mr-2",children:"•"}),e]},t))})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:"font-semibold text-blue-600 mb-2 flex items-center",children:[(0,n.jsx)(B.Z,{className:"h-4 w-4 mr-2"}),"Дополнительные меры"]}),(0,n.jsxs)("ul",{className:"space-y-2",children:[(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)("span",{className:"text-blue-500 mr-2",children:"•"}),"Рассмотрите возможность получения кредитной линии для покрытия кассовых разрывов"]}),(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)("span",{className:"text-blue-500 mr-2",children:"•"}),"Оптимизируйте работу с дебиторской задолженностью"]}),(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)("span",{className:"text-blue-500 mr-2",children:"•"}),"Внедрите систему мониторинга денежных потоков в реальном времени"]})]})]})]})})]})]})]})}var em=s(41298),ex=s(55340);function AdvancedFinancing(){let{financingOptions:e,selectedIndustry:t,kpiMetrics:s}=useAppStoreHydrated(),[i,c]=(0,a.useState)(""),[l,r]=(0,a.useState)(!1),handleAnalyzeOption=e=>{c(e),r(!0),setTimeout(()=>{r(!1)},2e3)},getTypeIcon=e=>{switch(e){case"credit":return(0,n.jsx)(em.Z,{className:"h-5 w-5 text-blue-600"});case"factoring":return(0,n.jsx)(A.Z,{className:"h-5 w-5 text-green-600"});case"leasing":return(0,n.jsx)(S.Z,{className:"h-5 w-5 text-purple-600"});case"overdraft":return(0,n.jsx)(w.Z,{className:"h-5 w-5 text-orange-600"});case"investment":return(0,n.jsx)(b.Z,{className:"h-5 w-5 text-indigo-600"});default:return(0,n.jsx)(em.Z,{className:"h-5 w-5 text-gray-600"})}},getTypeLabel=e=>{switch(e){case"credit":return"Кредит";case"factoring":return"Факторинг";case"leasing":return"Лизинг";case"overdraft":return"Овердрафт";case"investment":return"Инвестиции";default:return"Финансирование"}},getSuitabilityColor=e=>e>=90?"text-green-600 bg-green-100":e>=70?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",getSuitabilityLabel=e=>e>=90?"Отлично подходит":e>=70?"Хорошо подходит":"Не рекомендуется",o=e.find(e=>e.id===i),d=[...e].sort((e,t)=>t.suitability-e.suitability);return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Подбор финансирования"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Отраслевые инструменты финансирования с AI-рекомендациями"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsxs)(Badge,{variant:"outline",className:"text-sm",children:[(0,n.jsx)(N.Z,{className:"h-4 w-4 mr-1"}),"Learning-to-Rank"]}),(0,n.jsx)(Badge,{variant:"outline",className:"text-sm",children:null==t?void 0:t.name})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(g,{children:(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(S.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"Текущее финансовое положение"]})}),(0,n.jsx)(f,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,n.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[null==s?void 0:s.cashFlow.toLocaleString()," ₽"]}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Денежный поток"})]}),(0,n.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null==s?void 0:s.runway)&&isFinite(s.runway)?"".concat(s.runway," мес"):"Н/Д"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Runway"})]}),(0,n.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:(null==s?void 0:s.liquidityRatio)&&isFinite(s.liquidityRatio)?"".concat(s.liquidityRatio,"x"):"Н/Д"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Ликвидность"})]}),(0,n.jsxs)("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[(0,n.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[null==s?void 0:s.riskScore,"%"]}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Риск"})]})]})})]}),(0,n.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:d.map(e=>(0,n.jsxs)(p,{className:"cursor-pointer transition-all duration-200 hover:shadow-lg ".concat(i===e.id?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"),onClick:()=>c(e.id),children:[(0,n.jsx)(g,{children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[getTypeIcon(e.type),(0,n.jsxs)("div",{children:[(0,n.jsx)(j,{className:"text-lg",children:e.name}),(0,n.jsx)(D,{children:e.description})]})]}),(0,n.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(0,n.jsx)(Badge,{className:getSuitabilityColor(e.suitability),children:getSuitabilityLabel(e.suitability)}),(0,n.jsx)(Badge,{variant:"outline",children:getTypeLabel(e.type)})]})]})}),(0,n.jsx)(f,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:[e.interestRate,"%"]}),(0,n.jsx)("p",{className:"text-xs text-gray-600",children:"Ставка"})]}),(0,n.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{className:"text-lg font-bold text-green-600",children:[e.term," мес"]}),(0,n.jsx)("p",{className:"text-xs text-gray-600",children:"Срок"})]})]}),(0,n.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,n.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Сумма финансирования"}),(0,n.jsxs)("div",{className:"text-lg font-bold",children:[e.minAmount.toLocaleString()," - ",e.maxAmount.toLocaleString()," ₽"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-semibold text-sm text-green-600 mb-2",children:"Преимущества:"}),(0,n.jsx)("ul",{className:"space-y-1",children:e.advantages.slice(0,2).map((e,t)=>(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)(L.Z,{className:"h-3 w-3 text-green-500 mr-2 mt-0.5"}),e]},t))})]}),e.industrySpecific&&(0,n.jsxs)(Badge,{variant:"outline",className:"text-xs",children:[(0,n.jsx)(ex.Z,{className:"h-3 w-3 mr-1"}),"Специально для ",null==t?void 0:t.name]}),(0,n.jsx)(h,{onClick:t=>{t.stopPropagation(),handleAnalyzeOption(e.id)},className:"w-full",disabled:l,children:l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Анализирую..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"AI-анализ"]})})]})})]},e.id))}),o&&!l&&(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(b.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"Детальный анализ: ",o.name]}),(0,n.jsx)(D,{children:o.description})]}),(0,n.jsx)(f,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:"font-semibold text-blue-600 mb-3 flex items-center",children:[(0,n.jsx)(C.Z,{className:"h-4 w-4 mr-2"}),"Требования"]}),(0,n.jsx)("ul",{className:"space-y-2",children:o.requirements.map((e,t)=>(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)("span",{className:"text-blue-500 mr-2",children:"•"}),e]},t))})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:"font-semibold text-green-600 mb-3 flex items-center",children:[(0,n.jsx)(L.Z,{className:"h-4 w-4 mr-2"}),"Преимущества"]}),(0,n.jsx)("ul",{className:"space-y-2 mb-4",children:o.advantages.map((e,t)=>(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)("span",{className:"text-green-500 mr-2",children:"•"}),e]},t))}),(0,n.jsxs)("h4",{className:"font-semibold text-red-600 mb-3 flex items-center",children:[(0,n.jsx)(ec.Z,{className:"h-4 w-4 mr-2"}),"Недостатки"]}),(0,n.jsx)("ul",{className:"space-y-2",children:o.disadvantages.map((e,t)=>(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)("span",{className:"text-red-500 mr-2",children:"•"}),e]},t))})]})]})})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(g,{children:(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(N.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"AI-рекомендации"]})}),(0,n.jsx)(f,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,n.jsxs)("h4",{className:"font-semibold text-green-800 mb-2 flex items-center",children:[(0,n.jsx)(B.Z,{className:"h-4 w-4 mr-2"}),"Почему это подходит для вас"]}),(0,n.jsxs)("ul",{className:"space-y-2",children:[(0,n.jsxs)("li",{className:"text-sm text-green-700 flex items-start",children:[(0,n.jsx)("span",{className:"text-green-500 mr-2",children:"•"}),"Ваша отрасль (",null==t?void 0:t.name,") имеет специфические потребности в финансировании"]}),(0,n.jsxs)("li",{className:"text-sm text-green-700 flex items-start",children:[(0,n.jsx)("span",{className:"text-green-500 mr-2",children:"•"}),"Текущий денежный поток позволяет обслуживать данное финансирование"]}),(0,n.jsxs)("li",{className:"text-sm text-green-700 flex items-start",children:[(0,n.jsx)("span",{className:"text-green-500 mr-2",children:"•"}),"Срок и условия соответствуют вашим бизнес-целям"]})]})]}),(0,n.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,n.jsxs)("h4",{className:"font-semibold text-blue-800 mb-2 flex items-center",children:[(0,n.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Следующие шаги"]}),(0,n.jsxs)("ul",{className:"space-y-2",children:[(0,n.jsxs)("li",{className:"text-sm text-blue-700 flex items-start",children:[(0,n.jsx)("span",{className:"text-blue-500 mr-2",children:"1."}),"Подготовьте необходимые документы согласно требованиям"]}),(0,n.jsxs)("li",{className:"text-sm text-blue-700 flex items-start",children:[(0,n.jsx)("span",{className:"text-blue-500 mr-2",children:"2."}),"Обратитесь к нескольким банкам для сравнения условий"]}),(0,n.jsxs)("li",{className:"text-sm text-blue-700 flex items-start",children:[(0,n.jsx)("span",{className:"text-blue-500 mr-2",children:"3."}),"Рассмотрите возможность получения предварительного одобрения"]})]})]})]})})]})]})]})}var eu=s(67972),eh=s(93966),ep=s(76020);function SmartAssistant(e){let{isFullScreen:t=!1}=e,{chatMessages:s,addChatMessage:i,kpiMetrics:c,selectedIndustry:l,bankStatements:r}=useAppStoreHydrated(),[o,d]=(0,a.useState)(""),[m,x]=(0,a.useState)(!1),u=(0,a.useRef)(null);(0,a.useEffect)(()=>{var e;null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[s]);let y=r.length>0||c||l,analyzeMessageContext=e=>{let t=e.toLowerCase().trim(),s={greeting:0,gratitude:0,cashflow:0,risks:0,recommendations:0,analysis:0,financing:0,scenarios:0};/^(привет|hello|hi|здравствуй|добр)/i.test(t)&&(s.greeting+=10),/утр|день|вечер/.test(t)&&(s.greeting+=5),/спасибо|благодар|thanks|thank/.test(t)&&(s.gratitude+=10),/деньг|денежн|поток|ддс|касс/.test(t)&&(s.cashflow+=8),/прогноз|forecast/.test(t)&&(s.cashflow+=7),/финанс|ликвидн/.test(t)&&(s.cashflow+=6),/сколько|как дела с/.test(t)&&(s.cashflow+=5),/риск|risk/.test(t)&&(s.risks+=10),/опасн|угроз|проблем/.test(t)&&(s.risks+=7),/что может пойти|беспокои|страшн/.test(t)&&(s.risks+=6),/рекоменд|совет|recommend/.test(t)&&(s.recommendations+=10),/что делать|как быть|помощ|помог/.test(t)&&(s.recommendations+=8),/посоветуй|что улучш|как улучш/.test(t)&&(s.recommendations+=7),/анализ|analysis/.test(t)&&(s.analysis+=10),/полн|комплексн|общ/.test(t)&&(s.analysis+=7),/все данн|общая картин|что происход/.test(t)&&(s.analysis+=6),/как дела(?! с)/.test(t)&&(s.analysis+=5),/финансирован|кредит|займ|инвест/.test(t)&&(s.financing+=10),/где взять|нужны деньги|привлечь/.test(t)&&(s.financing+=8),/сценари|стресс|что если/.test(t)&&(s.scenarios+=10);let n=Math.max(...Object.values(s)),a=Object.entries(s).find(e=>{let[t,s]=e;return s===n});return console.log("\uD83E\uDDE0 Context Analysis:",{message:t,scores:s,bestMatch:a}),a?a[0]:"general"},generateSmartResponse=e=>{var t,s,n;let a=new Date().toISOString(),i=analyzeMessageContext(e),r=(null==c?void 0:c.cashFlow)||0,o=(null==c?void 0:c.runway)||0,d=(null==c?void 0:c.riskScore)||0,m=(null==c?void 0:c.liquidityRatio)||0,x=(null==l?void 0:l.name)||"не определена";if(console.log("\uD83E\uDD16 Generating response for context:",i,"hasData:",y),"gratitude"===i)return{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDE0A **Пожалуйста! Всегда рад помочь!**\n\nЯ здесь для того, чтобы помочь вам принимать правильные финансовые решения. Если возникнут еще вопросы - обращайтесь в любое время!\n\n**\uD83D\uDCAC Чем еще могу помочь?**",timestamp:a,actions:[{id:"forecast",label:"Прогноз",action:"forecast",icon:"\uD83D\uDCCA"},{id:"recommendations",label:"Советы",action:"recommendations",icon:"\uD83D\uDCA1"}]};if("greeting"===i){let e=new Date().getHours(),t=e<12?"Доброе утро":e<18?"Добрый день":"Добрый вечер";if(!y)return{id:"ai-".concat(Date.now()),role:"assistant",content:"".concat(t,"! \uD83D\uDC4B **Я ваш AI-ассистент CFO!**\n\nЯ специализируюсь на финансовом анализе и помогу вам:\n• \uD83D\uDCCA Понять текущее финансовое положение\n• \uD83D\uDD2E Спрогнозировать денежные потоки\n• \uD83D\uDEE1️ Выявить и минимизировать риски\n• \uD83D\uDCA1 Разработать стратегию развития\n• \uD83D\uDCB0 Найти оптимальное финансирование\n\n**\uD83D\uDE80 Для начала работы загрузите данные или используйте демо-данные.**"),timestamp:a,actions:[{id:"demo",label:"Загрузить демо",action:"demo",icon:"\uD83D\uDCCA"}]};let s=o<3?"критическое":o<6?"требует внимания":"стабильное",n=o<3?"\uD83D\uDEA8":o<6?"⚠️":"✅";return{id:"ai-".concat(Date.now()),role:"assistant",content:"".concat(t,"! \uD83D\uDC4B **Рад вас видеть!**\n\nЯ провел анализ ваших данных. Вот что я обнаружил:\n\n**\uD83D\uDCCA ФИНАНСОВОЕ ЗДОРОВЬЕ: ").concat(s.toUpperCase()," ").concat(n,"**\n\n**Ключевые показатели:**\n• **Денежный поток:** ").concat(r.toLocaleString()," ₽ ").concat(r>0?"(положительный ✅)":"(отрицательный ⚠️)","\n• **Runway:** ").concat(o," месяцев ").concat(o<3?"(критично! \uD83D\uDEA8)":o<6?"(низкий ⚠️)":"(хорошо ✅)","\n• **Уровень риска:** ").concat(d,"% ").concat(d>70?"(высокий \uD83D\uDD34)":d>40?"(средний \uD83D\uDFE1)":"(низкий \uD83D\uDFE2)","\n• **Ликвидность:** ").concat(m.toFixed(2),"x ").concat(m>2?"(отличная ✅)":m>1?"(нормальная ⚠️)":"(низкая \uD83D\uDEA8)","\n• **Отрасль:** ").concat(x,"\n\n**\uD83C\uDFAF Моя первичная оценка:**\n").concat(o<3?"\uD83D\uDEA8 **КРИТИЧЕСКАЯ СИТУАЦИЯ!** У вас осталось менее 3 месяцев денег. Это требует немедленных действий. Без срочных мер бизнес может остановиться.":o<6?"⚠️ **ТРЕБУЕТ ВНИМАНИЯ.** Низкий runway сигнализирует о необходимости оптимизации в ближайший месяц. Ситуация управляемая, но действовать нужно сейчас.":"✅ **СТАБИЛЬНОЕ ПОЛОЖЕНИЕ.** У вас достаточный запас прочности. Это хорошее время для развития и масштабирования бизнеса.","\n\n**\uD83D\uDCAC О чем хотите узнать подробнее?**"),timestamp:a,actions:[{id:"analysis",label:"Полный анализ",action:"analysis",icon:"\uD83D\uDD0D"},{id:"recommendations",label:"Что делать?",action:"recommendations",icon:"\uD83D\uDCA1"},{id:"risks",label:"Какие риски?",action:"risks",icon:"\uD83D\uDEE1️"}]}}if("cashflow"===i){if(!y)return{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDCB0 **Отличный вопрос про денежные потоки!**\n\nАнализ денежных потоков - это основа финансового здоровья бизнеса. Я готов провести глубокий анализ:\n\n**\uD83D\uDD0D Что я проанализирую:**\n• **Структуру поступлений** - откуда приходят деньги, какие источники самые стабильные\n• **Структуру расходов** - куда уходят деньги, где можно оптимизировать\n• **Тренды** - растут или падают доходы/расходы, сезонность\n• **Прогноз** - что будет через 1, 3, 6, 12 месяцев\n• **Критические точки** - когда может не хватить денег\n• **Рекомендации** - как улучшить денежные потоки\n\n**\uD83D\uDE80 Загрузите данные, и я проведу детальный анализ!**",timestamp:a,actions:[{id:"demo",label:"Демо-данные",action:"demo",icon:"\uD83D\uDCCA"}]};let e=r>0?"положительный":r<0?"отрицательный":"нулевой",t=r>0?"\uD83D\uDCC8":r<0?"\uD83D\uDCC9":"➡️",s=Math.abs(r),n=30*o;return{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDCB0 **ДЕТАЛЬНЫЙ АНАЛИЗ ДЕНЕЖНЫХ ПОТОКОВ**\n\n**\uD83D\uDCCA ТЕКУЩАЯ СИТУАЦИЯ:**\n\n**Основные показатели:**\n• **Денежный поток:** ".concat(r.toLocaleString()," ₽/месяц ").concat(t,"\n• **Тренд:** ").concat(e," ").concat(r>0?"(бизнес генерирует деньги ✅)":"(бизнес тратит больше чем зарабатывает ⚠️)","\n• **Месячный burn rate:** ").concat(s.toLocaleString()," ₽\n• **Runway:** ").concat(o," месяцев (≈").concat(n," дней)\n• **Ликвидность:** ").concat(m.toFixed(2),"x ").concat(m>2?"(отличная ✅)":m>1?"(нормальная ⚠️)":"(низкая \uD83D\uDEA8)","\n\n**\uD83C\uDFAF ЧТО ЭТО ЗНАЧИТ:**\n\n").concat(o<3?"\uD83D\uDEA8 **КРИТИЧЕСКАЯ СИТУАЦИЯ**\n\nУ вас осталось всего ".concat(o," месяцев денег при текущем уровне расходов. Это означает:\n• Через ").concat(n," дней деньги могут закончиться\n• Нет запаса для непредвиденных расходов\n• Высокий риск кассового разрыва\n• Невозможность инвестировать в развитие\n\n**Это требует НЕМЕДЛЕННЫХ действий!**"):o<6?"⚠️ **ТРЕБУЕТ ВНИМАНИЯ**\n\nУ вас ".concat(o," месяцев runway. Это:\n• Недостаточно для спокойного развития\n• Требует оптимизации в ближайший месяц\n• Ограничивает возможности для роста\n• Создает стресс при принятии решений\n\n**Нужны меры в течение 2-4 недель.**"):"✅ **СТАБИЛЬНОЕ ПОЛОЖЕНИЕ**\n\nУ вас ".concat(o," месяцев runway. Это означает:\n• Достаточный запас прочности\n• Возможность инвестировать в развитие\n• Время для стратегического планирования\n• Низкий финансовый стресс\n\n**Отличная база для роста!**"),"\n\n**\uD83D\uDCC8 СТРУКТУРА ДЕНЕЖНЫХ ПОТОКОВ:**\n\n**Поступления:**\n• Основные источники: ").concat((null==l?void 0:l.name)?'специфичны для отрасли "'.concat(x,'"'):"требуют анализа","\n• Стабильность: ").concat(r>0?"высокая":"требует улучшения","\n• Диверсификация: ").concat(d>50?"низкая (риск!)":"достаточная","\n\n**Расходы:**\n• Операционные: ~").concat((.7*s).toLocaleString()," ₽/мес\n• Постоянные: ~").concat((.5*s).toLocaleString()," ₽/мес\n• Переменные: ~").concat((.2*s).toLocaleString()," ₽/мес\n\n**\uD83D\uDD2E ПРОГНОЗ НА БЛИЖАЙШИЕ МЕСЯЦЫ:**\n\n").concat(o<6?"**При текущих темпах:**\n• Через 1 месяц: ".concat((1*r).toLocaleString()," ₽\n• Через 3 месяца: ").concat((3*r).toLocaleString()," ₽\n• Через 6 месяцев: ⚠️ КРИТИЧЕСКИЙ УРОВЕНЬ\n\n**⚠️ ВНИМАНИЕ:** Без изменений деньги закончатся через ").concat(o," месяцев!"):"**При текущих темпах:**\n• Через 1 месяц: ".concat((1*r).toLocaleString()," ₽\n• Через 3 месяца: ").concat((3*r).toLocaleString()," ₽\n• Через 6 месяцев: ").concat((6*r).toLocaleString()," ₽\n• Через 12 месяцев: ").concat((12*r).toLocaleString()," ₽\n\n**✅ Стабильная траектория роста**"),"\n\n**\uD83D\uDCA1 МОИ РЕКОМЕНДАЦИИ:**\n\n").concat(o<3?"**\uD83D\uDEA8 НЕМЕДЛЕННЫЕ ДЕЙСТВИЯ (в течение недели):**\n1. **Экстренное финансирование:** Найти инвестора, кредит или займ СЕГОДНЯ\n2. **Сокращение расходов:** Урезать все необязательные расходы на 40-60%\n3. **Ускорение поступлений:** Собрать всю дебиторку, предоплаты, скидки за быструю оплату\n4. **Продажа активов:** Рассмотреть продажу неликвидных активов\n5. **Переговоры:** Договориться с поставщиками об отсрочке платежей\n\n**⚡ КРАТКОСРОЧНЫЕ (1-2 месяца):**\n• Найти новые источники дохода\n• Оптимизировать операционные процессы\n• Пересмотреть ценообразование (+10-20%)\n• Сфокусироваться на самых прибыльных продуктах":o<6?"**⚠️ ВАЖНЫЕ ДЕЙСТВИЯ (в течение месяца):**\n1. **Привлечь финансирование:** Кредитная линия или инвестиции на ".concat((6*s).toLocaleString()," ₽\n2. **Оптимизация расходов:** Сократить на 20-30% без потери качества\n3. **Улучшение cash flow:** Ускорить сбор дебиторки, договориться об отсрочках\n4. **Новые источники дохода:** Развивать дополнительные продукты/услуги\n\n**\uD83C\uDFAF СРЕДНЕСРОЧНЫЕ (3-6 месяцев):**\n• Создать резервный фонд на 6 месяцев\n• Автоматизировать ключевые процессы\n• Диверсифицировать клиентскую базу\n• Внедрить систему прогнозирования"):"**✅ РЕКОМЕНДАЦИИ ДЛЯ РОСТА:**\n1. **Создать резервный фонд:** Накопить на 12 месяцев расходов\n2. **Инвестировать в развитие:** Новые продукты, маркетинг, команда\n3. **Масштабирование:** Выход на новые рынки, автоматизация\n4. **Оптимизация:** Улучшить эффективность на 20-30%\n\n**\uD83D\uDE80 СТРАТЕГИЧЕСКИЕ (6+ месяцев):**\n• Подготовиться к привлечению инвестиций\n• Развивать новые направления бизнеса\n• Создать систему управления финансами\n• Стать лидером в своей нише","\n\n**\uD83D\uDCCA Хотите увидеть детальный прогноз по неделям?**"),timestamp:a,actions:[{id:"forecast",label:"Детальный прогноз",action:"forecast",icon:"\uD83D\uDCCA"},{id:"financing",label:"Где взять деньги?",action:"financing",icon:"\uD83D\uDCB0"},{id:"recommendations",label:"План действий",action:"recommendations",icon:"\uD83D\uDCA1"}]}}if("risks"===i){if(!y)return{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDEE1️ **Важнейший вопрос про риски!**\n\nУправление рисками - ключ к выживанию и процветанию бизнеса. Я готов провести комплексный анализ:\n\n**\uD83D\uDD0D Что я проанализирую:**\n• **Критические риски** - что может привести к банкротству\n• **Финансовые риски** - проблемы с ликвидностью, кассовые разрывы\n• **Операционные риски** - проблемы в процессах, зависимости\n• **Рыночные риски** - изменения в отрасли, конкуренция\n• **Стратегические риски** - долгосрочные угрозы\n• **План защиты** - конкретные меры для каждого риска\n\n**\uD83D\uDE80 Загрузите данные, и я покажу все риски с планом защиты!**",timestamp:a,actions:[{id:"demo",label:"Демо-данные",action:"demo",icon:"\uD83D\uDCCA"}]};let e=d>70?"КРИТИЧЕСКИЙ":d>40?"ВЫСОКИЙ":d>20?"СРЕДНИЙ":"НИЗКИЙ",n=d>70?"\uD83D\uDD34":d>40?"\uD83D\uDFE1":"\uD83D\uDFE2",i=Math.abs(r);return{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDEE1️ **КОМПЛЕКСНЫЙ АНАЛИЗ РИСКОВ**\n\n**\uD83D\uDCCA ОБЩАЯ ОЦЕНКА РИСКОВ:**\n\n• **Интегральный уровень риска:** ".concat(d,"% ").concat(n," **").concat(e,"**\n• **Runway риск:** ").concat(o," мес ").concat(o<3?"\uD83D\uDEA8 КРИТИЧЕСКИЙ":o<6?"⚠️ ВЫСОКИЙ":"✅ НИЗКИЙ","\n• **Ликвидность:** ").concat(m.toFixed(2),"x ").concat(m<1?"\uD83D\uDEA8 КРИТИЧЕСКАЯ":m<2?"⚠️ НИЗКАЯ":"✅ НОРМАЛЬНАЯ","\n• **Отрасль:** ").concat(x," ").concat((null==l?void 0:null===(t=l.characteristics)||void 0===t?void 0:t.seasonality)?"(сезонная)":"","\n\n**\uD83D\uDEA8 КРИТИЧЕСКИЕ РИСКИ (требуют немедленного внимания):**\n\n").concat(o<3?"**1. \uD83D\uDCB8 РИСК БАНКРОТСТВА - КРИТИЧЕСКИЙ**\n• **Вероятность:** ВЫСОКАЯ (".concat(o," мес runway)\n• **Последствия:** Остановка бизнеса, банкротство\n• **Причина:** Недостаточно денег для операций\n• **Срок реализации:** ").concat(o," месяцев\n• **План защиты:**\n  - НЕМЕДЛЕННО найти экстренное финансирование\n  - Сократить расходы на 40-60%\n  - Ускорить сбор дебиторки\n  - Рассмотреть продажу активов\n\n**2. \uD83D\uDEAB РИСК ОСТАНОВКИ ОПЕРАЦИЙ - ВЫСОКИЙ**\n• **Вероятность:** СРЕДНЯЯ\n• **Последствия:** Невозможность выполнять обязательства\n• **Причина:** Кассовые разрывы\n• **План защиты:**\n  - Создать буфер на 1-2 месяца\n  - Договориться об отсрочках с поставщиками\n  - Перейти на предоплату от клиентов\n\n**3. \uD83D\uDCC9 РИСК ПОТЕРИ КЛИЕНТОВ - СРЕДНИЙ**\n• **Вероятность:** СРЕДНЯЯ\n• **Последствия:** Снижение доходов на 20-40%\n• **Причина:** Невозможность обслуживать на прежнем уровне\n• **План защиты:**\n  - Коммуницировать с ключевыми клиентами\n  - Обеспечить качество несмотря на трудности\n  - Предложить специальные условия"):o<6?"**1. ⚠️ РИСК КАССОВОГО РАЗРЫВА - ВЫСОКИЙ**\n• **Вероятность:** СРЕДНЯЯ\n• **Последствия:** Временная неплатежеспособность\n• **Причина:** Низкий runway (".concat(o," мес)\n• **План защиты:**\n  - Привлечь финансирование в течение месяца\n  - Создать резервный фонд на 3-6 месяцев\n  - Улучшить управление денежными потоками\n\n**2. \uD83D\uDCB0 РИСК НЕХВАТКИ ЛИКВИДНОСТИ - СРЕДНИЙ**\n• **Вероятность:** НИЗКАЯ-СРЕДНЯЯ\n• **Последствия:** Проблемы с текущими платежами\n• **Причина:** Недостаточный запас прочности\n• **План защиты:**\n  - Оптимизировать расходы на 20-30%\n  - Ускорить оборачиваемость дебиторки\n  - Договориться об отсрочках"):"**1. ✅ КРИТИЧЕСКИЕ РИСКИ - НИЗКИЕ**\n• Стабильное финансовое положение\n• Достаточный runway (".concat(o," мес)\n• Хорошая ликвидность (").concat(m.toFixed(2),"x)\n• Низкая вероятность кассовых разрывов"),"\n\n**⚠️ ОПЕРАЦИОННЫЕ РИСКИ:**\n\n").concat(d>70?"**1. \uD83D\uDD34 ВЫСОКАЯ ВОЛАТИЛЬНОСТЬ ДОХОДОВ**\n• **Оценка:** ВЫСОКИЙ РИСК\n• **Проблема:** Нестабильные поступления\n• **Влияние:** Сложно планировать, высокий стресс\n• **Решение:**\n  - Диверсифицировать источники дохода\n  - Создать подушку безопасности\n  - Перейти на модель подписки/абонементов\n\n**2. \uD83D\uDCCA РИСК КОНЦЕНТРАЦИИ**\n• **Оценка:** ВЫСОКИЙ РИСК\n• **Проблема:** Зависимость от 1-2 клиентов/продуктов\n• **Влияние:** Потеря ключевого клиента = катастрофа\n• **Решение:**\n  - Развивать новые продукты/услуги\n  - Расширять клиентскую базу\n  - Создавать долгосрочные контракты\n\n**3. \uD83C\uDFAF ОПЕРАЦИОННЫЕ ПРОБЛЕМЫ**\n• **Оценка:** СРЕДНИЙ РИСК\n• **Проблема:** Неэффективные процессы\n• **Влияние:** Высокие издержки, низкая маржа\n• **Решение:**\n  - Автоматизировать ключевые процессы\n  - Оптимизировать операции\n  - Внедрить систему контроля":d>40?"**1. \uD83D\uDFE1 СРЕДНИЕ ОПЕРАЦИОННЫЕ РИСКИ**\n• Есть области для улучшения\n• Процессы работают, но не оптимально\n• Возможна оптимизация на 15-25%\n• **Решение:**\n  - Провести аудит процессов\n  - Автоматизировать рутинные задачи\n  - Внедрить KPI и мониторинг":"**1. \uD83D\uDFE2 НИЗКИЕ ОПЕРАЦИОННЫЕ РИСКИ**\n• Стабильные процессы\n• Хорошая операционная эффективность\n• Низкая вероятность сбоев\n• **Рекомендация:**\n  - Поддерживать текущий уровень\n  - Периодически пересматривать\n  - Готовиться к масштабированию","\n\n**\uD83D\uDCC8 РЫНОЧНЫЕ РИСКИ:**\n\n• **Конкуренция:** ").concat(d>50?"ВЫСОКАЯ - требует дифференциации":"СРЕДНЯЯ - управляемая","\n• **Изменения в отрасли:** ").concat((null==l?void 0:null===(s=l.characteristics)||void 0===s?void 0:s.seasonality)?"Сезонные колебания":"Стандартные для отрасли","\n• **Регуляторные риски:** ").concat("не определена"!==x?'Специфичны для "'.concat(x,'"'):"Требуют анализа","\n• **Технологические изменения:** Средний уровень\n\n**\uD83C\uDFAF КОМПЛЕКСНЫЙ ПЛАН ЗАЩИТЫ:**\n\n").concat(o<3?"**\uD83D\uDEA8 НЕМЕДЛЕННО (в течение недели):**\n1. Найти экстренное финансирование - ".concat((6*i).toLocaleString()," ₽\n2. Сократить все необязательные расходы (цель: -50%)\n3. Ускорить сбор дебиторки (цель: собрать 100%)\n4. Рассмотреть продажу неликвидных активов\n5. Обратиться к финансовому консультанту\n\n**⚡ КРАТКОСРОЧНО (1-2 месяца):**\n• Диверсифицировать источники дохода\n• Улучшить управление денежными потоками\n• Найти стратегических партнеров\n• Пересмотреть бизнес-модель\n\n**\uD83C\uDFAF СРЕДНЕСРОЧНО (3-6 месяцев):**\n• Стабилизировать финансовое положение\n• Создать резервный фонд\n• Внедрить систему управления рисками\n• Подготовиться к росту"):o<6?"**⚠️ ВАЖНО (в течение месяца):**\n1. Привлечь дополнительное финансирование\n2. Создать резервный фонд на 6 месяцев\n3. Диверсифицировать клиентскую базу\n4. Улучшить операционные процессы\n5. Внедрить систему раннего предупреждения\n\n**\uD83C\uDFAF СРЕДНЕСРОЧНО (3-6 месяцев):**\n• Развивать новые продукты/услуги\n• Автоматизировать процессы\n• Создать систему мониторинга рисков\n• Подготовиться к масштабированию\n\n**\uD83C\uDFC6 ДОЛГОСРОЧНО (6+ месяцев):**\n• Стать лидером в нише\n• Создать устойчивую бизнес-модель\n• Диверсифицировать бизнес\n• Подготовиться к привлечению инвестиций":"**✅ ПРОАКТИВНЫЕ МЕРЫ:**\n1. Поддерживать текущий уровень управления\n2. Периодически пересматривать риски (раз в квартал)\n3. Готовиться к возможным изменениям\n4. Инвестировать в развитие\n5. Создать систему мониторинга\n\n**\uD83D\uDE80 СТРАТЕГИЧЕСКИЕ (6+ месяцев):**\n• Масштабировать бизнес\n• Выйти на новые рынки\n• Создать конкурентные преимущества\n• Стать эталоном в отрасли","\n\n**\uD83D\uDCCA ОЖИДАЕМЫЙ ЭФФЕКТ:**\n").concat(o<6?"• Снижение интегрального риска с ".concat(d,"% до ").concat(Math.max(20,d-30),"%\n• Увеличение runway до 12+ месяцев\n• Создание запаса прочности\n• Стабилизация бизнеса"):"• Поддержание низкого уровня рисков\n• Создание конкурентных преимуществ\n• Подготовка к масштабированию\n• Устойчивый рост"),timestamp:a,actions:[{id:"risks",label:"Детальные риски",action:"risks",icon:"\uD83D\uDEE1️"},{id:"recommendations",label:"План защиты",action:"recommendations",icon:"\uD83D\uDCA1"},{id:"scenarios",label:"Стресс-тесты",action:"scenarios",icon:"\uD83C\uDFB2"}]}}if("recommendations"===i){if(!y)return{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDCA1 **Отлично! Я готов дать персональные рекомендации!**\n\nЯ создам детальный план действий на основе глубокого анализа:\n\n**\uD83C\uDFAF Что будет в плане:**\n• **Немедленные действия** - что делать в течение недели\n• **Краткосрочные меры** - план на 1-3 месяца\n• **Среднесрочная стратегия** - развитие на 3-6 месяцев\n• **Долгосрочное видение** - цели на 6+ месяцев\n• **Приоритизация** - что делать в первую очередь\n• **Ожидаемые результаты** - конкретные метрики\n\n**\uD83D\uDE80 Загрузите данные, и я создам персональный план!**",timestamp:a,actions:[{id:"demo",label:"Демо-данные",action:"demo",icon:"\uD83D\uDCCA"}]};let e=o<3?"КРИТИЧЕСКАЯ":o<6?"ВЫСОКАЯ":"НИЗКАЯ",t=o<3?"\uD83D\uDEA8":o<6?"⚠️":"✅",s=Math.abs(r);return{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDCA1 **ПЕРСОНАЛЬНЫЕ РЕКОМЕНДАЦИИ И ПЛАН ДЕЙСТВИЙ**\n\n**\uD83C\uDFAF АНАЛИЗ ВАШЕЙ СИТУАЦИИ:**\n\n• **Срочность:** ".concat(e," ").concat(t,"\n• **Приоритет рисков:** ").concat(d>70?"ВЫСОКИЙ \uD83D\uDD34":d>40?"СРЕДНИЙ \uD83D\uDFE1":"НИЗКИЙ \uD83D\uDFE2","\n• **Отрасль:** ").concat(x,"\n• **Runway:** ").concat(o," месяцев\n• **Денежный поток:** ").concat(r.toLocaleString()," ₽/мес\n\n**\uD83D\uDCBC КОНТЕКСТ:**\n").concat(o<3?"Ваш бизнес находится в критической ситуации. У вас осталось менее ".concat(o," месяцев денег. Это требует немедленных радикальных действий. Фокус должен быть на выживании и стабилизации."):o<6?"Ваш бизнес требует внимания. Runway в ".concat(o," месяцев недостаточен для спокойного развития. Необходимы меры по оптимизации и привлечению финансирования в ближайший месяц."):"Ваш бизнес в стабильном положении с runway ".concat(o," месяцев. Это хорошая база для развития и масштабирования. Фокус должен быть на росте и оптимизации."),"\n\n**\uD83D\uDEA8 НЕМЕДЛЕННЫЕ ДЕЙСТВИЯ (в течение недели):**\n\n").concat(o<3?"**КРИТИЧЕСКИЙ РЕЖИМ - РЕЖИМ ВЫЖИВАНИЯ:**\n\n1. **\uD83D\uDCB0 ЭКСТРЕННОЕ ФИНАНСИРОВАНИЕ (приоритет #1)**\n   • Цель: Найти ".concat((6*s).toLocaleString()," ₽ в течение 7 дней\n   • Действия:\n     - Обратиться к текущим инвесторам/партнерам\n     - Рассмотреть кредитные линии (даже под высокий %)\n     - Найти стратегического инвестора\n     - Рассмотреть краудфандинг\n   • Ожидаемый результат: +6 месяцев runway\n\n2. **✂️ РАДИКАЛЬНОЕ СОКРАЩЕНИЕ РАСХОДОВ (приоритет #2)**\n   • Цель: Сократить расходы на 40-60%\n   • Действия:\n     - Заморозить все необязательные расходы\n     - Пересмотреть все контракты\n     - Оптимизировать команду (сложно, но необходимо)\n     - Перейти на удаленку, отказаться от офиса\n   • Ожидаемый результат: Экономия ").concat((.5*s).toLocaleString()," ₽/мес\n\n3. **\uD83D\uDCC8 УСКОРЕНИЕ ПОСТУПЛЕНИЙ (приоритет #3)**\n   • Цель: Собрать всю дебиторку + увеличить продажи\n   • Действия:\n     - Собрать ВСЮ дебиторку (скидки за быструю оплату)\n     - Перейти на 100% предоплату\n     - Фокус на самых прибыльных продуктах\n     - Агрессивные продажи со скидками\n   • Ожидаемый результат: +").concat((2*s).toLocaleString()," ₽ единоразово\n\n4. **\uD83C\uDFEA ПРОДАЖА АКТИВОВ (приоритет #4)**\n   • Цель: Получить дополнительную ликвидность\n   • Действия:\n     - Продать неликвидные активы\n     - Рассмотреть sale-leaseback\n     - Монетизировать все возможное\n   • Ожидаемый результат: +").concat((1*s).toLocaleString()," ₽\n\n5. **\uD83E\uDD1D ПЕРЕГОВОРЫ С КРЕДИТОРАМИ**\n   • Цель: Получить отсрочки\n   • Действия:\n     - Договориться с поставщиками об отсрочке\n     - Реструктурировать кредиты\n     - Быть честным о ситуации\n   • Ожидаемый результат: +1-2 месяца runway"):o<6?"**РЕЖИМ ОПТИМИЗАЦИИ:**\n\n1. **\uD83D\uDCB0 ПРИВЛЕЧЕНИЕ ФИНАНСИРОВАНИЯ (приоритет #1)**\n   • Цель: Привлечь ".concat((6*s).toLocaleString()," ₽ в течение 2 недель\n   • Действия:\n     - Подготовить презентацию для инвесторов\n     - Рассмотреть кредитные линии\n     - Найти стратегических партнеров\n     - Подать заявки на гранты\n   • Ожидаемый результат: +6-12 месяцев runway\n\n2. **✂️ ОПТИМИЗАЦИЯ РАСХОДОВ (приоритет #2)**\n   • Цель: Сократить расходы на 20-30% без потери качества\n   • Действия:\n     - Аудит всех расходов\n     - Пересмотреть контракты с поставщиками\n     - Автоматизировать рутинные задачи\n     - Оптимизировать маркетинг (ROI фокус)\n   • Ожидаемый результат: Экономия ").concat((.25*s).toLocaleString()," ₽/мес\n\n3. **\uD83D\uDCC8 УЛУЧШЕНИЕ CASH FLOW (приоритет #3)**\n   • Цель: Ускорить оборачиваемость денег\n   • Действия:\n     - Сократить сроки оплаты (скидки за предоплату)\n     - Договориться об отсрочках с поставщиками\n     - Оптимизировать запасы\n     - Внедрить факторинг\n   • Ожидаемый результат: +").concat((.3*s).toLocaleString()," ₽/мес\n\n4. **\uD83C\uDFAF ФОКУС НА ПРИБЫЛЬНОСТИ**\n   • Цель: Увеличить маржу на 10-15%\n   • Действия:\n     - Пересмотреть ценообразование (+10-20%)\n     - Фокус на самых прибыльных продуктах\n     - Отказаться от убыточных направлений\n     - Upsell и cross-sell\n   • Ожидаемый результат: +").concat((.15*s).toLocaleString()," ₽/мес"):"**РЕЖИМ РОСТА:**\n\n1. **\uD83D\uDC8E ИНВЕСТИЦИИ В РАЗВИТИЕ (приоритет #1)**\n   • Цель: Увеличить прибыль на 50-100%\n   • Действия:\n     - Инвестировать в маркетинг и продажи\n     - Развивать новые продукты/услуги\n     - Расширять команду\n     - Улучшать продукт\n   • Ожидаемый результат: +".concat((.5*s).toLocaleString()," ₽/мес\n\n2. **\uD83D\uDCCA СОЗДАНИЕ РЕЗЕРВНОГО ФОНДА (приоритет #2)**\n   • Цель: Накопить на 12 месяцев расходов\n   • Действия:\n     - Откладывать 20% прибыли\n     - Создать отдельный счет\n     - Не трогать резерв\n   • Ожидаемый результат: Защита от кризисов\n\n3. **\uD83D\uDE80 МАСШТАБИРОВАНИЕ (приоритет #3)**\n   • Цель: Увеличить бизнес в 2-3 раза\n   • Действия:\n     - Выйти на новые рынки\n     - Автоматизировать процессы\n     - Создать систему масштабирования\n     - Привлечь инвестиции для роста\n   • Ожидаемый результат: 2-3x рост\n\n4. **\uD83C\uDFAF ОПТИМИЗАЦИЯ ЭФФЕКТИВНОСТИ**\n   • Цель: Увеличить эффективность на 20-30%\n   • Действия:\n     - Внедрить AI и автоматизацию\n     - Оптимизировать процессы\n     - Обучить команду\n     - Внедрить лучшие практики\n   • Ожидаемый результат: +20-30% маржа"),"\n\n**⚡ КРАТКОСРОЧНЫЕ МЕРЫ (1-3 месяца):**\n\n• **Финансы:** ").concat(o<6?"Создать резервный фонд на 6 месяцев (".concat((6*s).toLocaleString()," ₽)"):"Увеличить резервный фонд до 12 месяцев","\n• **Операции:** Автоматизировать ключевые процессы (экономия 20-30% времени)\n• **Аналитика:** Внедрить еженедельный мониторинг KPI\n• **Команда:** ").concat(o<6?"Оптимизировать под текущие задачи":"Расширить на ключевых позициях","\n• **Продажи:** ").concat(o<6?"Увеличить на 30-50%":"Развивать новые каналы","\n• **Маркетинг:** ").concat(o<6?"Фокус на ROI":"Масштабировать успешные каналы","\n\n**\uD83C\uDFAF СРЕДНЕСРОЧНАЯ СТРАТЕГИЯ (3-6 месяцев):**\n\n• **Развитие:** ").concat(o<6?"Стабилизировать финансовое положение":"Подготовиться к масштабированию","\n• **Продукт:** Разработать новые продукты/услуги\n• **Рынок:** ").concat(o<6?"Укрепить позиции на текущем рынке":"Выйти на новые рынки","\n• **Технологии:** Внедрить AI и автоматизацию\n• **Команда:** Повысить квалификацию, нанять ключевых специалистов\n• **Партнерства:** Найти стратегических партнеров\n\n**\uD83C\uDFC6 ДОЛГОСРОЧНОЕ ВИДЕНИЕ (6+ месяцев):**\n\n• **Стратегия:** ").concat(o<6?"Восстановить стабильность и начать рост":"Стать лидером в отрасли","\n• **Финансы:** ").concat(o<6?"Привлечь стратегических инвесторов":"Рассмотреть IPO или продажу","\n• **Масштаб:** ").concat(o<6?"Восстановить рост":"Выйти на международные рынки","\n• **Миссия:** ").concat(o<6?"Вернуться к устойчивому росту":"Стать эталоном в отрасли","\n• **Команда:** Создать сильную команду топ-менеджеров\n• **Культура:** Построить масштабируемую корпоративную культуру\n\n**\uD83D\uDCCA ОЖИДАЕМЫЕ РЕЗУЛЬТАТЫ:**\n\n").concat(o<6?"**Через 1 месяц:**\n• Runway: ".concat(o+3," месяцев (+3 мес)\n• Расходы: -").concat((.25*s).toLocaleString()," ₽/мес (-25%)\n• Риск: ").concat(Math.max(20,d-15),"% (-15%)\n\n**Через 3 месяца:**\n• Runway: 9-12 месяцев\n• Денежный поток: положительный\n• Риск: <30% (средний)\n• Стабилизация бизнеса\n\n**Через 6 месяцев:**\n• Runway: 12+ месяцев\n• Рост: +20-30%\n• Риск: <20% (низкий)\n• Устойчивый рост"):"**Через 1 месяц:**\n• Резервный фонд: +".concat((2*s).toLocaleString()," ₽\n• Рост: +10-15%\n• Эффективность: +15%\n\n**Через 3 месяца:**\n• Резервный фонд: 6 месяцев\n• Рост: +30-50%\n• Новые продукты: 2-3\n\n**Через 6 месяцев:**\n• Резервный фонд: 12 месяцев\n• Рост: 2x\n• Новые рынки: 1-2\n• Лидерство в нише"),"\n\n**\uD83C\uDFAF ПРИОРИТИЗАЦИЯ (что делать в первую очередь):**\n\n1. ").concat(o<3?"\uD83D\uDEA8 Экстренное финансирование":o<6?"\uD83D\uDCB0 Привлечение финансирования":"\uD83D\uDC8E Инвестиции в развитие","\n2. ").concat(o<6?"✂️ Сокращение/оптимизация расходов":"\uD83D\uDCCA Создание резервного фонда","\n3. ").concat(o<6?"\uD83D\uDCC8 Ускорение поступлений":"\uD83D\uDE80 Масштабирование","\n4. ").concat(o<6?"\uD83E\uDD1D Переговоры с кредиторами":"\uD83C\uDFAF Оптимизация эффективности","\n5. ").concat(o<6?"\uD83C\uDFAF Фокус на прибыльности":"\uD83C\uDF0D Выход на новые рынки","\n\n**\uD83D\uDCAC Нужна помощь с реализацией какого-то пункта?**"),timestamp:a,actions:[{id:"recommendations",label:"Детальный план",action:"recommendations",icon:"\uD83D\uDCA1"},{id:"financing",label:"Где взять деньги?",action:"financing",icon:"\uD83D\uDCB0"},{id:"forecast",label:"Прогноз результатов",action:"forecast",icon:"\uD83D\uDCCA"}]}}if("analysis"===i){if(!y)return{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDD0D **Отлично! Я готов провести полный анализ!**\n\nКомплексный анализ - это глубокое погружение во все аспекты вашего бизнеса:\n\n**\uD83C\uDFAF Что будет в анализе:**\n• **Финансовое здоровье** - общее состояние бизнеса\n• **Денежные потоки** - структура, тренды, прогнозы\n• **Риски и угрозы** - все риски с планом защиты\n• **Возможности роста** - куда и как развиваться\n• **Конкурентная позиция** - ваше место на рынке\n• **Персональные рекомендации** - детальный план действий\n\n**\uD83D\uDE80 Загрузите данные, и я проведу глубокий анализ!**",timestamp:a,actions:[{id:"demo",label:"Демо-данные",action:"demo",icon:"\uD83D\uDCCA"}]};let e=o<3?"КРИТИЧЕСКОЕ":o<6?"ТРЕБУЕТ ВНИМАНИЯ":"СТАБИЛЬНОЕ",t=o<3?"\uD83D\uDEA8":o<6?"⚠️":"✅",s=o<6?"ОГРАНИЧЕННЫЙ":"ВЫСОКИЙ";return{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDD0D **КОМПЛЕКСНЫЙ АНАЛИЗ БИЗНЕСА**\n\n**\uD83D\uDCCA ОБЩЕЕ СОСТОЯНИЕ: ".concat(e," ").concat(t,"**\n\n**Интегральная оценка:**\n• **Финансовое здоровье:** ").concat(e," ").concat(t,"\n• **Уровень риска:** ").concat(d,"% ").concat(d>70?"\uD83D\uDD34 ВЫСОКИЙ":d>40?"\uD83D\uDFE1 СРЕДНИЙ":"\uD83D\uDFE2 НИЗКИЙ","\n• **Потенциал роста:** ").concat(s," ").concat(o<6?"⚠️":"\uD83D\uDE80","\n• **Операционная эффективность:** ").concat(d<40?"ВЫСОКАЯ ✅":d<70?"СРЕДНЯЯ \uD83D\uDFE1":"НИЗКАЯ \uD83D\uDD34","\n• **Отрасль:** ").concat(x,"\n\n**\uD83D\uDCB0 ФИНАНСОВЫЕ ПОКАЗАТЕЛИ:**\n\n**Ключевые метрики:**\n• **Денежный поток:** ").concat(r.toLocaleString()," ₽/мес ").concat(r>0?"✅ Положительный":"⚠️ Отрицательный","\n• **Runway:** ").concat(o," месяцев ").concat(o<3?"\uD83D\uDEA8 КРИТИЧНО":o<6?"⚠️ НИЗКИЙ":"✅ ХОРОШО","\n• **Ликвидность:** ").concat(m.toFixed(2),"x ").concat(m>2?"✅ Отличная":m>1?"⚠️ Нормальная":"\uD83D\uDEA8 Низкая","\n• **Burn rate:** ").concat(Math.abs(r).toLocaleString()," ₽/мес\n• **Дней до нуля:** ~").concat(30*o," дней\n\n**Финансовая структура:**\n• Операционные расходы: ~").concat((.7*Math.abs(r)).toLocaleString()," ₽/мес\n• Постоянные расходы: ~").concat((.5*Math.abs(r)).toLocaleString()," ₽/мес\n• Переменные расходы: ~").concat((.2*Math.abs(r)).toLocaleString()," ₽/мес\n\n**\uD83C\uDFAF КЛЮЧЕВЫЕ ИНСАЙТЫ:**\n\n").concat(o<3?"**\uD83D\uDEA8 КРИТИЧЕСКАЯ СИТУАЦИЯ**\n\nВаш бизнес находится в критическом состоянии:\n• Осталось менее ".concat(o," месяцев денег (≈").concat(30*o," дней)\n• Высокий риск банкротства без срочных мер\n• Нет запаса для непредвиденных расходов\n• Невозможность инвестировать в развитие\n• Высокий финансовый стресс\n\n**Это требует НЕМЕДЛЕННЫХ радикальных действий!**\n\nБез изменений бизнес прекратит существование через ").concat(o," месяцев."):o<6?"**⚠️ ТРЕБУЕТ ВНИМАНИЯ**\n\nВаш бизнес требует оптимизации:\n• Runway ".concat(o," месяцев недостаточен для спокойного развития\n• Риск кассовых разрывов при непредвиденных расходах\n• Ограниченные возможности для инвестиций в рост\n• Необходимость постоянного мониторинга финансов\n• Средний уровень финансового стресса\n\n**Нужны меры по оптимизации в ближайший месяц.**\n\nПри текущих темпах деньги закончатся через ").concat(o," месяцев."):"**✅ СТАБИЛЬНОЕ ПОЛОЖЕНИЕ**\n\nВаш бизнес в хорошем состоянии:\n• Runway ".concat(o," месяцев обеспечивает запас прочности\n• Низкий риск кассовых разрывов\n• Возможность инвестировать в развитие\n• Время для стратегического планирования\n• Низкий финансовый стресс\n\n**Отличная база для роста и масштабирования!**\n\nУ вас есть ").concat(o," месяцев для развития."),"\n\n**\uD83D\uDCC8 ОПЕРАЦИОННАЯ ЭФФЕКТИВНОСТЬ:**\n\n• **Процессы:** ").concat(d<40?"Стабильные и эффективные ✅":d<70?"Работают, но есть области для улучшения \uD83D\uDFE1":"Требуют оптимизации \uD83D\uDD34","\n• **Автоматизация:** ").concat(d<40?"Высокая":d<70?"Средняя":"Низкая","\n• **Маржинальность:** ").concat(r>0?"Положительная":"Требует улучшения","\n• **Масштабируемость:** ").concat(o>6?"Готов к масштабированию":"Требует стабилизации","\n\n**\uD83D\uDEE1️ АНАЛИЗ РИСКОВ:**\n\n• **Критические риски:** ").concat(o<3?"\uD83D\uDEA8 ОЧЕНЬ ВЫСОКИЕ":o<6?"⚠️ ВЫСОКИЕ":"✅ НИЗКИЕ","\n• **Операционные риски:** ").concat(d>70?"\uD83D\uDD34 ВЫСОКИЕ":d>40?"\uD83D\uDFE1 СРЕДНИЕ":"\uD83D\uDFE2 НИЗКИЕ","\n• **Рыночные риски:** ").concat((null==l?void 0:null===(n=l.characteristics)||void 0===n?void 0:n.seasonality)?"Сезонные колебания":"Стандартные","\n• **Финансовые риски:** ").concat(m<1?"\uD83D\uDEA8 КРИТИЧЕСКИЕ":m<2?"⚠️ ВЫСОКИЕ":"✅ НИЗКИЕ","\n\n**\uD83D\uDE80 ВОЗМОЖНОСТИ РОСТА:**\n\n").concat(o<6?"**Краткосрочные (1-3 месяца):**\n• Стабилизировать финансовое положение\n• Оптимизировать расходы на 20-30%\n• Увеличить продажи на 30-50%\n\n**Среднесрочные (3-6 месяцев):**\n• Восстановить рост и прибыльность\n• Создать резервный фонд на 6 месяцев\n• Диверсифицировать источники дохода\n\n**Долгосрочные (6+ месяцев):**\n• Вернуться к устойчивому развитию\n• Подготовиться к масштабированию\n• Стать устойчивым игроком на рынке":"**Краткосрочные (1-3 месяца):**\n• Оптимизировать процессы (+20-30% эффективности)\n• Увеличить маржу на 10-15%\n• Развивать новые продукты/услуги\n\n**Среднесрочные (3-6 месяцев):**\n• Выйти на новые рынки\n• Масштабировать успешные направления\n• Автоматизировать операции\n\n**Долгосрочные (6+ месяцев):**\n• Стать лидером в нише\n• Выйти на международные рынки\n• Подготовиться к привлечению инвестиций","\n\n**\uD83D\uDCA1 СТРАТЕГИЧЕСКИЕ ПРИОРИТЕТЫ:**\n\n1. **").concat(o<6?"\uD83D\uDEA8 Финансовая стабилизация":"\uD83D\uDE80 Развитие и рост","**\n   ").concat(o<6?"Привлечь финансирование, оптимизировать расходы":"Инвестировать в развитие, масштабировать","\n\n2. **").concat(d>40?"\uD83D\uDEE1️ Снижение рисков":"\uD83D\uDCC8 Увеличение эффективности","**\n   ").concat(d>40?"Диверсификация, создание резервов":"Оптимизация процессов, автоматизация","\n\n3. **\uD83C\uDFAF Оптимизация операций**\n   Улучшить процессы, автоматизировать, повысить маржу\n\n4. **\uD83D\uDCA1 Инновации и развитие**\n   Новые продукты, рынки, технологии\n\n**\uD83D\uDCCA ПРОГНОЗ И СЦЕНАРИИ:**\n\n**Базовый сценарий (без изменений):**\n• Через 3 месяца: ").concat(o<6?"Ухудшение ситуации":"Стабильный рост","\n• Через 6 месяцев: ").concat(o<6?"Критическая ситуация":"Устойчивый рост","\n• Через 12 месяцев: ").concat(o<6?"⚠️ Высокий риск банкротства":"✅ Масштабирование","\n\n**Оптимистичный сценарий (с рекомендациями):**\n• Через 3 месяца: ").concat(o<6?"Стабилизация":"Ускоренный рост (+30%)","\n• Через 6 месяцев: ").concat(o<6?"Восстановление роста":"Масштабирование (2x)","\n• Через 12 месяцев: ").concat(o<6?"✅ Устойчивый рост":"\uD83D\uDE80 Лидерство в нише (3x)","\n\n**\uD83C\uDFAF СЛЕДУЮЩИЕ ШАГИ:**\n\n1. ").concat(o<6?"Привлечь финансирование":"Создать резервный фонд","\n2. ").concat(d>40?"Снизить риски":"Оптимизировать процессы","\n3. ").concat(o<6?"Оптимизировать расходы":"Инвестировать в развитие","\n4. Развивать новые возможности\n5. ").concat(o<6?"Стабилизировать бизнес":"Масштабировать бизнес","\n\n**\uD83D\uDCAC Хотите детальный анализ какого-то аспекта?**"),timestamp:a,actions:[{id:"forecast",label:"Прогноз ДДС",action:"forecast",icon:"\uD83D\uDCCA"},{id:"risks",label:"Детальные риски",action:"risks",icon:"\uD83D\uDEE1️"},{id:"recommendations",label:"План действий",action:"recommendations",icon:"\uD83D\uDCA1"}]}}return(console.log("ℹ️ Using general response"),y)?{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83E\uDD16 **Я готов помочь с анализом!**\n\n**\uD83D\uDCCA Ваше текущее состояние:**\n• Денежный поток: ".concat(r.toLocaleString()," ₽ ").concat(r>0?"✅":"⚠️","\n• Runway: ").concat(o," мес ").concat(o<3?"\uD83D\uDEA8":o<6?"⚠️":"✅","\n• Риск: ").concat(d,"% ").concat(d>70?"\uD83D\uDD34":d>40?"\uD83D\uDFE1":"\uD83D\uDFE2",'\n\n**\uD83D\uDCAC О чем хотите узнать?**\n• "Покажи прогноз" - детальный анализ денежных потоков\n• "Какие риски?" - комплексная оценка рисков\n• "Что посоветуешь?" - персональные рекомендации\n• "Полный анализ" - глубокий анализ всего бизнеса\n\nЗадайте конкретный вопрос, и я дам развернутый ответ!'),timestamp:a,actions:[{id:"forecast",label:"Прогноз",action:"forecast",icon:"\uD83D\uDCCA"},{id:"risks",label:"Риски",action:"risks",icon:"\uD83D\uDEE1️"},{id:"recommendations",label:"Советы",action:"recommendations",icon:"\uD83D\uDCA1"}]}:{id:"ai-".concat(Date.now()),role:"assistant",content:'\uD83E\uDD16 **Привет! Я ваш AI-ассистент CFO!**\n\nЯ помогу разобраться с финансами и дам персональные рекомендации.\n\n**\uD83C\uDFAF Что я умею:**\n• \uD83D\uDCCA Анализировать денежные потоки и строить прогнозы\n• \uD83D\uDEE1️ Оценивать риски и предлагать защиту\n• \uD83D\uDCA1 Давать конкретные рекомендации\n• \uD83D\uDE80 Помогать с развитием бизнеса\n\n**\uD83D\uDCAC Попробуйте спросить:**\n• "Как дела с деньгами?"\n• "Какие риски?"\n• "Что посоветуешь?"\n• "Полный анализ"\n\nДля начала загрузите данные или используйте демо-данные.',timestamp:a,actions:[{id:"demo",label:"Демо-данные",action:"demo",icon:"\uD83D\uDCCA"}]}},handleQuickAction=e=>{i({id:"ai-".concat(Date.now()),role:"assistant",content:"Анализирую...",timestamp:new Date().toISOString()}),setTimeout(()=>{let t=generateQuickActionResponse(e);i(t)},1e3)},generateQuickActionResponse=e=>{let t=new Date().toISOString(),s=(null==c?void 0:c.cashFlow)||0,n=(null==c?void 0:c.runway)||0,a=(null==c?void 0:c.riskScore)||0;null==c||c.liquidityRatio;let i=Math.abs(s);if(console.log("\uD83C\uDFAF Quick Action:",e),"demo"===e)return{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDCCA **Загружаю демо-данные для розничной торговли...**\n\n**Что включено:**\n• \uD83D\uDCC8 Банковские выписки за 3 месяца\n• \uD83D\uDCB0 Дебиторская и кредиторская задолженность\n• \uD83C\uDFE6 Кредиты и займы\n• \uD83D\uDD2E Прогнозы денежных потоков\n• \uD83C\uDFAF Типичные сценарии для отрасли\n• \uD83D\uDCA1 Варианты финансирования\n\n**Демо-данные загружены!** Теперь я могу провести полный анализ.\n\n**\uD83D\uDCAC Что хотите узнать первым делом?**",timestamp:t,actions:[{id:"analysis",label:"Полный анализ",action:"analysis",icon:"\uD83D\uDD0D"},{id:"forecast",label:"Прогноз",action:"forecast",icon:"\uD83D\uDCCA"}]};if("forecast"===e){var r;return y?{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDCCA **ДЕТАЛЬНЫЙ ПРОГНОЗ ДЕНЕЖНЫХ ПОТОКОВ**\n\n**\uD83D\uDCC8 ПРОГНОЗ НА БЛИЖАЙШИЕ 12 МЕСЯЦЕВ:**\n\n**Месяц 1-3 (ближайший квартал):**\n• Ожидаемый cash flow: ".concat((3*s).toLocaleString()," ₽\n• Тренд: ").concat(s>0?"Положительный рост \uD83D\uDCC8":"Требует оптимизации \uD83D\uDCC9","\n• Критические точки: ").concat(n<3?"ВЫСОКИЙ РИСК кассовых разрывов":n<6?"Возможны напряженные моменты":"Не прогнозируется","\n• Рекомендации: ").concat(n<6?"Привлечь финансирование СРОЧНО":"Создать резервный фонд","\n\n**Месяц 4-6 (второй квартал):**\n• Прогноз: ").concat(n<6?"Критическое снижение":"Стабильный рост","\n• Накопленный эффект: ").concat((6*s).toLocaleString()," ₽\n• Риски: ").concat(n<6?"Высокие - требуется вмешательство":"Средние - мониторинг","\n\n**Месяц 7-12 (вторая половина года):**\n• Долгосрочный тренд: ").concat(n<6?"Требует стабилизации":"Устойчивый рост","\n• Годовой прогноз: ").concat((12*s).toLocaleString()," ₽\n• Вероятность достижения: ").concat(n<6?"60% (с мерами)":"85% (при текущих темпах)","\n\n**\uD83C\uDFAF СЦЕНАРИИ РАЗВИТИЯ:**\n\n**Пессимистичный (-20% от прогноза):**\n• Годовой результат: ").concat((12*s*.8).toLocaleString()," ₽\n• Runway к концу года: ").concat(Math.max(0,n-3)," мес\n• Вероятность: 25%\n\n**Базовый (текущий тренд):**\n• Годовой результат: ").concat((12*s).toLocaleString()," ₽\n• Runway к концу года: ").concat(n," мес\n• Вероятность: 50%\n\n**Оптимистичный (+30% от прогноза):**\n• Годовой результат: ").concat((12*s*1.3).toLocaleString()," ₽\n• Runway к концу года: ").concat(n+6," мес\n• Вероятность: 25%\n\n**\uD83D\uDCA1 ЧТО ВЛИЯЕТ НА ПРОГНОЗ:**\n• Сезонность: ").concat((null==l?void 0:null===(r=l.characteristics)||void 0===r?void 0:r.seasonality)?"Высокая - учтена в прогнозе":"Низкая","\n• Рыночные условия: Стандартные для отрасли\n• Внутренние факторы: ").concat(a>50?"Требуют улучшения":"Стабильные","\n\n**\uD83D\uDCCA Хотите увидеть прогноз по неделям?**"),timestamp:t,actions:[{id:"recommendations",label:"Как улучшить прогноз?",action:"recommendations",icon:"\uD83D\uDCA1"},{id:"scenarios",label:"Стресс-тесты",action:"scenarios",icon:"\uD83C\uDFB2"}]}:{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDCCA **Для прогноза нужны данные.**\n\nЗагрузите банковские выписки или используйте демо-данные.",timestamp:t,actions:[{id:"demo",label:"Демо-данные",action:"demo",icon:"\uD83D\uDCCA"}]}}return"risks"===e?y?{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDEE1️ **ДЕТАЛЬНАЯ КАРТА РИСКОВ**\n\n**\uD83D\uDCCA МАТРИЦА РИСКОВ:**\n\n**КРИТИЧЕСКИЕ (Вероятность \xd7 Влияние = Высокий приоритет):**\n\n".concat(n<3?"**1. Риск банкротства**\n• Вероятность: 80% \uD83D\uDD34\n• Влияние: КРИТИЧЕСКОЕ\n• Срок реализации: ".concat(n," месяцев\n• Финансовый ущерб: Полная остановка бизнеса\n• **ПЛАН ЗАЩИТЫ:**\n  - День 1-7: Найти экстренное финансирование\n  - День 8-14: Сократить расходы на 50%\n  - День 15-30: Реструктуризация бизнеса\n• Стоимость защиты: ").concat((6*i).toLocaleString()," ₽\n• Эффект: Снижение риска до 20%"):n<6?"**1. Риск кассового разрыва**\n• Вероятность: 50% \uD83D\uDFE1\n• Влияние: ВЫСОКОЕ\n• Срок реализации: ".concat(n," месяцев\n• Финансовый ущерб: ").concat((2*i).toLocaleString()," ₽\n• **ПЛАН ЗАЩИТЫ:**\n  - Неделя 1-2: Привлечь кредитную линию\n  - Неделя 3-4: Оптимизировать расходы на 25%\n  - Месяц 2-3: Создать резервный фонд\n• Стоимость защиты: ").concat((3*i).toLocaleString()," ₽\n• Эффект: Снижение риска до 15%"):"**1. Операционные риски**\n• Вероятность: 20% \uD83D\uDFE2\n• Влияние: СРЕДНЕЕ\n• Финансовый ущерб: ".concat((.5*i).toLocaleString()," ₽\n• **ПЛАН ЗАЩИТЫ:**\n  - Квартал 1: Автоматизация процессов\n  - Квартал 2: Обучение команды\n  - Квартал 3-4: Внедрение best practices\n• Стоимость защиты: ").concat((1*i).toLocaleString()," ₽\n• Эффект: Повышение эффективности на 25%"),"\n\n**ВЫСОКИЕ (Требуют мониторинга):**\n\n").concat(a>70?"**2. Риск концентрации клиентов**\n• Вероятность: 60% \uD83D\uDFE1\n• Влияние: ВЫСОКОЕ\n• Описание: Зависимость от 1-2 ключевых клиентов\n• Финансовый ущерб: ".concat((3*i).toLocaleString()," ₽\n• **ПЛАН ЗАЩИТЫ:**\n  - Месяц 1: Диверсификация клиентской базы\n  - Месяц 2-3: Развитие новых продуктов\n  - Месяц 4-6: Выход на новые рынки\n• Эффект: Снижение зависимости до 30%\n\n**3. Риск волатильности доходов**\n• Вероятность: 70% \uD83D\uDD34\n• Влияние: СРЕДНЕЕ\n• Описание: Нестабильные поступления\n• **ПЛАН ЗАЩИТЫ:**\n  - Переход на модель подписки/абонементов\n  - Создание предсказуемых источников дохода\n  - Хеджирование сезонности"):a>40?"**2. Рыночные риски**\n• Вероятность: 40% \uD83D\uDFE1\n• Влияние: СРЕДНЕЕ\n• Описание: Изменения в отрасли\n• **ПЛАН ЗАЩИТЫ:**\n  - Мониторинг рынка\n  - Адаптация стратегии\n  - Инновации":"**2. Стратегические риски**\n• Вероятность: 15% \uD83D\uDFE2\n• Влияние: НИЗКОЕ\n• **ПЛАН ЗАЩИТЫ:**\n  - Регулярный пересмотр стратегии\n  - Мониторинг трендов","\n\n**СРЕДНИЕ (Контроль):**\n\n**4. Технологические риски**\n• Вероятность: 30%\n• Влияние: СРЕДНЕЕ\n• Описание: Устаревание технологий\n• **ПЛАН ЗАЩИТЫ:**\n  - Инвестиции в R&D\n  - Мониторинг инноваций\n  - Партнерства с tech-компаниями\n\n**5. Регуляторные риски**\n• Вероятность: 25%\n• Влияние: СРЕДНЕЕ\n• Описание: Изменения законодательства\n• **ПЛАН ЗАЩИТЫ:**\n  - Мониторинг изменений\n  - Юридическое сопровождение\n  - Адаптация процессов\n\n**\uD83D\uDCCA ИНТЕГРАЛЬНАЯ ОЦЕНКА:**\n• Общий уровень риска: ").concat(a,"%\n• Категория: ").concat(a>70?"ВЫСОКИЙ \uD83D\uDD34":a>40?"СРЕДНИЙ \uD83D\uDFE1":"НИЗКИЙ \uD83D\uDFE2","\n• Стоимость защиты: ").concat((i*(n<6?6:3)).toLocaleString()," ₽\n• Ожидаемый эффект: Снижение риска на 40-60%\n\n**\uD83D\uDCB0 ROI УПРАВЛЕНИЯ РИСКАМИ:**\n• Инвестиции в защиту: ").concat((i*(n<6?6:3)).toLocaleString()," ₽\n• Предотвращенный ущерб: ").concat((i*(n<6?12:6)).toLocaleString()," ₽\n• ROI: ").concat(n<6?"200%":"100%","\n\n**\uD83C\uDFAF Приоритетные действия:**\n1. ").concat(n<3?"Экстренное финансирование":n<6?"Привлечение финансирования":"Создание резервного фонда","\n2. ").concat(a>50?"Диверсификация":"Оптимизация процессов","\n3. Внедрение системы мониторинга рисков"),timestamp:t,actions:[{id:"recommendations",label:"План защиты",action:"recommendations",icon:"\uD83D\uDCA1"},{id:"scenarios",label:"Стресс-тесты",action:"scenarios",icon:"\uD83C\uDFB2"}]}:{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDEE1️ **Для анализа рисков нужны данные.**\n\nЗагрузите данные или используйте демо-данные.",timestamp:t,actions:[{id:"demo",label:"Демо-данные",action:"demo",icon:"\uD83D\uDCCA"}]}:"recommendations"===e?y?{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDCA1 **ДЕТАЛЬНЫЙ ПЛАН ДЕЙСТВИЙ**\n\n**\uD83C\uDFAF ROADMAP НА 12 МЕСЯЦЕВ:**\n\n**ФАЗА 1: СТАБИЛИЗАЦИЯ (Месяц 1-3)**\n\n".concat(n<6?"**Цель:** Увеличить runway до 9+ месяцев\n\n**Неделя 1-2:**\n• ✅ Привлечь финансирование: ".concat((6*i).toLocaleString()," ₽\n• ✅ Сократить расходы на ").concat(n<3?"40-50%":"20-30%","\n• ✅ Собрать всю дебиторку\n• ✅ Пересмотреть все контракты\n\n**Неделя 3-4:**\n• ✅ Оптимизировать команду\n• ✅ Автоматизировать рутинные задачи\n• ✅ Фокус на прибыльных продуктах\n• ✅ Увеличить цены на 10-15%\n\n**Месяц 2-3:**\n• ✅ Создать резервный фонд: ").concat((3*i).toLocaleString()," ₽\n• ✅ Внедрить систему мониторинга KPI\n• ✅ Найти новые источники дохода\n• ✅ Улучшить cash flow management\n\n**Ожидаемый результат:**\n• Runway: 9-12 месяцев (+").concat(9-n," мес)\n• Риск: ").concat(Math.max(20,a-20),"% (-").concat(Math.min(20,a-20),"%)\n• Cash flow: положительный"):"**Цель:** Оптимизировать операции и увеличить эффективность\n\n**Месяц 1:**\n• ✅ Аудит всех процессов\n• ✅ Внедрить автоматизацию (экономия 20-30% времени)\n• ✅ Оптимизировать расходы на 15%\n• ✅ Создать резервный фонд: ".concat((3*i).toLocaleString()," ₽\n\n**Месяц 2-3:**\n• ✅ Развивать новые продукты/услуги\n• ✅ Масштабировать успешные направления\n• ✅ Улучшить маркетинг (ROI фокус)\n• ✅ Обучить команду\n\n**Ожидаемый результат:**\n• Эффективность: +25%\n• Маржа: +10-15%\n• Резервный фонд: 6 месяцев"),"\n\n**ФАЗА 2: РОСТ (Месяц 4-6)**\n\n**Цель:** ").concat(n<6?"Восстановить рост и прибыльность":"Увеличить прибыль на 30-50%","\n\n**Месяц 4:**\n• \uD83D\uDE80 ").concat(n<6?"Стабилизировать финансы":"Инвестировать в маркетинг","\n• \uD83D\uDE80 Развивать новые продукты\n• \uD83D\uDE80 Улучшать customer experience\n• \uD83D\uDE80 Оптимизировать воронку продаж\n\n**Месяц 5-6:**\n• \uD83D\uDE80 ").concat(n<6?"Начать рост":"Масштабировать успешные каналы","\n• \uD83D\uDE80 Расширять команду на ключевых позициях\n• \uD83D\uDE80 Внедрить CRM и аналитику\n• \uD83D\uDE80 Автоматизировать маркетинг\n\n**Ожидаемый результат:**\n• Рост: +").concat(n<6?"20-30%":"30-50%","\n• Новые клиенты: +").concat(n<6?"50":"100","\n• Резервный фонд: ").concat(n<6?"6":"9"," месяцев\n\n**ФАЗА 3: МАСШТАБИРОВАНИЕ (Месяц 7-12)**\n\n**Цель:** ").concat(n<6?"Достичь устойчивого роста":"Увеличить бизнес в 2x","\n\n**Месяц 7-9:**\n• \uD83D\uDC8E ").concat(n<6?"Укрепить позиции":"Выйти на новые рынки","\n• \uD83D\uDC8E Развивать партнерскую сеть\n• \uD83D\uDC8E Внедрить AI и автоматизацию\n• \uD83D\uDC8E Создать систему масштабирования\n\n**Месяц 10-12:**\n• \uD83D\uDC8E ").concat(n<6?"Подготовиться к масштабированию":"Масштабировать в 2x","\n• \uD83D\uDC8E Привлечь стратегических инвесторов\n• \uD83D\uDC8E Построить сильную команду\n• \uD83D\uDC8E ").concat(n<6?"Стать устойчивым игроком":"Стать лидером в нише","\n\n**Ожидаемый результат:**\n• Годовой рост: ").concat(n<6?"+50-80%":"+100-150%","\n• Резервный фонд: 12+ месяцев\n• Runway: 18+ месяцев\n• Позиция: ").concat(n<6?"Устойчивый игрок":"Лидер в нише","\n\n**\uD83D\uDCCA КЛЮЧЕВЫЕ МЕТРИКИ (KPI):**\n\n**Финансовые:**\n• Monthly Recurring Revenue: ").concat(n<6?"+30%":"+50%"," к концу года\n• Customer Acquisition Cost: -20%\n• Lifetime Value: +40%\n• Gross Margin: ").concat(n<6?"+10%":"+15%","\n\n**Операционные:**\n• Customer Satisfaction: 90%+\n• Employee Satisfaction: 85%+\n• Process Efficiency: +30%\n• Automation Level: 60%+\n\n**\uD83D\uDCB0 БЮДЖЕТ И ROI:**\n\n**Инвестиции:**\n• Фаза 1: ").concat((i*(n<6?6:3)).toLocaleString()," ₽\n• Фаза 2: ").concat((3*i).toLocaleString()," ₽\n• Фаза 3: ").concat((4*i).toLocaleString()," ₽\n• **ИТОГО:** ").concat((i*(n<6?13:10)).toLocaleString()," ₽\n\n**Ожидаемая отдача:**\n• Год 1: ").concat(n<6?"+50%":"+100%"," роста\n• ROI: ").concat(n<6?"150%":"300%","\n• Payback period: ").concat(n<6?"9":"6"," месяцев\n\n**\uD83C\uDFAF КРИТИЧЕСКИЕ ФАКТОРЫ УСПЕХА:**\n1. ").concat(n<6?"Быстрое привлечение финансирования":"Эффективное масштабирование","\n2. Фокус на прибыльности\n3. Сильная команда\n4. Клиентоориентированность\n5. Постоянные инновации\n\n**\uD83D\uDCAC Готовы начать реализацию?**"),timestamp:t,actions:[{id:"financing",label:"Где взять деньги?",action:"financing",icon:"\uD83D\uDCB0"},{id:"forecast",label:"Прогноз результатов",action:"forecast",icon:"\uD83D\uDCCA"}]}:{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDCA1 **Для рекомендаций нужны данные.**\n\nЗагрузите данные или используйте демо-данные.",timestamp:t,actions:[{id:"demo",label:"Демо-данные",action:"demo",icon:"\uD83D\uDCCA"}]}:"analysis"===e?y?generateSmartResponse("полный анализ"):{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDD0D **Для анализа нужны данные.**\n\nЗагрузите данные или используйте демо-данные.",timestamp:t,actions:[{id:"demo",label:"Демо-данные",action:"demo",icon:"\uD83D\uDCCA"}]}:"financing"===e?y?{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDCB0 **ВАРИАНТЫ ФИНАНСИРОВАНИЯ**\n\n**Вам нужно:** ".concat((i*(n<6?6:3)).toLocaleString()," ₽\n\n**\uD83C\uDFE6 БАНКОВСКИЕ ПРОДУКТЫ:**\n\n**1. Кредитная линия**\n• Сумма: до ").concat((6*i).toLocaleString()," ₽\n• Ставка: 12-18% годовых\n• Срок: 12-36 месяцев\n• Требования: Выручка от ").concat((10*i).toLocaleString()," ₽/год\n• **Плюсы:** Быстрое получение, гибкое использование\n• **Минусы:** Требуется залог, проценты\n• **Рекомендация:** ").concat(n<3?"⭐⭐⭐⭐⭐ СРОЧНО!":n<6?"⭐⭐⭐⭐ Хороший вариант":"⭐⭐⭐ Запасной вариант","\n\n**2. Овердрафт**\n• Сумма: до ").concat((2*i).toLocaleString()," ₽\n• Ставка: 15-22% годовых\n• Срок: До 12 месяцев\n• **Плюсы:** Быстро, без залога\n• **Минусы:** Высокая ставка, малая сумма\n• **Рекомендация:** ").concat(n<3?"⭐⭐⭐⭐ Временное решение":"⭐⭐⭐ Для кассовых разрывов","\n\n**\uD83D\uDCBC ИНВЕСТИЦИИ:**\n\n**3. Бизнес-ангелы**\n• Сумма: ").concat((12*i).toLocaleString()," - ").concat((24*i).toLocaleString()," ₽\n• Доля: 10-25%\n• Срок: 3-5 лет\n• **Плюсы:** Большая сумма, экспертиза, связи\n• **Минусы:** Потеря доли, долго искать\n• **Рекомендация:** ").concat(n<6?"⭐⭐⭐⭐⭐ Отличный вариант":"⭐⭐⭐⭐ Для масштабирования","\n\n**4. Венчурный фонд**\n• Сумма: от ").concat((24*i).toLocaleString()," ₽\n• Доля: 20-40%\n• Срок: 5-7 лет\n• **Плюсы:** Большая сумма, менторство, сеть\n• **Минусы:** Высокие требования, потеря контроля\n• **Рекомендация:** ").concat(n>6?"⭐⭐⭐⭐⭐ Для масштабирования":"⭐⭐⭐ Пока рано","\n\n**\uD83E\uDD1D АЛЬТЕРНАТИВНЫЕ ИСТОЧНИКИ:**\n\n**5. Факторинг**\n• Сумма: До 80% дебиторки\n• Комиссия: 1-3% от суммы\n• Срок: Мгновенно\n• **Плюсы:** Быстро, без залога\n• **Минусы:** Комиссия, нужна дебиторка\n• **Рекомендация:** ").concat(n<3?"⭐⭐⭐⭐⭐ СРОЧНО!":"⭐⭐⭐⭐ Хороший вариант","\n\n**6. Краудфандинг**\n• Сумма: ").concat((6*i).toLocaleString()," - ").concat((12*i).toLocaleString()," ₽\n• Комиссия: 5-10% от суммы\n• Срок: 1-3 месяца кампания\n• **Плюсы:** Маркетинг, сообщество, без долга\n• **Минусы:** Долго, не гарантировано\n• **Рекомендация:** ⭐⭐⭐ Дополнительный вариант\n\n**7. Государственные гранты**\n• Сумма: до ").concat((6*i).toLocaleString()," ₽\n• Ставка: 0% (грант)\n• Срок: 2-6 месяцев на получение\n• **Плюсы:** Бесплатно, не нужно возвращать\n• **Минусы:** Долго, бюрократия, требования\n• **Рекомендация:** ⭐⭐⭐⭐ Подать заявку\n\n**\uD83C\uDFAF ПЕРСОНАЛЬНЫЕ РЕКОМЕНДАЦИИ:**\n\n").concat(n<3?"**КРИТИЧЕСКАЯ СИТУАЦИЯ - действуйте СЕЙЧАС:**\n\n**План на неделю:**\n1. **День 1-2:** Факторинг дебиторки (быстрые деньги)\n2. **День 3-5:** Оформить овердрафт в банке\n3. **День 6-7:** Начать поиск бизнес-ангела\n\n**Цель:** Собрать ".concat((6*i).toLocaleString()," ₽ за 2 недели\n\n**Приоритет:**\n1. ⭐⭐⭐⭐⭐ Факторинг (сегодня)\n2. ⭐⭐⭐⭐⭐ Овердрафт (3 дня)\n3. ⭐⭐⭐⭐⭐ Кредитная линия (неделя)\n4. ⭐⭐⭐⭐ Бизнес-ангел (2 недели)"):n<6?"**ТРЕБУЕТ ВНИМАНИЯ - действуйте в течение месяца:**\n\n**План на месяц:**\n1. **Неделя 1-2:** Оформить кредитную линию\n2. **Неделя 3-4:** Начать поиск инвестора\n\n**Цель:** Привлечь ".concat((6*i).toLocaleString()," ₽ за месяц\n\n**Приоритет:**\n1. ⭐⭐⭐⭐⭐ Кредитная линия (2 недели)\n2. ⭐⭐⭐⭐ Бизнес-ангел (месяц)\n3. ⭐⭐⭐ Гранты (подать заявку)"):"**СТАБИЛЬНАЯ СИТУАЦИЯ - планируйте рост:**\n\n**План на квартал:**\n1. **Месяц 1:** Подготовить pitch deck\n2. **Месяц 2-3:** Поиск стратегического инвестора\n\n**Цель:** Привлечь ".concat((12*i).toLocaleString()," ₽ для масштабирования\n\n**Приоритет:**\n1. ⭐⭐⭐⭐⭐ Венчурный фонд (для роста)\n2. ⭐⭐⭐⭐ Бизнес-ангел (альтернатива)\n3. ⭐⭐⭐ Гранты (дополнительно)"),"\n\n**\uD83D\uDCAC Нужна помощь с оформлением?**"),timestamp:t,actions:[{id:"recommendations",label:"План привлечения",action:"recommendations",icon:"\uD83D\uDCA1"},{id:"forecast",label:"Прогноз с финансированием",action:"forecast",icon:"\uD83D\uDCCA"}]}:{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83D\uDCB0 **Для подбора финансирования нужны данные.**\n\nЗагрузите данные или используйте демо-данные.",timestamp:t,actions:[{id:"demo",label:"Демо-данные",action:"demo",icon:"\uD83D\uDCCA"}]}:"scenarios"===e?y?{id:"ai-".concat(Date.now()),role:"assistant",content:'\uD83C\uDFB2 **СТРЕСС-ТЕСТЫ И СЦЕНАРИИ**\n\n**\uD83D\uDCCA СЦЕНАРИЙ 1: "ЧТО ЕСЛИ ПРОДАЖИ УПАДУТ НА 30%?"**\n\n**Влияние на бизнес:**\n• Денежный поток: '.concat((.7*s).toLocaleString()," ₽/мес (-30%)\n• Runway: ").concat(Math.max(0,Math.floor(.7*n))," мес (-").concat(n-Math.floor(.7*n)," мес)\n• Риск банкротства: ").concat(a+30,"% (+30%)\n\n**План действий:**\n1. Сократить расходы на 25%\n2. Найти новые источники дохода\n3. Привлечь финансирование: ").concat((3*i).toLocaleString()," ₽\n\n**Вероятность:** 20%\n**Готовность:** ").concat(n>6?"ГОТОВЫ ✅":n>3?"ЧАСТИЧНО ⚠️":"НЕ ГОТОВЫ \uD83D\uDEA8",'\n\n---\n\n**\uD83D\uDCCA СЦЕНАРИЙ 2: "ЧТО ЕСЛИ ПОТЕРЯЕМ КЛЮЧЕВОГО КЛИЕНТА?"**\n\n**Влияние на бизнес:**\n• Потеря дохода: ').concat((.4*i).toLocaleString()," ₽/мес (-40% от крупнейшего)\n• Runway: ").concat(Math.max(0,Math.floor(.6*n))," мес\n• Время восстановления: 3-6 месяцев\n\n**План действий:**\n1. Диверсифицировать клиентскую базу\n2. Создать резервный фонд\n3. Развивать долгосрочные контракты\n\n**Вероятность:** ").concat(a>50?"40%":"15%","\n**Готовность:** ").concat(n>6?"ГОТОВЫ ✅":"ТРЕБУЕТ ПОДГОТОВКИ ⚠️",'\n\n---\n\n**\uD83D\uDCCA СЦЕНАРИЙ 3: "ЧТО ЕСЛИ ВЫРАСТУТ РАСХОДЫ НА 20%?"**\n\n**Влияние на бизнес:**\n• Burn rate: ').concat((1.2*i).toLocaleString()," ₽/мес (+20%)\n• Runway: ").concat(Math.max(0,Math.floor(.8*n))," мес\n• Необходимое финансирование: ").concat((2*i).toLocaleString()," ₽\n\n**План действий:**\n1. Оптимизировать операционные расходы\n2. Пересмотреть все контракты\n3. Автоматизировать процессы\n\n**Вероятность:** 30%\n**Готовность:** ").concat(n>6?"ГОТОВЫ ✅":"ТРЕБУЕТ ВНИМАНИЯ ⚠️",'\n\n---\n\n**\uD83D\uDCCA СЦЕНАРИЙ 4: "ЧТО ЕСЛИ ПОЯВИТСЯ АГРЕССИВНЫЙ КОНКУРЕНТ?"**\n\n**Влияние на бизнес:**\n• Снижение продаж: 15-25%\n• Давление на цены: -10-15%\n• Необходимость инвестиций в маркетинг: +30%\n\n**План действий:**\n1. Усилить уникальное торговое предложение\n2. Улучшить качество продукта/сервиса\n3. Развивать лояльность клиентов\n4. Инвестировать в инновации\n\n**Вероятность:** 50%\n**Готовность:** ').concat(n>6?"ГОТОВЫ ✅":"ТРЕБУЕТ ПОДГОТОВКИ ⚠️","\n\n---\n\n**\uD83C\uDFAF КОМПЛЕКСНЫЙ СТРЕСС-ТЕСТ:**\n\n**Худший сценарий (все риски одновременно):**\n• Продажи: -40%\n• Расходы: +20%\n• Потеря ключевого клиента\n• Runway: ").concat(Math.max(0,Math.floor(.4*n))," мес\n\n**Выживаемость:** ").concat(n>6?"ВЫСОКАЯ ✅":n>3?"СРЕДНЯЯ ⚠️":"НИЗКАЯ \uD83D\uDEA8","\n\n**Необходимые меры:**\n• Экстренное финансирование: ").concat((6*i).toLocaleString()," ₽\n• Сокращение расходов: 40-50%\n• Реструктуризация бизнеса\n\n**\uD83D\uDCA1 РЕКОМЕНДАЦИИ:**\n").concat(n<6?"• \uD83D\uDEA8 СРОЧНО создать резервный фонд на 6 месяцев\n• Диверсифицировать клиентскую базу\n• Снизить зависимость от ключевых клиентов\n• Подготовить план антикризисных мер":"• ✅ Поддерживать резервный фонд\n• Регулярно проводить стресс-тесты\n• Мониторить ключевые риски\n• Быть готовым к изменениям"),timestamp:t,actions:[{id:"risks",label:"Детальные риски",action:"risks",icon:"\uD83D\uDEE1️"},{id:"recommendations",label:"План защиты",action:"recommendations",icon:"\uD83D\uDCA1"}]}:{id:"ai-".concat(Date.now()),role:"assistant",content:"\uD83C\uDFB2 **Для сценариев нужны данные.**\n\nЗагрузите данные или используйте демо-данные.",timestamp:t,actions:[{id:"demo",label:"Демо-данные",action:"demo",icon:"\uD83D\uDCCA"}]}:generateSmartResponse(e)},handleSendMessage=async()=>{if(!o.trim())return;let e={id:"user-".concat(Date.now()),role:"user",content:o,timestamp:new Date().toISOString()};i(e),d(""),x(!0),setTimeout(()=>{let e=generateSmartResponse(o);i(e),x(!1)},1200)};return(0,n.jsxs)("div",{className:"".concat("h-full"," flex flex-col"),children:[!t&&(0,n.jsxs)(p,{className:"h-full flex flex-col",children:[(0,n.jsxs)(g,{className:"pb-3 flex-shrink-0",children:[(0,n.jsxs)(j,{className:"flex items-center text-sm",children:[(0,n.jsx)(N.Z,{className:"h-4 w-4 mr-2 text-blue-600"}),"AI-ассистент CFO"]}),(0,n.jsx)(D,{className:"text-xs",children:"Умный финансовый консультант"})]}),(0,n.jsxs)(f,{className:"flex-1 flex flex-col p-0 overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{maxHeight:"calc(100% - 80px)"},children:[0===s.length?(0,n.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,n.jsx)(F.Z,{className:"h-8 w-8 mx-auto mb-2 text-blue-500"}),(0,n.jsx)("p",{className:"text-sm mb-3",children:"Начните диалог с AI-ассистентом"}),(0,n.jsx)(h,{onClick:()=>{let e=generateSmartResponse("привет");i(e)},className:"bg-blue-500 hover:bg-blue-600 text-xs",children:"Начать диалог"})]}):s.map(e=>(0,n.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,n.jsx)("div",{className:"p-2 rounded-full ".concat("user"===e.role?"bg-blue-500":"bg-gray-200"),children:"user"===e.role?(0,n.jsx)(eu.Z,{className:"h-4 w-4 text-white"}):(0,n.jsx)(eh.Z,{className:"h-4 w-4"})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"inline-block p-3 rounded-lg max-w-xs ".concat("user"===e.role?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"),children:(0,n.jsx)("p",{className:"text-sm whitespace-pre-line",children:e.content})}),e.actions&&(0,n.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:e.actions.map(e=>(0,n.jsxs)(h,{className:"border border-gray-300 hover:bg-gray-50 text-xs",onClick:()=>handleQuickAction(e.action),children:[e.icon," ",e.label]},e.id))})]})]},e.id)),m&&(0,n.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,n.jsx)("div",{className:"p-2 rounded-full bg-gray-200",children:(0,n.jsx)(eh.Z,{className:"h-4 w-4"})}),(0,n.jsx)("div",{className:"bg-gray-100 p-3 rounded-lg",children:(0,n.jsxs)("div",{className:"flex space-x-1",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,n.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,n.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]}),(0,n.jsx)("div",{ref:u})]}),(0,n.jsx)("div",{className:"p-4 border-t flex-shrink-0",children:(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)("input",{type:"text",value:o,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&handleSendMessage(),placeholder:"Задайте вопрос...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,n.jsx)(h,{onClick:handleSendMessage,disabled:!o.trim()||m,children:(0,n.jsx)(ep.Z,{className:"h-4 w-4"})})]})})]})]}),t&&(0,n.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[0===s.length?(0,n.jsxs)("div",{className:"text-center text-gray-500 py-12",children:[(0,n.jsx)(F.Z,{className:"h-12 w-12 mx-auto mb-4 text-blue-500"}),(0,n.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Добро пожаловать в CFO-AI!"}),(0,n.jsx)("p",{className:"text-sm mb-4",children:"Умный финансовый консультант"}),(0,n.jsx)(h,{onClick:()=>{let e=generateSmartResponse("привет");i(e)},className:"bg-blue-500 hover:bg-blue-600",children:"Начать диалог"})]}):s.map(e=>(0,n.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,n.jsx)("div",{className:"p-3 rounded-full ".concat("user"===e.role?"bg-blue-500":"bg-gray-200"),children:"user"===e.role?(0,n.jsx)(eu.Z,{className:"h-4 w-4 text-white"}):(0,n.jsx)(eh.Z,{className:"h-4 w-4"})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"inline-block p-4 rounded-lg max-w-2xl ".concat("user"===e.role?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"),children:(0,n.jsx)("p",{className:"text-sm whitespace-pre-line",children:e.content})}),e.actions&&(0,n.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:e.actions.map(e=>(0,n.jsxs)(h,{className:"border border-gray-300 hover:bg-gray-50 text-sm",onClick:()=>handleQuickAction(e.action),children:[e.icon," ",e.label]},e.id))})]})]},e.id)),m&&(0,n.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,n.jsx)("div",{className:"p-3 rounded-full bg-gray-200",children:(0,n.jsx)(eh.Z,{className:"h-4 w-4"})}),(0,n.jsx)("div",{className:"bg-gray-100 p-4 rounded-lg",children:(0,n.jsxs)("div",{className:"flex space-x-1",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,n.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,n.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]}),(0,n.jsx)("div",{ref:u})]}),(0,n.jsx)("div",{className:"p-6 border-t bg-gray-50",children:(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)("input",{type:"text",value:o,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&handleSendMessage(),placeholder:"Задайте вопрос...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,n.jsxs)(h,{onClick:handleSendMessage,disabled:!o.trim()||m,className:"px-6",children:[(0,n.jsx)(ep.Z,{className:"h-4 w-4 mr-2"}),"Отправить"]})]})})]})]})}var eg=s(82104),ej=s(11981),eD=s(75386),ef=s(57703),ey=s(28485),ev=s(36612);function RisksPage(){let{kpiMetrics:e,selectedIndustry:t,bankStatements:s,arAp:a,loans:i,forecasts:c,aiAnalysis:l}=useAppStoreHydrated(),r=[{id:"1",title:"Низкая ликвидность",description:"Коэффициент ликвидности ниже рекомендуемого уровня",severity:1.5>((null==e?void 0:e.liquidityRatio)||0)?"high":"medium",impact:"Высокий",probability:"Средняя",mitigation:"Создать резервный фонд, оптимизировать дебиторскую задолженность"},{id:"2",title:"Короткий runway",description:"Время до исчерпания средств менее 6 месяцев",severity:6>((null==e?void 0:e.runway)||0)?"high":"medium",impact:"Критический",probability:"Высокая",mitigation:"Срочно найти источники финансирования, сократить расходы"},{id:"3",title:"Кассовые разрывы",description:"Прогнозируются дни с отрицательным денежным потоком",severity:c.some(e=>e.p5<0)?"high":"low",impact:"Высокий",probability:"Средняя",mitigation:"Настроить кредитную линию, оптимизировать платежи"}],o=[{id:"1",title:"Просроченная дебиторская задолженность",description:"Клиенты задерживают оплату",severity:a.filter(e=>"overdue"===e.status).length>0?"high":"low",impact:"Средний",probability:"Средняя",mitigation:"Ужесточить условия оплаты, ввести предоплату"},{id:"2",title:"Концентрация риска",description:"Зависимость от ограниченного круга клиентов",severity:"medium",impact:"Высокий",probability:"Средняя",mitigation:"Диверсифицировать клиентскую базу"}],d=[{id:"1",title:"Сезонность",description:"Высокая зависимость от сезонных факторов",severity:((null==t?void 0:t.characteristics.seasonality)||0)>.6?"high":"medium",impact:"Средний",probability:"Высокая",mitigation:"Создать резервы на низкие периоды, диверсифицировать доходы"},{id:"2",title:"Волатильность",description:"Высокая волатильность денежных потоков",severity:((null==t?void 0:t.characteristics.volatility)||0)>.6?"high":"medium",impact:"Средний",probability:"Средняя",mitigation:"Стабилизировать доходы, создать буферные резервы"}],m=[{id:"1",title:"Высокий общий риск",description:"Общий уровень риска превышает допустимые значения",severity:((null==e?void 0:e.riskScore)||0)>60?"high":"medium",impact:"Высокий",probability:"Средняя",mitigation:"Комплексная программа снижения рисков"},{id:"2",title:"Зависимость от поставщиков",description:"Ограниченное количество поставщиков",severity:"medium",impact:"Средний",probability:"Средняя",mitigation:"Диверсифицировать поставщиков, создать альтернативы"}],x=[{name:"Ликвидность",value:r.filter(e=>"high"===e.severity).length,color:"#ef4444"},{name:"Кредитные",value:o.filter(e=>"high"===e.severity).length,color:"#f59e0b"},{name:"Рыночные",value:d.filter(e=>"high"===e.severity).length,color:"#8b5cf6"},{name:"Операционные",value:m.filter(e=>"high"===e.severity).length,color:"#06b6d4"}],u=c.map(e=>({date:new Date(e.date).toLocaleDateString("ru-RU",{day:"numeric"}),risk:Math.round((1-e.confidence)*100),confidence:Math.round(100*e.confidence)})),getSeverityColor=e=>{switch(e){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},getSeverityLabel=e=>{switch(e){case"high":return"Высокий";case"medium":return"Средний";case"low":return"Низкий";default:return"Неизвестно"}},getSeverityIcon=e=>{switch(e){case"high":return(0,n.jsx)(eg.Z,{className:"h-4 w-4"});case"medium":return(0,n.jsx)(ej.Z,{className:"h-4 w-4"});case"low":return(0,n.jsx)(L.Z,{className:"h-4 w-4"});default:return(0,n.jsx)(ec.Z,{className:"h-4 w-4"})}};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Анализ рисков"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Комплексная оценка всех видов рисков"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsxs)(Badge,{variant:"outline",className:"text-sm",children:[(0,n.jsx)(N.Z,{className:"h-4 w-4 mr-1"}),"AI-анализ"]}),(0,n.jsxs)(Badge,{className:getSeverityColor(((null==e?void 0:e.riskScore)||0)>60?"high":((null==e?void 0:e.riskScore)||0)>30?"medium":"low"),children:["Общий риск: ",null==e?void 0:e.riskScore,"%"]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,n.jsxs)(p,{children:[(0,n.jsx)(g,{className:"pb-2",children:(0,n.jsxs)(j,{className:"text-sm font-medium flex items-center",children:[(0,n.jsx)(C.Z,{className:"h-4 w-4 mr-2 text-blue-600"}),"Ликвидность"]})}),(0,n.jsxs)(f,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:(null==e?void 0:e.liquidityRatio)&&isFinite(e.liquidityRatio)?"".concat(e.liquidityRatio,"x"):"Н/Д"}),(0,n.jsx)("p",{className:"text-xs text-gray-600",children:1.5>((null==e?void 0:e.liquidityRatio)||0)?"Ниже нормы":"В норме"})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(g,{className:"pb-2",children:(0,n.jsxs)(j,{className:"text-sm font-medium flex items-center",children:[(0,n.jsx)(ed.Z,{className:"h-4 w-4 mr-2 text-orange-600"}),"Runway"]})}),(0,n.jsxs)(f,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:(null==e?void 0:e.runway)&&isFinite(e.runway)?"".concat(e.runway," мес"):"Н/Д"}),(0,n.jsx)("p",{className:"text-xs text-gray-600",children:6>((null==e?void 0:e.runway)||0)?"Критично":"Нормально"})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(g,{className:"pb-2",children:(0,n.jsxs)(j,{className:"text-sm font-medium flex items-center",children:[(0,n.jsx)(ec.Z,{className:"h-4 w-4 mr-2 text-red-600"}),"Критические дни"]})}),(0,n.jsxs)(f,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-red-600",children:c.filter(e=>e.p5<0).length}),(0,n.jsx)("p",{className:"text-xs text-gray-600",children:"Дней с риском"})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(g,{className:"pb-2",children:(0,n.jsxs)(j,{className:"text-sm font-medium flex items-center",children:[(0,n.jsx)(b.Z,{className:"h-4 w-4 mr-2 text-purple-600"}),"Общий риск"]})}),(0,n.jsxs)(f,{children:[(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[null==e?void 0:e.riskScore,"%"]}),(0,n.jsx)("p",{className:"text-xs text-gray-600",children:getSeverityLabel(((null==e?void 0:e.riskScore)||0)>60?"high":((null==e?void 0:e.riskScore)||0)>30?"medium":"low")})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(el.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"Распределение рисков"]}),(0,n.jsx)(D,{children:"Количество высокорисковых факторов по категориям"})]}),(0,n.jsx)(f,{children:(0,n.jsx)("div",{className:"h-64",children:(0,n.jsx)(z.h,{width:"100%",height:"100%",children:(0,n.jsxs)(ef.u,{children:[(0,n.jsx)(ey.b,{data:x,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:e=>{let{name:t,value:s}=e;return"".concat(t,": ").concat(s)},children:x.map((e,t)=>(0,n.jsx)(ev.b,{fill:e.color},"cell-".concat(t)))}),(0,n.jsx)(V.u,{}),(0,n.jsx)(Q.D,{})]})})})})]}),(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(eD.Z,{className:"h-5 w-5 mr-2 text-green-600"}),"Динамика рисков"]}),(0,n.jsx)(D,{children:"Изменение уровня риска по дням прогноза"})]}),(0,n.jsx)(f,{children:(0,n.jsx)("div",{className:"h-64",children:(0,n.jsx)(z.h,{width:"100%",height:"100%",children:(0,n.jsxs)($.w,{data:u,children:[(0,n.jsx)(H.q,{strokeDasharray:"3 3"}),(0,n.jsx)(W.K,{dataKey:"date"}),(0,n.jsx)(U.B,{}),(0,n.jsx)(V.u,{formatter:(e,t)=>["".concat(e,"%"),"risk"===t?"Риск":"Уверенность"]}),(0,n.jsx)(Q.D,{}),(0,n.jsx)(Y.x,{type:"monotone",dataKey:"risk",stroke:"#ef4444",strokeWidth:2,name:"Риск"}),(0,n.jsx)(Y.x,{type:"monotone",dataKey:"confidence",stroke:"#10b981",strokeWidth:2,name:"Уверенность"})]})})})})]})]}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(em.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"Риски ликвидности"]}),(0,n.jsx)(D,{children:"Риски, связанные с недостатком денежных средств"})]}),(0,n.jsx)(f,{children:(0,n.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,n.jsxs)("div",{className:"flex items-start space-x-4 p-4 border rounded-lg",children:[(0,n.jsx)("div",{className:"p-2 rounded-full ".concat(getSeverityColor(e.severity)),children:getSeverityIcon(e.severity)}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("h4",{className:"font-semibold",children:e.title}),(0,n.jsx)(Badge,{className:getSeverityColor(e.severity),children:getSeverityLabel(e.severity)})]}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Воздействие:"}),(0,n.jsx)("span",{className:"ml-2 font-medium",children:e.impact})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Вероятность:"}),(0,n.jsx)("span",{className:"ml-2 font-medium",children:e.probability})]})]}),(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"Меры снижения:"}),(0,n.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.mitigation})]})]})]},e.id))})})]}),(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(eo.Z,{className:"h-5 w-5 mr-2 text-orange-600"}),"Кредитные риски"]}),(0,n.jsx)(D,{children:"Риски, связанные с невозвратом дебиторской задолженности"})]}),(0,n.jsx)(f,{children:(0,n.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,n.jsxs)("div",{className:"flex items-start space-x-4 p-4 border rounded-lg",children:[(0,n.jsx)("div",{className:"p-2 rounded-full ".concat(getSeverityColor(e.severity)),children:getSeverityIcon(e.severity)}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("h4",{className:"font-semibold",children:e.title}),(0,n.jsx)(Badge,{className:getSeverityColor(e.severity),children:getSeverityLabel(e.severity)})]}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Воздействие:"}),(0,n.jsx)("span",{className:"ml-2 font-medium",children:e.impact})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Вероятность:"}),(0,n.jsx)("span",{className:"ml-2 font-medium",children:e.probability})]})]}),(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"Меры снижения:"}),(0,n.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.mitigation})]})]})]},e.id))})})]}),(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(S.Z,{className:"h-5 w-5 mr-2 text-purple-600"}),"Рыночные риски"]}),(0,n.jsx)(D,{children:"Риски, связанные с изменениями на рынке"})]}),(0,n.jsx)(f,{children:(0,n.jsx)("div",{className:"space-y-4",children:d.map(e=>(0,n.jsxs)("div",{className:"flex items-start space-x-4 p-4 border rounded-lg",children:[(0,n.jsx)("div",{className:"p-2 rounded-full ".concat(getSeverityColor(e.severity)),children:getSeverityIcon(e.severity)}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("h4",{className:"font-semibold",children:e.title}),(0,n.jsx)(Badge,{className:getSeverityColor(e.severity),children:getSeverityLabel(e.severity)})]}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Воздействие:"}),(0,n.jsx)("span",{className:"ml-2 font-medium",children:e.impact})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Вероятность:"}),(0,n.jsx)("span",{className:"ml-2 font-medium",children:e.probability})]})]}),(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"Меры снижения:"}),(0,n.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.mitigation})]})]})]},e.id))})})]}),(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(C.Z,{className:"h-5 w-5 mr-2 text-green-600"}),"Операционные риски"]}),(0,n.jsx)(D,{children:"Риски, связанные с внутренними процессами"})]}),(0,n.jsx)(f,{children:(0,n.jsx)("div",{className:"space-y-4",children:m.map(e=>(0,n.jsxs)("div",{className:"flex items-start space-x-4 p-4 border rounded-lg",children:[(0,n.jsx)("div",{className:"p-2 rounded-full ".concat(getSeverityColor(e.severity)),children:getSeverityIcon(e.severity)}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("h4",{className:"font-semibold",children:e.title}),(0,n.jsx)(Badge,{className:getSeverityColor(e.severity),children:getSeverityLabel(e.severity)})]}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Воздействие:"}),(0,n.jsx)("span",{className:"ml-2 font-medium",children:e.impact})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Вероятность:"}),(0,n.jsx)("span",{className:"ml-2 font-medium",children:e.probability})]})]}),(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"Меры снижения:"}),(0,n.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.mitigation})]})]})]},e.id))})})]})]}),l&&(0,n.jsxs)(p,{children:[(0,n.jsx)(g,{children:(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(N.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"AI-рекомендации по снижению рисков"]})}),(0,n.jsx)(f,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:"font-semibold text-green-600 mb-3 flex items-center",children:[(0,n.jsx)(L.Z,{className:"h-4 w-4 mr-2"}),"Немедленные действия"]}),(0,n.jsx)("ul",{className:"space-y-2",children:l.recommendations.slice(0,3).map((e,t)=>(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)("span",{className:"text-green-500 mr-2",children:"•"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-semibold",children:e.title}),(0,n.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.description})]})]},t))})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:"font-semibold text-blue-600 mb-3 flex items-center",children:[(0,n.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Долгосрочные меры"]}),(0,n.jsxs)("ul",{className:"space-y-2",children:[(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)("span",{className:"text-blue-500 mr-2",children:"•"}),"Создать резервный фонд на 3-6 месяцев расходов"]}),(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)("span",{className:"text-blue-500 mr-2",children:"•"}),"Диверсифицировать источники дохода"]}),(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)("span",{className:"text-blue-500 mr-2",children:"•"}),"Внедрить систему мониторинга рисков"]})]})]})]})})]})]})}function RecommendationsPage(){var e;let{kpiMetrics:t,selectedIndustry:s,bankStatements:a,arAp:i,loans:c,forecasts:l,aiAnalysis:r,scenarios:o,financingOptions:d}=useAppStoreHydrated(),m=[{id:"1",title:"Оптимизация дебиторской задолженности",description:"Сократить DSO с 30 до 15 дней для улучшения денежного потока",impact:"Высокий",effort:"Средний",timeframe:"1-2 месяца",priority:"high",actions:["Внедрить систему предоплаты для новых клиентов","Ужесточить условия оплаты в договорах","Автоматизировать напоминания о платежах","Ввести скидки за раннюю оплату"],expectedBenefit:"Увеличение денежного потока на 15-20%"},{id:"2",title:"Создание резервного фонда",description:"Сформировать резерв на 3-6 месяцев операционных расходов",impact:"Критический",effort:"Высокий",timeframe:"3-6 месяцев",priority:"high",actions:["Откладывать 10-15% от ежемесячной выручки","Рассмотреть краткосрочные инвестиции","Оптимизировать расходы для ускорения накопления","Создать отдельный счет для резерва"],expectedBenefit:"Снижение риска кассовых разрывов на 80%"},{id:"3",title:"Оптимизация товарных запасов",description:"Сократить DIO с 45 до 30 дней для высвобождения средств",impact:"Средний",effort:"Средний",timeframe:"2-3 месяца",priority:"medium",actions:["Внедрить систему управления запасами","Оптимизировать ассортимент","Улучшить прогнозирование спроса","Рассмотреть дропшиппинг для части товаров"],expectedBenefit:"Высвобождение 500,000-800,000 ₽"}],x=[{id:"1",title:"Диверсификация клиентской базы",description:"Снизить зависимость от крупных клиентов",impact:"Высокий",effort:"Высокий",timeframe:"3-6 месяцев",priority:"high",actions:["Разработать стратегию привлечения новых клиентов","Создать программы лояльности","Расширить каналы продаж","Инвестировать в маркетинг"],expectedBenefit:"Снижение риска на 40-50%"},{id:"2",title:"Оптимизация операционных расходов",description:"Сократить расходы на 10-15% без потери качества",impact:"Средний",effort:"Средний",timeframe:"2-4 месяца",priority:"medium",actions:["Провести аудит всех расходов","Пересмотреть договоры с поставщиками","Автоматизировать рутинные процессы","Оптимизировать штат"],expectedBenefit:"Экономия 150,000-300,000 ₽ в месяц"},{id:"3",title:"Улучшение системы прогнозирования",description:"Внедрить более точные методы прогнозирования",impact:"Средний",effort:"Средний",timeframe:"1-3 месяца",priority:"medium",actions:["Внедрить AI-алгоритмы прогнозирования","Улучшить сбор данных","Создать систему раннего предупреждения","Обучить персонал работе с новыми инструментами"],expectedBenefit:"Повышение точности прогнозов на 30%"}],u=[{id:"1",title:"Стратегическое финансирование",description:"Получить долгосрочное финансирование для развития",impact:"Критический",effort:"Высокий",timeframe:"6-12 месяцев",priority:"high",actions:["Подготовить бизнес-план развития","Выбрать оптимальный инструмент финансирования","Подготовить пакет документов","Провести переговоры с банками"],expectedBenefit:"Привлечение 2-5 млн ₽ для развития"},{id:"2",title:"Цифровая трансформация",description:"Внедрить современные технологии для повышения эффективности",impact:"Высокий",effort:"Высокий",timeframe:"6-18 месяцев",priority:"medium",actions:["Внедрить CRM-систему","Автоматизировать учет","Создать мобильное приложение","Внедрить аналитику данных"],expectedBenefit:"Повышение эффективности на 25-40%"},{id:"3",title:"Расширение бизнеса",description:"Выйти на новые рынки или расширить ассортимент",impact:"Высокий",effort:"Критический",timeframe:"12-24 месяца",priority:"low",actions:["Провести маркетинговые исследования","Разработать стратегию выхода","Создать команду для нового направления","Инвестировать в развитие"],expectedBenefit:"Увеличение выручки на 50-100%"}],h=[{name:"Немедленные",value:m.length,color:"#ef4444"},{name:"Краткосрочные",value:x.length,color:"#f59e0b"},{name:"Долгосрочные",value:u.length,color:"#10b981"}],y=[{name:"Критический",value:[...m,...x,...u].filter(e=>"Критический"===e.impact).length},{name:"Высокий",value:[...m,...x,...u].filter(e=>"Высокий"===e.impact).length},{name:"Средний",value:[...m,...x,...u].filter(e=>"Средний"===e.impact).length}],getPriorityColor=e=>{switch(e){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},getPriorityLabel=e=>{switch(e){case"high":return"Высокий";case"medium":return"Средний";case"low":return"Низкий";default:return"Неизвестно"}},getImpactColor=e=>{switch(e){case"Критический":return"text-red-600 bg-red-100";case"Высокий":return"text-orange-600 bg-orange-100";case"Средний":return"text-yellow-600 bg-yellow-100";case"Низкий":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"AI-рекомендации"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Персональные рекомендации на основе комплексного анализа"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsxs)(Badge,{variant:"outline",className:"text-sm",children:[(0,n.jsx)(N.Z,{className:"h-4 w-4 mr-1"}),"AI-анализ"]}),(0,n.jsx)(Badge,{variant:"outline",className:"text-sm",children:null==s?void 0:s.name})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,n.jsxs)(p,{children:[(0,n.jsx)(g,{className:"pb-2",children:(0,n.jsxs)(j,{className:"text-sm font-medium flex items-center",children:[(0,n.jsx)(w.Z,{className:"h-4 w-4 mr-2 text-red-600"}),"Немедленные"]})}),(0,n.jsxs)(f,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:m.length}),(0,n.jsx)("p",{className:"text-xs text-gray-600",children:"Рекомендаций"})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(g,{className:"pb-2",children:(0,n.jsxs)(j,{className:"text-sm font-medium flex items-center",children:[(0,n.jsx)(ed.Z,{className:"h-4 w-4 mr-2 text-orange-600"}),"Краткосрочные"]})}),(0,n.jsxs)(f,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:x.length}),(0,n.jsx)("p",{className:"text-xs text-gray-600",children:"Рекомендаций"})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(g,{className:"pb-2",children:(0,n.jsxs)(j,{className:"text-sm font-medium flex items-center",children:[(0,n.jsx)(b.Z,{className:"h-4 w-4 mr-2 text-green-600"}),"Долгосрочные"]})}),(0,n.jsxs)(f,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:u.length}),(0,n.jsx)("p",{className:"text-xs text-gray-600",children:"Рекомендаций"})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsx)(g,{className:"pb-2",children:(0,n.jsxs)(j,{className:"text-sm font-medium flex items-center",children:[(0,n.jsx)(A.Z,{className:"h-4 w-4 mr-2 text-blue-600"}),"Общий потенциал"]})}),(0,n.jsxs)(f,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:"+25%"}),(0,n.jsx)("p",{className:"text-xs text-gray-600",children:"Рост эффективности"})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(el.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"Распределение по приоритетам"]}),(0,n.jsx)(D,{children:"Количество рекомендаций по срочности"})]}),(0,n.jsx)(f,{children:(0,n.jsx)("div",{className:"h-64",children:(0,n.jsx)(z.h,{width:"100%",height:"100%",children:(0,n.jsxs)(ef.u,{children:[(0,n.jsx)(ey.b,{data:h,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:e=>{let{name:t,value:s}=e;return"".concat(t,": ").concat(s)},children:h.map((e,t)=>(0,n.jsx)(ev.b,{fill:e.color},"cell-".concat(t)))}),(0,n.jsx)(V.u,{}),(0,n.jsx)(Q.D,{})]})})})})]}),(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(S.Z,{className:"h-5 w-5 mr-2 text-green-600"}),"Анализ воздействия"]}),(0,n.jsx)(D,{children:"Распределение рекомендаций по уровню воздействия"})]}),(0,n.jsx)(f,{children:(0,n.jsx)("div",{className:"h-64",children:(0,n.jsx)(z.h,{width:"100%",height:"100%",children:(0,n.jsxs)(G.v,{data:y,children:[(0,n.jsx)(H.q,{strokeDasharray:"3 3"}),(0,n.jsx)(W.K,{dataKey:"name"}),(0,n.jsx)(U.B,{}),(0,n.jsx)(V.u,{}),(0,n.jsx)(J.$,{dataKey:"value",fill:"#3b82f6"})]})})})})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(w.Z,{className:"h-5 w-5 mr-2 text-red-600"}),"Немедленные рекомендации"]}),(0,n.jsx)(D,{children:"Действия, которые необходимо выполнить в ближайшее время"})]}),(0,n.jsx)(f,{children:(0,n.jsx)("div",{className:"space-y-6",children:m.map(e=>(0,n.jsxs)("div",{className:"border rounded-lg p-6",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-2",children:e.title}),(0,n.jsx)("p",{className:"text-gray-600 mb-3",children:e.description})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(Badge,{className:getPriorityColor(e.priority),children:getPriorityLabel(e.priority)}),(0,n.jsx)(Badge,{className:getImpactColor(e.impact),children:e.impact})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"Воздействие:"}),(0,n.jsx)("p",{className:"font-medium",children:e.impact})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"Сложность:"}),(0,n.jsx)("p",{className:"font-medium",children:e.effort})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"Срок:"}),(0,n.jsx)("p",{className:"font-medium",children:e.timeframe})]})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h4",{className:"font-semibold mb-2",children:"Конкретные действия:"}),(0,n.jsx)("ul",{className:"space-y-1",children:e.actions.map((e,t)=>(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)(L.Z,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5"}),e]},t))})]}),(0,n.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center mb-1",children:[(0,n.jsx)(A.Z,{className:"h-4 w-4 text-green-600 mr-2"}),(0,n.jsx)("span",{className:"font-semibold text-green-800",children:"Ожидаемый результат:"})]}),(0,n.jsx)("p",{className:"text-sm text-green-700",children:e.expectedBenefit})]})]},e.id))})})]}),(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(ed.Z,{className:"h-5 w-5 mr-2 text-orange-600"}),"Краткосрочные рекомендации"]}),(0,n.jsx)(D,{children:"Действия на период 1-6 месяцев"})]}),(0,n.jsx)(f,{children:(0,n.jsx)("div",{className:"space-y-6",children:x.map(e=>(0,n.jsxs)("div",{className:"border rounded-lg p-6",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-2",children:e.title}),(0,n.jsx)("p",{className:"text-gray-600 mb-3",children:e.description})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(Badge,{className:getPriorityColor(e.priority),children:getPriorityLabel(e.priority)}),(0,n.jsx)(Badge,{className:getImpactColor(e.impact),children:e.impact})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"Воздействие:"}),(0,n.jsx)("p",{className:"font-medium",children:e.impact})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"Сложность:"}),(0,n.jsx)("p",{className:"font-medium",children:e.effort})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"Срок:"}),(0,n.jsx)("p",{className:"font-medium",children:e.timeframe})]})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h4",{className:"font-semibold mb-2",children:"Конкретные действия:"}),(0,n.jsx)("ul",{className:"space-y-1",children:e.actions.map((e,t)=>(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)(L.Z,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5"}),e]},t))})]}),(0,n.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center mb-1",children:[(0,n.jsx)(b.Z,{className:"h-4 w-4 text-blue-600 mr-2"}),(0,n.jsx)("span",{className:"font-semibold text-blue-800",children:"Ожидаемый результат:"})]}),(0,n.jsx)("p",{className:"text-sm text-blue-700",children:e.expectedBenefit})]})]},e.id))})})]}),(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(b.Z,{className:"h-5 w-5 mr-2 text-green-600"}),"Долгосрочные рекомендации"]}),(0,n.jsx)(D,{children:"Стратегические действия на период 6+ месяцев"})]}),(0,n.jsx)(f,{children:(0,n.jsx)("div",{className:"space-y-6",children:u.map(e=>(0,n.jsxs)("div",{className:"border rounded-lg p-6",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-2",children:e.title}),(0,n.jsx)("p",{className:"text-gray-600 mb-3",children:e.description})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(Badge,{className:getPriorityColor(e.priority),children:getPriorityLabel(e.priority)}),(0,n.jsx)(Badge,{className:getImpactColor(e.impact),children:e.impact})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"Воздействие:"}),(0,n.jsx)("p",{className:"font-medium",children:e.impact})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"Сложность:"}),(0,n.jsx)("p",{className:"font-medium",children:e.effort})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:"Срок:"}),(0,n.jsx)("p",{className:"font-medium",children:e.timeframe})]})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h4",{className:"font-semibold mb-2",children:"Конкретные действия:"}),(0,n.jsx)("ul",{className:"space-y-1",children:e.actions.map((e,t)=>(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)(L.Z,{className:"h-4 w-4 text-green-500 mr-2 mt-0.5"}),e]},t))})]}),(0,n.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center mb-1",children:[(0,n.jsx)(C.Z,{className:"h-4 w-4 text-purple-600 mr-2"}),(0,n.jsx)("span",{className:"font-semibold text-purple-800",children:"Ожидаемый результат:"})]}),(0,n.jsx)("p",{className:"text-sm text-purple-700",children:e.expectedBenefit})]})]},e.id))})})]}),r&&(0,n.jsxs)(p,{children:[(0,n.jsx)(g,{children:(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(N.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"Итоговые рекомендации AI"]})}),(0,n.jsx)(f,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:"font-semibold text-green-600 mb-3 flex items-center",children:[(0,n.jsx)(L.Z,{className:"h-4 w-4 mr-2"}),"Ключевые возможности"]}),(0,n.jsx)("ul",{className:"space-y-2",children:(null===(e=r.opportunities)||void 0===e?void 0:e.map((e,t)=>(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)("span",{className:"text-green-500 mr-2",children:"•"}),e]},t)))||(0,n.jsx)("li",{className:"text-sm text-gray-600",children:"Анализ возможностей в процессе..."})})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:"font-semibold text-blue-600 mb-3 flex items-center",children:[(0,n.jsx)(B.Z,{className:"h-4 w-4 mr-2"}),"Стратегические направления"]}),(0,n.jsx)("ul",{className:"space-y-2",children:r.recommendations.slice(0,3).map((e,t)=>(0,n.jsxs)("li",{className:"text-sm text-gray-600 flex items-start",children:[(0,n.jsx)("span",{className:"text-blue-500 mr-2",children:"•"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-semibold",children:e.title}),(0,n.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.description})]})]},t))})]})]})})]})]})}var eN=s(44135),eb=s(93088);function ThemeToggle(){let[e,t]=(0,a.useState)("light");return(0,a.useEffect)(()=>{let e=localStorage.getItem("theme"),s=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",n=e||s;t(n),document.documentElement.classList.toggle("dark","dark"===n)},[]),(0,n.jsxs)(h,{variant:"outline",size:"icon",onClick:()=>{let s="light"===e?"dark":"light";t(s),localStorage.setItem("theme",s),document.documentElement.classList.toggle("dark","dark"===s)},className:"relative",title:"light"===e?"Переключить на темную тему":"Переключить на светлую тему",children:[(0,n.jsx)(eN.Z,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,n.jsx)(eb.Z,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,n.jsx)("span",{className:"sr-only",children:"Переключить тему"})]})}var ew=s(32176),eC=s(29409);function MainDashboard(){var e,t,s;let{kpiMetrics:i,aiAnalysis:c,selectedIndustry:l,isChatOpen:r,setChatOpen:o,setCurrentPage:d}=useAppStoreHydrated(),[m,x]=(0,a.useState)("forecast");return console.log("\uD83D\uDD0D MainDashboard - kpiMetrics:",i),console.log("\uD83D\uDD0D MainDashboard - selectedIndustry:",l),i||(console.warn("⚠️ kpiMetrics отсутствует! Возможно, данные не загрузились"),console.log("\uD83D\uDCA1 Попробуйте очистить localStorage: localStorage.clear() и перезагрузить страницу")),(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,n.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b dark:border-gray-700",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-lg",children:(0,n.jsx)(N.Z,{className:"h-6 w-6 text-white"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"CFO-AI"}),(0,n.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:null==l?void 0:l.name})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)(ThemeToggle,{}),(0,n.jsxs)(h,{variant:"outline",onClick:()=>o(!r),className:"relative",children:[(0,n.jsx)(ew.Z,{className:"h-5 w-5 mr-2"}),"AI-ассистент",!r&&(0,n.jsx)("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:"1"})]}),(0,n.jsxs)(h,{variant:"outline",onClick:()=>d("settings"),children:[(0,n.jsx)(eC.Z,{className:"h-5 w-5 mr-2"}),"Настройки"]})]})]})})}),(0,n.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(j,{className:"text-sm font-medium",children:"Денежный поток"}),(0,n.jsx)(A.Z,{className:"h-4 w-4 text-green-600"})]}),(0,n.jsxs)(f,{children:[(0,n.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[(null==i?void 0:i.cashFlow)?i.cashFlow.toLocaleString():"0"," ₽"]}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:(null==i?void 0:i.cashFlow)?"+12% с прошлого месяца":"Загрузка данных..."})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(j,{className:"text-sm font-medium",children:"Burn Rate"}),(0,n.jsx)(S.Z,{className:"h-4 w-4 text-blue-600"})]}),(0,n.jsxs)(f,{children:[(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[(null==i?void 0:i.burnRate)?i.burnRate.toLocaleString():"0"," ₽/мес"]}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Runway: ",(null==i?void 0:i.runway)&&isFinite(i.runway)?"".concat(i.runway," месяцев"):"Загрузка..."]})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(j,{className:"text-sm font-medium",children:"Риск"}),(0,n.jsx)(ec.Z,{className:"h-4 w-4 text-orange-600"})]}),(0,n.jsxs)(f,{children:[(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[null!==(e=null==i?void 0:i.riskScore)&&void 0!==e?e:0,"%"]}),(0,n.jsx)(Badge,{className:(t=(null==i?void 0:i.riskScore)||0)<30?"text-green-600 bg-green-100":t<60?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",children:i?(s=(null==i?void 0:i.riskScore)||0)<30?"Низкий":s<60?"Средний":"Высокий":"Загрузка..."})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(j,{className:"text-sm font-medium",children:"Ликвидность"}),(0,n.jsx)(L.Z,{className:"h-4 w-4 text-green-600"})]}),(0,n.jsxs)(f,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:(null==i?void 0:i.liquidityRatio)&&isFinite(i.liquidityRatio)?"".concat(i.liquidityRatio,"x"):"Н/Д"}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:["DSO: ",null==i?void 0:i.dso,"д, DPO: ",null==i?void 0:i.dpo,"д"]})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,n.jsx)("div",{className:"lg:col-span-3",children:(0,n.jsxs)(O,{value:m,onValueChange:x,className:"w-full",children:[(0,n.jsxs)(T,{className:"grid w-full grid-cols-5",children:[(0,n.jsxs)(P,{value:"forecast",className:"flex items-center",children:[(0,n.jsx)(S.Z,{className:"h-4 w-4 mr-2"}),"Прогноз"]}),(0,n.jsxs)(P,{value:"scenarios",className:"flex items-center",children:[(0,n.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Сценарии"]}),(0,n.jsxs)(P,{value:"financing",className:"flex items-center",children:[(0,n.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"Финансирование"]}),(0,n.jsxs)(P,{value:"risks",className:"flex items-center",children:[(0,n.jsx)(C.Z,{className:"h-4 w-4 mr-2"}),"Риски"]}),(0,n.jsxs)(P,{value:"recommendations",className:"flex items-center",children:[(0,n.jsx)(B.Z,{className:"h-4 w-4 mr-2"}),"Рекомендации"]})]}),(0,n.jsx)(K,{value:"forecast",className:"mt-6",children:(0,n.jsx)(ForecastChart,{})}),(0,n.jsx)(K,{value:"scenarios",className:"mt-6",children:(0,n.jsx)(AdvancedScenarios,{})}),(0,n.jsx)(K,{value:"financing",className:"mt-6",children:(0,n.jsx)(AdvancedFinancing,{})}),(0,n.jsx)(K,{value:"risks",className:"mt-6",children:(0,n.jsx)(RisksPage,{})}),(0,n.jsx)(K,{value:"recommendations",className:"mt-6",children:(0,n.jsx)(RecommendationsPage,{})})]})}),(0,n.jsx)("div",{className:"lg:col-span-1 h-[calc(100vh-12rem)] sticky top-24",children:(0,n.jsx)(SmartAssistant,{})})]})]}),r&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl h-[80vh] flex flex-col",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-lg",children:(0,n.jsx)(N.Z,{className:"h-6 w-6 text-white"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"AI-ассистент CFO"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Ваш персональный финансовый консультант"})]})]}),(0,n.jsx)(h,{variant:"outline",size:"sm",onClick:()=>o(!1),children:"✕"})]}),(0,n.jsx)("div",{className:"flex-1 p-6 overflow-y-auto",children:(0,n.jsx)(SmartAssistant,{isFullScreen:!0})})]})})]})}var eS=s(73067);function SettingsPage(){var e,t,s;let{userPreferences:i,selectedIndustry:c,setUserPreferences:l,setCurrentPage:r,reset:o}=useAppStoreHydrated(),[d,m]=(0,a.useState)(i||{industry:"retail",companySize:"medium",riskTolerance:"medium",timeHorizon:"medium",notifications:!0,theme:"light"}),x=[{value:"small",label:"Малый бизнес",description:"До 50 сотрудников"},{value:"medium",label:"Средний бизнес",description:"50-250 сотрудников"},{value:"large",label:"Крупный бизнес",description:"Свыше 250 сотрудников"}],u=[{value:"low",label:"Консервативный",description:"Минимальные риски"},{value:"medium",label:"Сбалансированный",description:"Умеренные риски"},{value:"high",label:"Агрессивный",description:"Высокие риски"}],y=[{value:"short",label:"Краткосрочный",description:"1-3 месяца"},{value:"medium",label:"Среднесрочный",description:"3-12 месяцев"},{value:"long",label:"Долгосрочный",description:"1+ год"}];return(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,n.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsx)("div",{className:"flex items-center justify-between py-4",children:(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsxs)(h,{variant:"outline",onClick:()=>r("dashboard"),className:"flex items-center",children:[(0,n.jsx)(eS.Z,{className:"h-4 w-4 mr-2"}),"Назад"]}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-lg",children:(0,n.jsx)(eC.Z,{className:"h-6 w-6 text-white"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Настройки"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Персонализация и конфигурация системы"})]})]})]})})})}),(0,n.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(L.Z,{className:"h-5 w-5 mr-2 text-green-600"}),"Текущие настройки"]}),(0,n.jsx)(D,{children:"Активная конфигурация системы"})]}),(0,n.jsx)(f,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"Отрасль:"}),(0,n.jsx)(Badge,{variant:"outline",children:null==c?void 0:c.name})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"Размер компании:"}),(0,n.jsx)(Badge,{variant:"outline",children:null===(e=x.find(e=>e.value===d.companySize))||void 0===e?void 0:e.label})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"Толерантность к риску:"}),(0,n.jsx)(Badge,{variant:"outline",children:null===(t=u.find(e=>e.value===d.riskTolerance))||void 0===t?void 0:t.label})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"Временной горизонт:"}),(0,n.jsx)(Badge,{variant:"outline",children:null===(s=y.find(e=>e.value===d.timeHorizon))||void 0===s?void 0:s.label})]})]})})]}),(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(Z.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"Настройки компании"]}),(0,n.jsx)(D,{children:"Основные параметры вашего бизнеса"})]}),(0,n.jsxs)(f,{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Размер компании"}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:x.map(e=>(0,n.jsx)(p,{className:"cursor-pointer transition-all duration-200 hover:shadow-md ".concat(d.companySize===e.value?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"),onClick:()=>m({...d,companySize:e.value}),children:(0,n.jsxs)(f,{className:"p-4",children:[(0,n.jsx)("h3",{className:"font-semibold mb-1",children:e.label}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})},e.value))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Толерантность к риску"}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:u.map(e=>(0,n.jsx)(p,{className:"cursor-pointer transition-all duration-200 hover:shadow-md ".concat(d.riskTolerance===e.value?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"),onClick:()=>m({...d,riskTolerance:e.value}),children:(0,n.jsxs)(f,{className:"p-4",children:[(0,n.jsx)("h3",{className:"font-semibold mb-1",children:e.label}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})},e.value))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Временной горизонт планирования"}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:y.map(e=>(0,n.jsx)(p,{className:"cursor-pointer transition-all duration-200 hover:shadow-md ".concat(d.timeHorizon===e.value?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"),onClick:()=>m({...d,timeHorizon:e.value}),children:(0,n.jsxs)(f,{className:"p-4",children:[(0,n.jsx)("h3",{className:"font-semibold mb-1",children:e.label}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})},e.value))})]})]})]}),(0,n.jsxs)(p,{children:[(0,n.jsxs)(g,{children:[(0,n.jsxs)(j,{className:"flex items-center",children:[(0,n.jsx)(eC.Z,{className:"h-5 w-5 mr-2 text-purple-600"}),"Системные настройки"]}),(0,n.jsx)(D,{children:"Персонализация интерфейса и уведомлений"})]}),(0,n.jsxs)(f,{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Тема интерфейса"}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[{value:"light",label:"Светлая",description:"Классическая светлая тема"},{value:"dark",label:"Темная",description:"Темная тема для работы"},{value:"auto",label:"Авто",description:"Автоматический выбор"}].map(e=>(0,n.jsx)(p,{className:"cursor-pointer transition-all duration-200 hover:shadow-md ".concat(d.theme===e.value?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"),onClick:()=>m({...d,theme:e.value}),children:(0,n.jsxs)(f,{className:"p-4",children:[(0,n.jsx)("h3",{className:"font-semibold mb-1",children:e.label}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})},e.value))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Уведомления"}),(0,n.jsx)(p,{className:"cursor-pointer transition-all duration-200 hover:shadow-md ".concat(d.notifications?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"),onClick:()=>m({...d,notifications:!d.notifications}),children:(0,n.jsx)(f,{className:"p-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold",children:"Включить уведомления"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Получать уведомления о важных событиях"})]}),(0,n.jsx)("div",{className:"w-12 h-6 rounded-full transition-colors ".concat(d.notifications?"bg-blue-500":"bg-gray-300"),children:(0,n.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(d.notifications?"translate-x-6":"translate-x-0.5"," mt-0.5")})})]})})})]})]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(h,{variant:"outline",onClick:()=>{o(),r("welcome")},className:"text-red-600 border-red-300 hover:bg-red-50",children:"Сбросить настройки"}),(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)(h,{variant:"outline",onClick:()=>r("dashboard"),children:"Отмена"}),(0,n.jsx)(h,{onClick:()=>{l(d),r("dashboard")},className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:"Сохранить настройки"})]})]})]})})]})}let eA={retail:{name:'Сеть магазинов электроники "TechStore"',period:"2022-01-01 to 2024-12-31",events:[{date:"2022-01-15",title:"Открытие первого магазина",impact:"positive",description:"Запуск первой точки продаж площадью 150 м\xb2 в торговом центре"},{date:"2022-06-01",title:"Летний спад продаж",impact:"negative",description:"Сезонное снижение спроса на электронику летом (-25%)"},{date:"2022-11-15",title:"Черная пятница",impact:"positive",description:"Рекордные продажи во время акции (+180% к обычному дню)"},{date:"2023-01-10",title:"Новогодние распродажи",impact:"positive",description:"Высокий спрос на технику после праздников (+120%)"},{date:"2023-03-15",title:"Открытие второго магазина",impact:"positive",description:"Расширение сети - новая точка в другом районе города"},{date:"2023-07-01",title:"Запуск интернет-магазина",impact:"positive",description:"Выход в онлайн, доставка по всему городу"},{date:"2023-09-01",title:"Проблемы с поставками",impact:"negative",description:"Задержки поставок из-за логистических проблем"},{date:"2023-11-20",title:"Черная пятница 2023",impact:"positive",description:"Побит рекорд продаж прошлого года (+250%)"},{date:"2024-01-05",title:"Запуск программы лояльности",impact:"positive",description:"Увеличение повторных покупок на 35%"},{date:"2024-05-15",title:"Открытие третьего магазина",impact:"positive",description:"Выход в соседний город, площадь 200 м\xb2"},{date:"2024-08-01",title:"Сезонный спад",impact:"negative",description:"Традиционный летний спад активности"}],generateTransactions:()=>{let e=[],t=new Date("2022-01-01"),s=new Date("2024-12-31"),n=new Date(t);for(;n<=s;){let t=n.getMonth(),s=n.getFullYear(),a=1;10===t||11===t?a=2.5:0===t?a=1.8:t>=5&&t<=7&&(a=.6);let i=1+(s-2022)*.4+n.getMonth()/12*.4,c=Math.round(8e5*a*i),l=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();for(let s=1;s<=l;s++){let a=new Date(n.getFullYear(),n.getMonth(),s),i=a.getDay(),r=1;0===i?r=.7:6===i?r=1.8:5===i&&(r=1.3),10===t&&5===i&&s>=22&&(r=5),11===t&&s>=20&&(r*=2);let o=.7+.6*Math.random(),d=Math.round(c/l*r*o);d>1e4&&e.push({date:a.toISOString().split("T")[0],description:r>2?"Пиковые продажи электроники":"Продажи электроники",amount:d,type:"income",category:"Розничные продажи"})}e.push({date:new Date(n.getFullYear(),n.getMonth(),5).toISOString().split("T")[0],description:"Закупка товара у поставщиков",amount:-Math.round(.4*c),type:"expense",category:"Закупка товара"});let r=2022===s?1:2023===s?t>=2?2:1:t>=4?3:2;e.push({date:new Date(n.getFullYear(),n.getMonth(),1).toISOString().split("T")[0],description:"Аренда помещений (".concat(r," магазина)"),amount:-(12e4*r),type:"expense",category:"Аренда"});let o=5*r+2;e.push({date:new Date(n.getFullYear(),n.getMonth(),10).toISOString().split("T")[0],description:"Зарплата сотрудникам (".concat(o," чел)"),amount:-(5e4*o),type:"expense",category:"Зарплата"});let d=Math.round(.08*c*a);e.push({date:new Date(n.getFullYear(),n.getMonth(),15).toISOString().split("T")[0],description:"Реклама и маркетинг",amount:-d,type:"expense",category:"Маркетинг"}),e.push({date:new Date(n.getFullYear(),n.getMonth(),20).toISOString().split("T")[0],description:"Коммунальные платежи",amount:-(35e3*r),type:"expense",category:"Коммунальные"}),n.setMonth(n.getMonth()+1)}return e.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())}},services:{name:'Маркетинговое агентство "BrandBoost"',period:"2022-01-01 to 2024-12-31",events:[{date:"2022-01-10",title:"Основание агентства",impact:"positive",description:"Команда из 4 человек, первые 2 клиента"},{date:"2022-04-15",title:"Крупный контракт",impact:"positive",description:"Подписан годовой контракт с федеральной сетью на 3 млн руб"},{date:"2022-08-01",title:"Расширение команды",impact:"neutral",description:"Наняты 3 дополнительных специалиста"},{date:"2022-12-15",title:"Потеря клиента",impact:"negative",description:"Клиент ушел к конкуренту (-400 тыс руб/мес)"},{date:"2023-02-20",title:"Запуск нового направления",impact:"positive",description:"Добавлен SMM и таргетированная реклама"},{date:"2023-06-10",title:"3 новых клиента за месяц",impact:"positive",description:"Успешная рекламная кампания принесла новых клиентов"},{date:"2023-09-01",title:"Открытие офиса",impact:"neutral",description:"Переезд из коворкинга в собственный офис"},{date:"2023-12-01",title:"Проблемы с оплатой",impact:"negative",description:"Крупный клиент задерживает платеж на 2 месяца"},{date:"2024-03-15",title:"Получение отраслевой премии",impact:"positive",description:'Победа в конкурсе "Лучшее агентство года"'},{date:"2024-06-20",title:"Расширение на регионы",impact:"positive",description:"Открыт филиал в Санкт-Петербурге"},{date:"2024-10-01",title:"Запуск AI-инструментов",impact:"positive",description:"Внедрение ИИ для аналитики, рост эффективности на 40%"}],generateTransactions:()=>{let e=[],t=new Date("2022-01-01"),s=new Date("2024-12-31"),n=new Date(t),a=2;for(;n<=s;){let t=n.getFullYear(),s=n.getMonth();a=2022===t?Math.min(2+Math.floor(s/2),8):2023===t?Math.min(8+Math.floor(s/2),15):Math.min(15+Math.floor(s/1.5),25);for(let t=0;t<a;t++){let s=5+Math.floor(20*Math.random()),a=25e4*(.7+.6*Math.random());e.push({date:new Date(n.getFullYear(),n.getMonth(),s).toISOString().split("T")[0],description:"Оплата услуг от клиента #".concat(t+1),amount:Math.round(a),type:"income",category:"Маркетинговые услуги"})}let i=Math.floor(4+.4*a);e.push({date:new Date(n.getFullYear(),n.getMonth(),10).toISOString().split("T")[0],description:"Зарплата команде (".concat(i," чел)"),amount:-(8e4*i),type:"expense",category:"Зарплата"}),t>2023||2023===t&&s>=8?e.push({date:new Date(n.getFullYear(),n.getMonth(),1).toISOString().split("T")[0],description:"Аренда офиса",amount:-18e4,type:"expense",category:"Аренда"}):e.push({date:new Date(n.getFullYear(),n.getMonth(),1).toISOString().split("T")[0],description:"Коворкинг",amount:-(8e3*i),type:"expense",category:"Аренда"});let c=Math.round(3e4*a);e.push({date:new Date(n.getFullYear(),n.getMonth(),15).toISOString().split("T")[0],description:"Реклама и лидогенерация",amount:-c,type:"expense",category:"Маркетинг"});let l=Math.floor(5+t-2022);e.push({date:new Date(n.getFullYear(),n.getMonth(),5).toISOString().split("T")[0],description:"Подписки на сервисы и инструменты",amount:-(12e3*l),type:"expense",category:"Программное обеспечение"}),n.setMonth(n.getMonth()+1)}return e.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())}},ecommerce:{name:'Интернет-магазин одежды "FashionHub"',period:"2022-01-01 to 2024-12-31",events:[{date:"2022-01-20",title:"Запуск магазина",impact:"positive",description:"Запуск сайта с 500 товарами"},{date:"2022-03-15",title:"Первая вирусная реклама",impact:"positive",description:"Видео в TikTok набрало 2 млн просмотров, рост продаж в 5 раз"},{date:"2022-06-01",title:"Проблемы с качеством",impact:"negative",description:"Партия бракованного товара, возвраты и негатив"},{date:"2022-11-01",title:"Подготовка к Черной пятнице",impact:"positive",description:"Увеличение склада, найм доп. персонала"},{date:"2022-11-25",title:"Рекордная Черная пятница",impact:"positive",description:"1200 заказов за день, выручка 4.5 млн руб"},{date:"2023-02-14",title:"День Святого Валентина",impact:"positive",description:"Специальная коллекция, рост на 180%"},{date:"2023-05-01",title:"Запуск мобильного приложения",impact:"positive",description:"Приложение для iOS и Android, +35% к конверсии"},{date:"2023-08-15",title:"Летняя распродажа",impact:"neutral",description:"Очистка склада от летней коллекции"},{date:"2023-11-20",title:"Черная пятница 2023",impact:"positive",description:"2500 заказов, выручка 12 млн руб за выходные"},{date:"2024-01-10",title:"Запуск собственного производства",impact:"positive",description:"Начало производства собственной линейки одежды"},{date:"2024-03-08",title:"8 марта - пик продаж",impact:"positive",description:"Рекордный день, 8.5 млн руб за сутки"},{date:"2024-06-01",title:"Расширение ассортимента",impact:"positive",description:"Добавлены аксессуары и обувь, +3000 SKU"},{date:"2024-09-01",title:"Проблемы с логистикой",impact:"negative",description:"Срыв сроков доставки, много негативных отзывов"}],generateTransactions:()=>{let e=[],t=new Date("2022-01-20"),s=new Date("2024-12-31"),n=new Date(t),a=20,i=3500;for(;n<=s;){let t=n.getMonth(),s=n.getFullYear(),c=n.getDate(),l=(s-2022)*12+t;a=Math.floor(20+3*l),i=3500+50*l;let r=1;10===t||11===t?r=3:0===t||1===t?r=1.5:2===t?r=2:t>=5&&t<=7&&(r=.7),10===t&&c>=24&&c<=27&&(r=5),2===t&&c>=6&&c<=9&&(r=3.5),1===t&&14===c&&(r=2.5);let o=Math.floor(a*r*(.8+.4*Math.random())),d=Math.round(o*i*(.9+.2*Math.random()));d>1e5&&e.push({date:n.toISOString().split("T")[0],description:"Продажи (".concat(o," заказов)"),amount:d,type:"income",category:"Интернет-продажи"}),n.setDate(n.getDate()+1)}for(n=new Date("2022-02-01");n<=s;){let t=n.getFullYear(),s=n.getMonth(),c=(t-2022)*12+s,l=a*i*30;e.push({date:new Date(n.getFullYear(),n.getMonth(),3).toISOString().split("T")[0],description:"Закупка товара у поставщиков",amount:-Math.round(.5*l),type:"expense",category:"Закупка товара"}),e.push({date:new Date(n.getFullYear(),n.getMonth(),5).toISOString().split("T")[0],description:"Логистика и доставка",amount:-Math.round(.08*l),type:"expense",category:"Логистика"}),e.push({date:new Date(n.getFullYear(),n.getMonth(),10).toISOString().split("T")[0],description:"Таргетированная реклама",amount:-Math.round(.15*l),type:"expense",category:"Маркетинг"});let r=Math.floor(5+.3*c);e.push({date:new Date(n.getFullYear(),n.getMonth(),10).toISOString().split("T")[0],description:"Зарплата (".concat(r," чел)"),amount:-(6e4*r),type:"expense",category:"Зарплата"});let o=Math.floor(100+10*c);e.push({date:new Date(n.getFullYear(),n.getMonth(),1).toISOString().split("T")[0],description:"Аренда склада ".concat(o," м\xb2"),amount:-(500*o),type:"expense",category:"Аренда"}),n.setMonth(n.getMonth()+1)}return e.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())}},construction:{name:'Строительная компания "СтройМастер"',period:"2022-01-01 to 2024-12-31",events:[{date:"2022-02-10",title:"Первый крупный проект",impact:"positive",description:"Контракт на строительство торгового центра (25 млн руб)"},{date:"2022-05-15",title:"Срыв сроков",impact:"negative",description:"Задержка поставки материалов, штраф 1.5 млн руб"},{date:"2022-09-01",title:"Завершение первого объекта",impact:"positive",description:"Сдача торгового центра, получение финальных 40%"},{date:"2023-01-20",title:"Два новых контракта",impact:"positive",description:"Жилой комплекс (40 млн) + офисное здание (18 млн)"},{date:"2023-04-10",title:"Покупка спецтехники",impact:"neutral",description:"Приобретение 3 единиц техники в лизинг"},{date:"2023-07-15",title:"Расширение бригад",impact:"neutral",description:"Наняны 2 дополнительные бригады (25 человек)"},{date:"2023-10-01",title:"Авария на объекте",impact:"negative",description:"Несчастный случай, остановка работ на 2 недели"},{date:"2024-01-15",title:"Сдача жилого комплекса",impact:"positive",description:"Досрочная сдача объекта, бонус от заказчика"},{date:"2024-03-20",title:"Государственный тендер",impact:"positive",description:"Победа в тендере на строительство школы (35 млн)"},{date:"2024-06-10",title:"Проблемы с подрядчиком",impact:"negative",description:"Некачественные материалы, переделка работ"},{date:"2024-09-01",title:"Запуск 3 объектов одновременно",impact:"neutral",description:"Пиковая загрузка, 120 человек на объектах"}],generateTransactions:()=>{let e=[];e.push({date:"2022-02-15",description:"Аванс 30% - строительство ТЦ",amount:75e5,type:"income",category:"Строительные работы"},{date:"2022-02-20",description:"Закупка материалов для ТЦ",amount:-32e5,type:"expense",category:"Материалы"},{date:"2022-05-20",description:"Промежуточный платеж 30% - ТЦ",amount:75e5,type:"income",category:"Строительные работы"},{date:"2022-05-25",description:"Штраф за срыв сроков",amount:-15e5,type:"expense",category:"Штрафы"},{date:"2022-09-10",description:"Финальный платеж 40% - ТЦ",amount:1e7,type:"income",category:"Строительные работы"}),e.push({date:"2023-01-25",description:"Аванс 20% - жилой комплекс",amount:8e6,type:"income",category:"Строительные работы"},{date:"2023-02-05",description:"Закупка материалов для ЖК",amount:-45e5,type:"expense",category:"Материалы"},{date:"2023-05-15",description:"Промежуточный платеж - ЖК",amount:12e6,type:"income",category:"Строительные работы"},{date:"2023-09-20",description:"Промежуточный платеж - ЖК",amount:12e6,type:"income",category:"Строительные работы"},{date:"2024-01-18",description:"Финальный платеж + бонус - ЖК",amount:95e5,type:"income",category:"Строительные работы"}),e.push({date:"2023-02-10",description:"Аванс 25% - офисное здание",amount:45e5,type:"income",category:"Строительные работы"},{date:"2023-05-20",description:"Промежуточный платеж - офис",amount:675e4,type:"income",category:"Строительные работы"},{date:"2023-08-25",description:"Финальный платеж - офис",amount:675e4,type:"income",category:"Строительные работы"}),e.push({date:"2024-03-25",description:"Аванс 30% - строительство школы",amount:105e5,type:"income",category:"Государственный контракт"},{date:"2024-04-05",description:"Закупка материалов для школы",amount:-52e5,type:"expense",category:"Материалы"},{date:"2024-07-15",description:"Промежуточный платеж - школа",amount:105e5,type:"income",category:"Государственный контракт"});let t=new Date("2022-01-01"),s=new Date("2024-12-31"),n=new Date(t);for(;n<=s;){let t=n.getFullYear(),s=n.getMonth(),a=0;2022===t&&s>=1&&s<=8&&(a=1),2023===t&&(a=s<=7?3:2),2024===t&&(a=s<=8?3:2);let i=25*a+10;e.push({date:new Date(n.getFullYear(),n.getMonth(),10).toISOString().split("T")[0],description:"Зарплата (".concat(i," чел, ").concat(a," проектов)"),amount:-(65e3*i),type:"expense",category:"Зарплата"}),e.push({date:new Date(n.getFullYear(),n.getMonth(),1).toISOString().split("T")[0],description:"Аренда офиса и склада",amount:-25e4,type:"expense",category:"Аренда"}),(t>2023||2023===t&&s>=3)&&e.push({date:new Date(n.getFullYear(),n.getMonth(),5).toISOString().split("T")[0],description:"Лизинг спецтехники",amount:-32e4,type:"expense",category:"Лизинг"}),a>0&&e.push({date:new Date(n.getFullYear(),n.getMonth(),15).toISOString().split("T")[0],description:"Расходные материалы и ГСМ",amount:-(18e4*a),type:"expense",category:"Операционные расходы"}),n.setMonth(n.getMonth()+1)}return e.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())}},manufacturing:{name:'Мебельная фабрика "КомфортДом"',period:"2022-01-01 to 2024-12-31",events:[{date:"2022-01-15",title:"Запуск производства",impact:"positive",description:"Открытие цеха площадью 500 м\xb2, 15 сотрудников"},{date:"2022-04-20",title:"Контракт с сетью магазинов",impact:"positive",description:"Регулярные поставки мебели в 12 магазинов"},{date:"2022-07-10",title:"Поломка оборудования",impact:"negative",description:"Выход из строя основного станка, простой 2 недели"},{date:"2022-10-15",title:"Покупка нового оборудования",impact:"positive",description:"Приобретение ЧПУ станка, рост производительности в 2 раза"},{date:"2023-02-01",title:"Запуск собственной линейки",impact:"positive",description:"Дизайнерская коллекция под собственным брендом"},{date:"2023-05-20",title:"Расширение цеха",impact:"neutral",description:"Аренда дополнительных 300 м\xb2, найм 10 человек"},{date:"2023-09-01",title:"Рост цен на материалы",impact:"negative",description:"Увеличение стоимости древесины на 35%"},{date:"2023-11-15",title:"Выход на маркетплейсы",impact:"positive",description:"Начало продаж на Ozon и Wildberries"},{date:"2024-01-10",title:"Крупный B2B контракт",impact:"positive",description:"Поставки мебели для сети отелей (20 млн руб/год)"},{date:"2024-04-15",title:"Запуск второй смены",impact:"neutral",description:"Переход на двухсменный режим работы"},{date:"2024-08-01",title:"Сертификация ISO",impact:"positive",description:"Получение сертификата качества ISO 9001"}],generateTransactions:()=>{let e=[],t=new Date("2022-01-01"),s=new Date("2024-12-31"),n=new Date(t);for(;n<=s;){let t=n.getFullYear(),s=n.getMonth(),a=(t-2022)*12+s,i=1+.08*a;(t>2022||2022===t&&s>=9)&&(i*=1.8),(t>2023||2023===t&&s>=4)&&(i*=1.5),2024===t&&s>=3&&(i*=1.7);let c=Math.round(12e5*i);e.push({date:new Date(n.getFullYear(),n.getMonth(),10).toISOString().split("T")[0],description:"Розничные продажи мебели",amount:Math.round(.3*c),type:"income",category:"Розничные продажи"}),e.push({date:new Date(n.getFullYear(),n.getMonth(),20).toISOString().split("T")[0],description:"Оптовые поставки в магазины",amount:Math.round(.5*c),type:"income",category:"Оптовые продажи"}),(t>2023||2023===t&&s>=10)&&e.push({date:new Date(n.getFullYear(),n.getMonth(),25).toISOString().split("T")[0],description:"Продажи на маркетплейсах",amount:Math.round(.2*c),type:"income",category:"Маркетплейсы"});let l=1;(t>2023||2023===t&&s>=8)&&(l=1.35),e.push({date:new Date(n.getFullYear(),n.getMonth(),5).toISOString().split("T")[0],description:"Закупка древесины и фурнитуры",amount:-Math.round(.4*c*l),type:"expense",category:"Материалы"});let r=15;(t>2023||2023===t&&s>=4)&&(r=25),2024===t&&s>=3&&(r=40),e.push({date:new Date(n.getFullYear(),n.getMonth(),10).toISOString().split("T")[0],description:"Зарплата производственному персоналу (".concat(r," чел)"),amount:-(55e3*r),type:"expense",category:"Зарплата"});let o=500;(t>2023||2023===t&&s>=4)&&(o=800),e.push({date:new Date(n.getFullYear(),n.getMonth(),1).toISOString().split("T")[0],description:"Аренда производственного цеха ".concat(o," м\xb2"),amount:-(400*o),type:"expense",category:"Аренда"}),e.push({date:new Date(n.getFullYear(),n.getMonth(),15).toISOString().split("T")[0],description:"Коммунальные платежи и электроэнергия",amount:-Math.round(150*o*(r/15)),type:"expense",category:"Коммунальные"}),n.setMonth(n.getMonth()+1)}return e.push({date:"2022-10-20",description:"Покупка ЧПУ станка",amount:-28e5,type:"expense",category:"Оборудование"},{date:"2022-07-15",description:"Ремонт оборудования после поломки",amount:-45e4,type:"expense",category:"Ремонт"},{date:"2023-05-25",description:"Ремонт и обустройство нового цеха",amount:-68e4,type:"expense",category:"Ремонт"},{date:"2024-08-10",description:"Получение сертификата ISO 9001",amount:-35e4,type:"expense",category:"Сертификация"}),e.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())}},logistics:{name:'Транспортная компания "БыстраяДоставка"',period:"2022-01-01 to 2024-12-31",events:[{date:"2022-01-20",title:"Основание компании",impact:"positive",description:"Старт с 5 автомобилями и 8 водителями"},{date:"2022-04-10",title:"Первый крупный контракт",impact:"positive",description:"Регулярные перевозки для интернет-магазина"},{date:"2022-07-15",title:"Рост цен на топливо",impact:"negative",description:"Бензин подорожал на 18%, снижение маржи"},{date:"2022-10-01",title:"Расширение автопарка",impact:"neutral",description:"Покупка 3 дополнительных грузовиков в лизинг"},{date:"2023-01-15",title:"Запуск мобильного приложения",impact:"positive",description:"Приложение для клиентов и водителей, +40% эффективности"},{date:"2023-03-20",title:"ДТП с грузовиком",impact:"negative",description:"Авария, ремонт + компенсация за поврежденный груз"},{date:"2023-06-10",title:"Контракт с маркетплейсом",impact:"positive",description:"Доставка для крупного маркетплейса"},{date:"2023-09-01",title:"Открытие склада",impact:"neutral",description:"Собственный распределительный центр 1000 м\xb2"},{date:"2023-11-20",title:"Пиковая нагрузка",impact:"positive",description:"Черная пятница: 3500 доставок за неделю"},{date:"2024-02-15",title:"Выход в регионы",impact:"positive",description:"Межгород: доставка в 15 городов области"},{date:"2024-05-20",title:"Покупка электромобилей",impact:"neutral",description:"10 электромобилей для городской доставки"},{date:"2024-09-01",title:"Автоматизация склада",impact:"positive",description:"Внедрение WMS системы, рост скорости на 60%"}],generateTransactions:()=>{let e=[],t=new Date("2022-01-20"),s=new Date("2024-12-31"),n=new Date(t),a=5,i=8,c=30;for(;n<=s;){let t=n.getFullYear(),s=n.getMonth(),l=n.getDate(),r=(t-2022)*12+s-1;i=Math.floor(1.6*(a=5+Math.floor(.5*r))),c=Math.floor(30+4*r);let o=1;10===s||11===s?o=2.5:0===s?o=1.5:s>=5&&s<=7&&(o=.8),10===s&&l>=20&&l<=27&&(o=4);let d=Math.floor(c*o*(.85+.3*Math.random())),m=Math.round(450*d*(.9+.2*Math.random()));m>2e4&&e.push({date:n.toISOString().split("T")[0],description:"Доставки (".concat(d," заказов)"),amount:m,type:"income",category:"Услуги доставки"}),n.setDate(n.getDate()+1)}for(n=new Date("2022-02-01");n<=s;){let t=n.getFullYear(),s=n.getMonth(),c=(t-2022)*12+s-1;i=Math.floor(1.6*(a=5+Math.floor(.5*c)));let l=1;(t>2022||2022===t&&s>=6)&&(l=1.18),t>=2024&&(l=1.25);let r=3e3*a,o=Math.round(5*r*l);if(e.push({date:new Date(n.getFullYear(),n.getMonth(),5).toISOString().split("T")[0],description:"Топливо (".concat(a," автомобилей)"),amount:-o,type:"expense",category:"Топливо"}),e.push({date:new Date(n.getFullYear(),n.getMonth(),10).toISOString().split("T")[0],description:"Зарплата водителям (".concat(i," чел)"),amount:-(55e3*i),type:"expense",category:"Зарплата"}),e.push({date:new Date(n.getFullYear(),n.getMonth(),15).toISOString().split("T")[0],description:"ТО и ремонт автомобилей",amount:-(25e3*a),type:"expense",category:"Обслуживание"}),t>2022||2022===t&&s>=9){let t=Math.floor(.4*a);e.push({date:new Date(n.getFullYear(),n.getMonth(),5).toISOString().split("T")[0],description:"Лизинг автомобилей (".concat(t," шт)"),amount:-(85e3*t),type:"expense",category:"Лизинг"})}(t>2023||2023===t&&s>=8)&&e.push({date:new Date(n.getFullYear(),n.getMonth(),1).toISOString().split("T")[0],description:"Аренда распределительного центра 1000 м\xb2",amount:-45e4,type:"expense",category:"Аренда"}),e.push({date:new Date(n.getFullYear(),n.getMonth(),20).toISOString().split("T")[0],description:"Страхование ОСАГО и КАСКО",amount:-(18e3*a),type:"expense",category:"Страхование"}),n.setMonth(n.getMonth()+1)}return e.push({date:"2023-03-25",description:"Ремонт после ДТП + компенсация",amount:-85e4,type:"expense",category:"Ремонт"},{date:"2023-09-10",description:"Обустройство распределительного центра",amount:-12e5,type:"expense",category:"Инфраструктура"},{date:"2024-05-25",description:"Покупка 10 электромобилей",amount:-75e5,type:"expense",category:"Автопарк"},{date:"2024-09-05",description:"Внедрение WMS системы",amount:-65e4,type:"expense",category:"Программное обеспечение"}),e.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())}}};function generateRealisticForecast(e){let{historicalData:t,daysAhead:s=90,seasonality:n=.5,volatility:a=.3}=e;if(!t||0===t.length)return generateDefaultForecast(s);let i=analyzeHistoricalData(t),c=[],l=new Date;for(let e=0;e<s;e++){let t=new Date(l);t.setDate(t.getDate()+e);let r=t.getDay(),o=t.getDate(),d=1;d=0===r||6===r?.4:5===r?1.3:1+(r-1)*.05;let m=1;o<=5||o>=25?m=1.4:o>=10&&o<=20&&(m=.8);let x=1+Math.sin(e/30*Math.PI)*n,u=1+e/s*.15,h=1+(Math.random()-.5)*a,p=i.avgDailyBalance,g=Math.round(p*d*m*x*u*h),j=1+e/s*.5,D=Math.round(g*(.7-.3*a)*j),f=Math.round(g*(1.3+.3*a)*j),y=Math.max(.5,.95-e/s*.45);c.push({date:t.toISOString().split("T")[0],p5:D,p50:g,p95:f,confidence:Math.round(100*y)/100})}return c}function analyzeHistoricalData(e){var t,s;let n=e.slice(-90);if(0===n.length)return{avgDailyBalance:5e5,trend:"stable",volatility:.3};let a=n.reduce((e,t)=>e+t.balance,0)/n.length,i=(null===(t=n[0])||void 0===t?void 0:t.balance)||0,c=(null===(s=n[n.length-1])||void 0===s?void 0:s.balance)||0,l=n.map(e=>e.balance),r=l.reduce((e,t)=>e+Math.pow(t-a,2),0)/l.length;return{avgDailyBalance:Math.max(a,1e5),trend:c>1.1*i?"growing":c<.9*i?"declining":"stable",volatility:Math.min(Math.sqrt(r)/a,1)}}function generateDefaultForecast(e){let t=[],s=new Date;for(let n=0;n<e;n++){let a=new Date(s);a.setDate(a.getDate()+n);let i=a.getDay(),c=0===i||6===i?.5:1,l=1+n/e*.1,r=.9+.2*Math.random(),o=Math.round(5e5*c*l*r),d=Math.round(.7*o),m=Math.round(1.3*o),x=Math.max(.5,.9-n/e*.4);t.push({date:a.toISOString().split("T")[0],p5:d,p50:o,p95:m,confidence:Math.round(100*x)/100})}return t}function generateAdvancedForecast(e,t){let s=generateRealisticForecast({historicalData:e,daysAhead:90,seasonality:t.seasonality,volatility:t.volatility});return s.map((e,t)=>{let s=new Date(e.date),n=s.getDate(),a=s.getDay(),i={...e};return(5===n||20===n)&&(i.p50=Math.round(1.5*e.p50),i.p95=Math.round(1.6*e.p95),i.confidence=Math.min(.95,e.confidence+.1)),n>=12&&n<=18&&(i.p50=Math.round(.7*e.p50),i.p5=Math.round(.6*e.p5)),5===a&&Math.random()>.5&&(i.p95=Math.round(1.4*e.p95)),.05>Math.random()&&(i.p50=Math.round(e.p50*(Math.random()>.5?1.8:.5)),i.confidence=Math.max(.4,e.confidence-.2)),i})}let eF={retail:[{id:"retail-seasonal-peak",name:"Новогодний бум продаж",description:"Пик продаж в ноябре-декабре: выручка +150%, но нужен запас товара",impact:{revenue:2.5,costs:1.8,cashFlow:1.4},probability:.9,timeframe:"short",recommendations:["Заранее закупить товар на склад (сентябрь-октябрь)","Нанять временный персонал за месяц","Обеспечить кредитную линию на 2-3 млн руб","Договориться с поставщиками об отсрочке"],risks:["Непроданный товар после праздников","Кассовый разрыв при закупке","Нехватка персонала в пик"]},{id:"retail-summer-slump",name:"Летний спад продаж",description:"Июль-август: падение выручки на 40%, но расходы остаются",impact:{revenue:.6,costs:.95,cashFlow:.3},probability:.95,timeframe:"short",recommendations:["Создать резерв 1-2 млн руб к июню","Провести летние распродажи","Сократить закупки на 50%","Отправить персонал в отпуска"],risks:["Кассовый разрыв в июле-августе","Невозможность оплатить аренду","Необходимость экстренного кредита"]},{id:"retail-expansion",name:"Открытие нового магазина",description:"Инвестиции 5 млн руб, окупаемость 18 месяцев",impact:{revenue:1.6,costs:2.2,cashFlow:-3},probability:.5,timeframe:"long",recommendations:["Привлечь кредит 3-4 млн руб","Начинать в феврале-марте (не перед сезоном)","Первые 6 месяцев - убытки 300-500 тыс/мес","Резерв на операционку минимум 2 млн руб"],risks:["Низкая посещаемость первые месяцы","Недостаток оборотных средств","Конкуренция в новой локации"]}],services:[{id:"services-large-client",name:"Крупный клиент с отсрочкой",description:"Контракт 5 млн руб/год, но оплата через 60 дней",impact:{revenue:2,costs:1.3,cashFlow:-.5},probability:.7,timeframe:"medium",recommendations:["Факторинг дебиторки под 8-10%","Договориться об авансе 30%","Нанять команду за 2 месяца до старта","Кредитная линия 2 млн руб"],risks:["Кассовый разрыв первые 2 месяца","Клиент задерживает оплату еще дольше","Нехватка средств на зарплату"]},{id:"services-team-expansion",name:"Расширение команды",description:"Найм 5 специалистов: +400 тыс/мес расходов, рост выручки через 3 месяца",impact:{revenue:1.5,costs:1.4,cashFlow:-1.2},probability:.8,timeframe:"medium",recommendations:["Резерв 1.5 млн руб на 4 месяца","Начинать при runway > 12 мес","Сначала взять 2-3 человека, потом остальных","Договориться с новыми клиентами заранее"],risks:["Новички не приносят прибыль первые месяцы","Не найдены новые клиенты","Кассовый разрыв через 2-3 месяца"]},{id:"services-project-failure",name:"Срыв крупного проекта",description:"Клиент отменяет контракт на 3 млн руб, потеря 40% выручки",impact:{revenue:.6,costs:.95,cashFlow:.4},probability:.3,timeframe:"short",recommendations:["Диверсифицировать клиентов (не > 30% от 1 клиента)","Резерв на 3-6 месяцев","Быстро искать замену (1-2 недели)","Временно сократить зарплаты или персонал"],risks:["Банкротство при отсутствии резерва","Необходимость срочного кредита","Потеря репутации"]}],ecommerce:[{id:"ecommerce-viral-growth",name:"Вирусный рост после рекламы",description:"Заказы x10 за неделю: нужно масштабировать все",impact:{revenue:10,costs:8,cashFlow:-2},probability:.2,timeframe:"short",recommendations:["Кредит 5-10 млн руб на товар","Договориться с логистикой заранее","Автоматизация обработки заказов","Временные склады и персонал"],risks:["Не хватит товара (упущенная выручка)","Логистика не справится","Кассовый разрыв из-за роста"]},{id:"ecommerce-returns-wave",name:"Волна возвратов (брак)",description:"Партия брака: 30% возвратов, репутационный ущерб",impact:{revenue:.5,costs:1.2,cashFlow:.3},probability:.15,timeframe:"short",recommendations:["Страховка качества товара","Резерв 2-3 млн руб на возвраты","Быстрая замена брака (1-2 дня)","Компенсация клиентам (скидки)"],risks:["Потеря репутации","Блокировка на маркетплейсах","Судебные иски"]},{id:"ecommerce-marketplace-commission",name:"Повышение комиссии маркетплейса",description:"Комиссия с 10% до 20%: падение маржи в 2 раза",impact:{revenue:1,costs:1.2,cashFlow:.7},probability:.4,timeframe:"medium",recommendations:["Запустить свой интернет-магазин","Поднять цены на 10-15%","Оптимизировать расходы на 20%","Договориться об индивидуальных условиях"],risks:["Падение продаж при росте цен","Потеря маржинальности","Необходимость смены бизнес-модели"]}],construction:[{id:"construction-payment-delay",name:"Задержка платежа от заказчика",description:"Заказчик задерживает 40% оплаты (10 млн) на 3 месяца",impact:{revenue:1,costs:1,cashFlow:-2},probability:.5,timeframe:"short",recommendations:["Кредитная линия 5-10 млн руб","Факторинг под уступку","Отсрочка оплаты поставщикам","Страхование рисков"],risks:["Остановка работ","Невозможность платить поставщикам","Штрафы за срыв сроков"]},{id:"construction-materials-price",name:"Рост цен на материалы",description:"Цены на стройматериалы +40%, маржа съедена",impact:{revenue:1,costs:1.4,cashFlow:.5},probability:.6,timeframe:"medium",recommendations:["Закупать материалы заранее","Индексация цен в договорах","Альтернативные поставщики","Пересмотр бюджета проекта"],risks:["Работа в убыток","Конфликт с заказчиком","Необходимость доп. финансирования"]},{id:"construction-new-project",name:"Взять 2 проекта одновременно",description:"Удвоение объема: нужно 20 млн оборотки",impact:{revenue:2.5,costs:2.3,cashFlow:-3},probability:.4,timeframe:"long",recommendations:["Кредит 15-20 млн руб","Найм 2 бригад (50 человек)","Лизинг доп. техники","Резерв на 3-4 месяца"],risks:["Нехватка оборотных средств","Проблемы с качеством","Срыв сроков"]}],manufacturing:[{id:"manufacturing-equipment-upgrade",name:"Модернизация оборудования",description:"Покупка нового станка: 3 млн руб, +50% производительности",impact:{revenue:1.5,costs:3,cashFlow:-2.5},probability:.7,timeframe:"long",recommendations:["Лизинг оборудования (350 тыс/мес)","Начинать при runway > 12 мес","Обучение персонала 1-2 месяца","Окупаемость 18-24 месяца"],risks:["Долгая окупаемость","Проблемы с техникой","Нехватка заказов"]},{id:"manufacturing-raw-materials",name:"Закупка сырья впрок",description:"Купить древесину на год вперед: скидка 20%, но нужно 5 млн",impact:{revenue:1,costs:5,cashFlow:-4},probability:.5,timeframe:"medium",recommendations:["Кредит под товар 4-5 млн руб","Аренда доп. склада","Страхование товара","Экономия 1 млн руб/год"],risks:["Порча материалов","Падение цен","Кассовый разрыв"]},{id:"manufacturing-b2b-contract",name:"Крупный B2B контракт",description:"Поставки на 20 млн/год, но первый платеж через 90 дней",impact:{revenue:2,costs:1.5,cashFlow:-1.5},probability:.6,timeframe:"long",recommendations:["Факторинг дебиторки","Аванс минимум 30%","Кредитная линия 3-5 млн","Поэтапные поставки"],risks:["Кассовый разрыв первые месяцы","Клиент откажется","Не справимся с объемом"]}],logistics:[{id:"logistics-fuel-price",name:"Рост цен на топливо",description:"Бензин +30%: расходы +500 тыс/мес",impact:{revenue:1,costs:1.3,cashFlow:.7},probability:.7,timeframe:"short",recommendations:["Топливные карты с фиксированной ценой","Повысить тарифы на 10-15%","Оптимизация маршрутов","Переход на электромобили"],risks:["Потеря рентабельности","Отказ клиентов при росте тарифов","Убыточные рейсы"]},{id:"logistics-fleet-expansion",name:"Расширение автопарка",description:"5 новых грузовиков: 10 млн в лизинг, +70% выручки",impact:{revenue:1.7,costs:1.5,cashFlow:-8},probability:.5,timeframe:"long",recommendations:["Лизинг 10 млн (500 тыс/мес)","Найм 8 водителей","Новые контракты на 3-4 млн/мес","Резерв на первые 3 месяца"],risks:["Не найдены заказы","Простой техники","Высокие лизинговые платежи"]},{id:"logistics-accident",name:"Серьезное ДТП",description:"Авария с грузом: ремонт 800 тыс, компенсация 1.5 млн",impact:{revenue:.95,costs:2.3,cashFlow:-1},probability:.2,timeframe:"short",recommendations:["КАСКО + страхование груза","Резерв 2-3 млн руб","Контроль усталости водителей","Видеорегистраторы"],risks:["Потеря репутации","Потеря клиента","Судебные иски"]}]};function getIndustryScenarios(e){return eF[e]||[]}function loadIndustryData(e){console.log("\uD83C\uDFAF loadIndustryData called with: ".concat(e)),console.log("\uD83D\uDCCB Available datasets:",Object.keys(eA));let t=eA[e];if(!t)return console.warn("⚠️ Отрасль ".concat(e," не найдена")),null;console.log("\uD83D\uDCCA Загрузка данных для: ".concat(t.name));let s=t.generateTransactions(),n=[],a=0,i=1;s.forEach(e=>{a+=e.amount,n.push({id:String(i++),date:e.date,amount:e.amount,description:e.description,category:e.category,type:e.type,balance:a})});let c=generateARAPFromTransactions(s,t.name),l=generateLoansFromData(s,t.name),r=calculateKPIMetrics(n),o={seasonality:.5,volatility:.3};"retail"===e||"ecommerce"===e?(o.seasonality=.7,o.volatility=.4):"construction"===e?(o.seasonality=.6,o.volatility=.5):"services"===e&&(o.seasonality=.3,o.volatility=.2);let d=generateAdvancedForecast(n,o),m=getIndustryScenarios(e),x=k.find(t=>t.id===e),u=(null==x?void 0:x.financingOptions)||[];return console.log("✅ Загружено: ".concat(n.length," транзакций")),console.log("   \uD83D\uDCB0 Итоговый баланс: ".concat((a/1e6).toFixed(2)," млн руб")),console.log("   \uD83D\uDCCA События: ".concat(t.events.length)),console.log("   \uD83D\uDCC8 Прогноз: ".concat(d.length," дней")),console.log("   \uD83C\uDFB2 Сценарии: ".concat(m.length)),console.log("   \uD83D\uDCB3 Финансирование: ".concat(u.length," опций")),{bankStatements:n,arAp:c,loans:l,kpiMetrics:r,events:t.events,forecasts:d,scenarios:m,financingOptions:u}}function generateARAPFromTransactions(e,t){let s=[],n=1,a=1,i=e.slice(-90);return i.forEach(e=>{if("income"===e.type&&e.amount>5e5){let t=new Date(e.date);t.setDate(t.getDate()+30);let a=Math.random()>.3?e.amount:.7*e.amount;s.push({id:"ar-".concat(n++),counterparty:getCounterpartyName(e.category,"income"),type:"receivable",amount:e.amount,paidAmount:a,dueDate:t.toISOString().split("T")[0],status:a>=e.amount?"paid":"overdue"})}if("expense"===e.type&&Math.abs(e.amount)>3e5){let t=new Date(e.date);t.setDate(t.getDate()+20);let n=Math.random()>.2?Math.abs(e.amount):.6*Math.abs(e.amount);s.push({id:"ap-".concat(a++),counterparty:getCounterpartyName(e.category,"expense"),type:"payable",amount:Math.abs(e.amount),paidAmount:n,dueDate:t.toISOString().split("T")[0],status:n>=Math.abs(e.amount)?"paid":"pending"})}}),s}function getCounterpartyName(e,t){if("income"===t){let e=['ООО "Торговый Дом"',"ИП Иванов А.С.",'ООО "Розничные Сети"','ПАО "Корпорация"',"ИП Петров В.М.",'ООО "Партнер Плюс"'];return e[Math.floor(Math.random()*e.length)]}{let t={Материалы:['ООО "СтройМатериалы"',"ИП Сидоров",'ООО "МетТорг"'],"Закупка товара":['ООО "Оптовик"',"ИП Поставщик",'ООО "ТоварыПлюс"'],Оборудование:['ООО "ТехПром"',"ИП Техника",'ООО "ПромОборудование"'],Лизинг:['АО "Лизинговая компания"','ООО "АвтоЛизинг"'],Аренда:['ООО "Недвижимость"',"ИП Арендодатель"]}[e]||['ООО "Поставщик"'];return t[Math.floor(Math.random()*t.length)]}}function generateLoansFromData(e,t){let s=[],n=e.filter(e=>"expense"===e.type&&Math.abs(e.amount)>1e6);return n.forEach((e,t)=>{let n=new Date(e.date);n.setDate(n.getDate()-7);let a=new Date(n);a.setMonth(a.getMonth()+24);let i=Math.floor((new Date().getTime()-n.getTime())/2592e6),c=Math.abs(e.amount)/24,l=c*Math.min(i,24);s.push({id:"loan-".concat(t+1),lender:t%2==0?"ПАО Сбербанк":"АО Альфа-Банк",amount:Math.abs(e.amount),interestRate:12+4*Math.random(),startDate:n.toISOString().split("T")[0],maturityDate:a.toISOString().split("T")[0],monthlyPayment:c,remainingBalance:Math.max(0,Math.abs(e.amount)-l),purpose:e.description})}),s}function calculateKPIMetrics(e){var t;let s=new Date;s.setDate(s.getDate()-90);let n=e.filter(e=>new Date(e.date)>=s),a=n.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),i=Math.abs(n.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0)),c=a-i,l=i/3,r=(null===(t=e[e.length-1])||void 0===t?void 0:t.balance)||0,o=Math.max(l,1e5),d=r/o,m=r/o,x=0;return d<3?x+=40:d<6&&(x+=20),c<0?x+=30:c<.2*l&&(x+=15),m<1?x+=30:m<2&&(x+=10),{cashFlow:Math.round(c),runway:Math.round(10*d)/10,riskScore:Math.min(100,x),liquidityRatio:Math.round(10*m)/10,burnRate:Math.round(l),revenue:Math.round(a)}}function generateAIAnalysis(e,t,s){eA[t];let n={cashFlowHealth:e.cashFlow>0?"good":"warning",liquidityStatus:e.liquidityRatio>2?"good":e.liquidityRatio>1?"warning":"critical",riskLevel:e.riskScore<30?"low":e.riskScore<60?"medium":"high",insights:[{type:"cashflow",severity:e.cashFlow>0?"info":"warning",title:e.cashFlow>0?"Положительный денежный поток":"Отрицательный денежный поток",description:"За последние 3 месяца денежный поток составил ".concat((e.cashFlow/1e6).toFixed(2)," млн руб."),recommendation:e.cashFlow<0?"Необходимо сократить расходы или увеличить доходы":"Продолжайте поддерживать положительную динамику"},{type:"runway",severity:e.runway<3?"critical":e.runway<6?"warning":"info",title:"Runway: ".concat(e.runway," месяцев"),description:"При текущих расходах денег хватит на ".concat(e.runway," месяцев."),recommendation:e.runway<6?"Рекомендуется рассмотреть варианты привлечения финансирования":"Runway находится на безопасном уровне"}],recommendations:[{category:"financing",priority:e.cashFlow<0?"high":"medium",title:"Оптимизация денежного потока",description:"Рассмотрите факторинг или кредитную линию для стабилизации денежного потока",expectedImpact:"+20% ликвидности",timeframe:"1-3 месяца"}],forecastSummary:{next30Days:{expectedInflow:(e.revenue||0)/3,expectedOutflow:e.burnRate,netChange:(e.revenue||0)/3-e.burnRate,confidence:.85},next90Days:{expectedInflow:e.revenue||0,expectedOutflow:3*e.burnRate,netChange:(e.revenue||0)-3*e.burnRate,confidence:.7}}};return n}function Home(){let[e,t]=(0,a.useState)(!1),{currentPage:s,userPreferences:i,selectedIndustry:c,kpiMetrics:l,bankStatements:r,setCurrentPage:o,setUserPreferences:d,setSelectedIndustry:m,setBankStatements:x,setARAP:u,setLoans:h,setForecasts:p,setKPIMetrics:g,setAIAnalysis:j,setScenarios:D,setFinancingOptions:f}=useAppStoreHydrated();return((0,a.useEffect)(()=>{t(!0)},[]),(0,a.useEffect)(()=>{e&&!c&&"welcome"!==s&&"personalization"!==s&&(console.log("\uD83D\uDCCB Нет выбранной отрасли, переходим на персонализацию"),o("personalization"))},[e,c,s,o]),(0,a.useEffect)(()=>{if(console.log("\uD83D\uDD04 useEffect triggered:",{isClient:e,selectedIndustry:null==c?void 0:c.id,hasKpiMetrics:!!l,hasBankStatements:r.length>0}),e&&c&&(!l||0===r.length)){console.log("\uD83D\uDCCA Загрузка реалистичных данных для отрасли: ".concat(c.id));try{let e=loadIndustryData(c.id);if(console.log("\uD83D\uDCE6 industryData:",e),e){console.log("✅ Данные успешно загружены!"),console.log("\uD83D\uDCBE Сохраняем bankStatements:",e.bankStatements.length,"записей"),console.log("\uD83D\uDCBE Сохраняем kpiMetrics:",e.kpiMetrics),x(e.bankStatements),u(e.arAp),h(e.loans),g(e.kpiMetrics),setTimeout(()=>{console.log("\uD83D\uDD0D Проверка после сохранения - kpiMetrics:",l),console.log("\uD83D\uDD0D Проверка после сохранения - bankStatements:",r.length)},100),e.forecasts&&(p(e.forecasts),console.log("\uD83D\uDCC8 Прогноз основан на реальных данных отрасли")),e.scenarios&&(D(e.scenarios),console.log("\uD83C\uDFB2 Сценарии загружены для отрасли"));let t=generateAIAnalysis(e.kpiMetrics,c.id,e.events);j(t),e.financingOptions&&(f(e.financingOptions),console.log("\uD83D\uDCB0 Опции финансирования загружены"))}}catch(e){console.error("❌ Ошибка загрузки данных:",e)}}else e&&!c&&console.warn("⚠️ selectedIndustry не установлен!")},[e,c,l,r,x,u,h,p,g,j,D,f]),e)?(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(()=>{switch(s){case"welcome":default:return(0,n.jsx)(WelcomePage,{});case"personalization":return(0,n.jsx)(PersonalizationPage,{});case"ai-welcome":return(0,n.jsx)(AIWelcomePage,{});case"dashboard":return(0,n.jsx)(MainDashboard,{});case"settings":return(0,n.jsx)(SettingsPage,{})}})()}):(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Загрузка..."})]})})}}},function(e){e.O(0,[889,971,472,744],function(){return e(e.s=58159)}),_N_E=e.O()}]);