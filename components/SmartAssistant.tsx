'use client';

import { useState, useRef, useEffect } from 'react';
import { useAppStoreHydrated } from '@/lib/hooks';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Brain, Send, Bot, User, Sparkles } from 'lucide-react';

interface SmartAssistantProps {
  isFullScreen?: boolean;
}

interface ChatMessage {
  id: string;
  role: 'user' | 'assistant';
  content: string;
  timestamp: string;
  actions?: Array<{
    id: string;
    label: string;
    action: string;
    icon: string;
  }>;
}

export default function SmartAssistant({ isFullScreen = false }: SmartAssistantProps) {
  const {
    chatMessages,
    addChatMessage,
    kpiMetrics,
    selectedIndustry,
    bankStatements,
  } = useAppStoreHydrated();

  const [inputMessage, setInputMessage] = useState('');
  const [isTyping, setIsTyping] = useState(false);
  const messagesEndRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  }, [chatMessages]);

  const hasData = bankStatements.length > 0 || kpiMetrics || selectedIndustry;

  // –£–º–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
  const analyzeMessageContext = (message: string) => {
    const msg = message.toLowerCase().trim();
    
    // –í—ã—á–∏—Å–ª—è–µ–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–∞
    const scores = {
      greeting: 0,
      gratitude: 0,
      cashflow: 0,
      risks: 0,
      recommendations: 0,
      analysis: 0,
      financing: 0,
      scenarios: 0,
    };

    // –ü–†–ò–í–ï–¢–°–¢–í–ò–ï
    if (/^(–ø—Ä–∏–≤–µ—Ç|hello|hi|–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π|–¥–æ–±—Ä)/i.test(msg)) scores.greeting += 10;
    if (/—É—Ç—Ä|–¥–µ–Ω—å|–≤–µ—á–µ—Ä/.test(msg)) scores.greeting += 5;
    
    // –ë–õ–ê–ì–û–î–ê–†–ù–û–°–¢–¨
    if (/—Å–ø–∞—Å–∏–±–æ|–±–ª–∞–≥–æ–¥–∞—Ä|thanks|thank/.test(msg)) scores.gratitude += 10;
    
    // –î–ï–ù–ï–ñ–ù–´–ï –ü–û–¢–û–ö–ò
    if (/–¥–µ–Ω—å–≥|–¥–µ–Ω–µ–∂–Ω|–ø–æ—Ç–æ–∫|–¥–¥—Å|–∫–∞—Å—Å/.test(msg)) scores.cashflow += 8;
    if (/–ø—Ä–æ–≥–Ω–æ–∑|forecast/.test(msg)) scores.cashflow += 7;
    if (/—Ñ–∏–Ω–∞–Ω—Å|–ª–∏–∫–≤–∏–¥–Ω/.test(msg)) scores.cashflow += 6;
    if (/—Å–∫–æ–ª—å–∫–æ|–∫–∞–∫ –¥–µ–ª–∞ —Å/.test(msg)) scores.cashflow += 5;
    
    // –†–ò–°–ö–ò
    if (/—Ä–∏—Å–∫|risk/.test(msg)) scores.risks += 10;
    if (/–æ–ø–∞—Å–Ω|—É–≥—Ä–æ–∑|–ø—Ä–æ–±–ª–µ–º/.test(msg)) scores.risks += 7;
    if (/—á—Ç–æ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏|–±–µ—Å–ø–æ–∫–æ–∏|—Å—Ç—Ä–∞—à–Ω/.test(msg)) scores.risks += 6;
    
    // –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò
    if (/—Ä–µ–∫–æ–º–µ–Ω–¥|—Å–æ–≤–µ—Ç|recommend/.test(msg)) scores.recommendations += 10;
    if (/—á—Ç–æ –¥–µ–ª–∞—Ç—å|–∫–∞–∫ –±—ã—Ç—å|–ø–æ–º–æ—â|–ø–æ–º–æ–≥/.test(msg)) scores.recommendations += 8;
    if (/–ø–æ—Å–æ–≤–µ—Ç—É–π|—á—Ç–æ —É–ª—É—á—à|–∫–∞–∫ —É–ª—É—á—à/.test(msg)) scores.recommendations += 7;
    
    // –ê–ù–ê–õ–ò–ó
    if (/–∞–Ω–∞–ª–∏–∑|analysis/.test(msg)) scores.analysis += 10;
    if (/–ø–æ–ª–Ω|–∫–æ–º–ø–ª–µ–∫—Å–Ω|–æ–±—â/.test(msg)) scores.analysis += 7;
    if (/–≤—Å–µ –¥–∞–Ω–Ω|–æ–±—â–∞—è –∫–∞—Ä—Ç–∏–Ω|—á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥/.test(msg)) scores.analysis += 6;
    if (/–∫–∞–∫ –¥–µ–ª–∞(?! —Å)/.test(msg)) scores.analysis += 5;
    
    // –§–ò–ù–ê–ù–°–ò–†–û–í–ê–ù–ò–ï
    if (/—Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω|–∫—Ä–µ–¥–∏—Ç|–∑–∞–π–º|–∏–Ω–≤–µ—Å—Ç/.test(msg)) scores.financing += 10;
    if (/–≥–¥–µ –≤–∑—è—Ç—å|–Ω—É–∂–Ω—ã –¥–µ–Ω—å–≥–∏|–ø—Ä–∏–≤–ª–µ—á—å/.test(msg)) scores.financing += 8;
    
    // –°–¶–ï–ù–ê–†–ò–ò
    if (/—Å—Ü–µ–Ω–∞—Ä–∏|—Å—Ç—Ä–µ—Å—Å|—á—Ç–æ –µ—Å–ª–∏/.test(msg)) scores.scenarios += 10;
    
    // –ù–∞—Ö–æ–¥–∏–º —Ç–∏–ø —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º score
    const maxScore = Math.max(...Object.values(scores));
    const bestMatch = Object.entries(scores).find(([_, score]) => score === maxScore);
    
    console.log('üß† Context Analysis:', { message: msg, scores, bestMatch });
    
    return bestMatch ? bestMatch[0] : 'general';
  };

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–º–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
  const generateSmartResponse = (userMessage: string): ChatMessage => {
    const timestamp = new Date().toISOString();
    const context = analyzeMessageContext(userMessage);
    
    const cashFlow = kpiMetrics?.cashFlow || 0;
    const runway = kpiMetrics?.runway || 0;
    const riskScore = kpiMetrics?.riskScore || 0;
    const liquidity = kpiMetrics?.liquidityRatio || 0;
    const industry = selectedIndustry?.name || '–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞';

    console.log('ü§ñ Generating response for context:', context, 'hasData:', hasData);

    // –ë–õ–ê–ì–û–î–ê–†–ù–û–°–¢–¨
    if (context === 'gratitude') {
      return {
        id: `ai-${Date.now()}`,
        role: 'assistant',
        content: `üòä **–ü–æ–∂–∞–ª—É–π—Å—Ç–∞! –í—Å–µ–≥–¥–∞ —Ä–∞–¥ –ø–æ–º–æ—á—å!**

–Ø –∑–¥–µ—Å—å –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å –≤–∞–º –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –µ—â–µ –≤–æ–ø—Ä–æ—Å—ã - –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è!

**üí¨ –ß–µ–º –µ—â–µ –º–æ–≥—É –ø–æ–º–æ—á—å?**`,
        timestamp,
        actions: [
          { id: 'forecast', label: '–ü—Ä–æ–≥–Ω–æ–∑', action: 'forecast', icon: 'üìä' },
          { id: 'recommendations', label: '–°–æ–≤–µ—Ç—ã', action: 'recommendations', icon: 'üí°' },
        ]
      };
    }

    // –ü–†–ò–í–ï–¢–°–¢–í–ò–ï
    if (context === 'greeting') {
      const hour = new Date().getHours();
      const greeting = hour < 12 ? '–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ' : hour < 18 ? '–î–æ–±—Ä—ã–π –¥–µ–Ω—å' : '–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä';
      
      if (!hasData) {
        return {
          id: `ai-${Date.now()}`,
          role: 'assistant',
          content: `${greeting}! üëã **–Ø –≤–∞—à AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç CFO!**

–Ø —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Å—å –Ω–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–º –∞–Ω–∞–ª–∏–∑–µ –∏ –ø–æ–º–æ–≥—É –≤–∞–º:
‚Ä¢ üìä –ü–æ–Ω—è—Ç—å —Ç–µ–∫—É—â–µ–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ
‚Ä¢ üîÆ –°–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å –¥–µ–Ω–µ–∂–Ω—ã–µ –ø–æ—Ç–æ–∫–∏
‚Ä¢ üõ°Ô∏è –í—ã—è–≤–∏—Ç—å –∏ –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∏—Å–∫–∏
‚Ä¢ üí° –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Ä–∞–∑–≤–∏—Ç–∏—è
‚Ä¢ üí∞ –ù–∞–π—Ç–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ

**üöÄ –î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –∑–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ.**`,
          timestamp,
          actions: [
            { id: 'demo', label: '–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–µ–º–æ', action: 'demo', icon: 'üìä' },
          ]
        };
      }

      const healthStatus = runway < 3 ? '–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ' : runway < 6 ? '—Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è' : '—Å—Ç–∞–±–∏–ª—å–Ω–æ–µ';
      const healthEmoji = runway < 3 ? 'üö®' : runway < 6 ? '‚ö†Ô∏è' : '‚úÖ';
      
      return {
        id: `ai-${Date.now()}`,
        role: 'assistant',
        content: `${greeting}! üëã **–†–∞–¥ –≤–∞—Å –≤–∏–¥–µ—Ç—å!**

–Ø –ø—Ä–æ–≤–µ–ª –∞–Ω–∞–ª–∏–∑ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö. –í–æ—Ç —á—Ç–æ —è –æ–±–Ω–∞—Ä—É–∂–∏–ª:

**üìä –§–ò–ù–ê–ù–°–û–í–û–ï –ó–î–û–†–û–í–¨–ï: ${healthStatus.toUpperCase()} ${healthEmoji}**

**–ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:**
‚Ä¢ **–î–µ–Ω–µ–∂–Ω—ã–π –ø–æ—Ç–æ–∫:** ${cashFlow.toLocaleString()} ‚ÇΩ ${cashFlow > 0 ? '(–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π ‚úÖ)' : '(–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π ‚ö†Ô∏è)'}
‚Ä¢ **Runway:** ${runway} –º–µ—Å—è—Ü–µ–≤ ${runway < 3 ? '(–∫—Ä–∏—Ç–∏—á–Ω–æ! üö®)' : runway < 6 ? '(–Ω–∏–∑–∫–∏–π ‚ö†Ô∏è)' : '(—Ö–æ—Ä–æ—à–æ ‚úÖ)'}
‚Ä¢ **–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞:** ${riskScore}% ${riskScore > 70 ? '(–≤—ã—Å–æ–∫–∏–π üî¥)' : riskScore > 40 ? '(—Å—Ä–µ–¥–Ω–∏–π üü°)' : '(–Ω–∏–∑–∫–∏–π üü¢)'}
‚Ä¢ **–õ–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å:** ${liquidity.toFixed(2)}x ${liquidity > 2 ? '(–æ—Ç–ª–∏—á–Ω–∞—è ‚úÖ)' : liquidity > 1 ? '(–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è ‚ö†Ô∏è)' : '(–Ω–∏–∑–∫–∞—è üö®)'}
‚Ä¢ **–û—Ç—Ä–∞—Å–ª—å:** ${industry}

**üéØ –ú–æ—è –ø–µ—Ä–≤–∏—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞:**
${runway < 3 
  ? 'üö® **–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø!** –£ –≤–∞—Å –æ—Å—Ç–∞–ª–æ—Å—å –º–µ–Ω–µ–µ 3 –º–µ—Å—è—Ü–µ–≤ –¥–µ–Ω–µ–≥. –≠—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π. –ë–µ–∑ —Å—Ä–æ—á–Ω—ã—Ö –º–µ—Ä –±–∏–∑–Ω–µ—Å –º–æ–∂–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.'
  : runway < 6 
  ? '‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –í–ù–ò–ú–ê–ù–ò–Ø.** –ù–∏–∑–∫–∏–π runway —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤ –±–ª–∏–∂–∞–π—à–∏–π –º–µ—Å—è—Ü. –°–∏—Ç—É–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª—è–µ–º–∞—è, –Ω–æ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –Ω—É–∂–Ω–æ —Å–µ–π—á–∞—Å.'
  : '‚úÖ **–°–¢–ê–ë–ò–õ–¨–ù–û–ï –ü–û–õ–û–ñ–ï–ù–ò–ï.** –£ –≤–∞—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –∑–∞–ø–∞—Å –ø—Ä–æ—á–Ω–æ—Å—Ç–∏. –≠—Ç–æ —Ö–æ—Ä–æ—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–∑–Ω–µ—Å–∞.'}

**üí¨ –û —á–µ–º —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ?**`,
        timestamp,
        actions: [
          { id: 'analysis', label: '–ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑', action: 'analysis', icon: 'üîç' },
          { id: 'recommendations', label: '–ß—Ç–æ –¥–µ–ª–∞—Ç—å?', action: 'recommendations', icon: 'üí°' },
          { id: 'risks', label: '–ö–∞–∫–∏–µ —Ä–∏—Å–∫–∏?', action: 'risks', icon: 'üõ°Ô∏è' },
        ]
      };
    }

    // –î–ï–ù–ï–ñ–ù–´–ï –ü–û–¢–û–ö–ò
    if (context === 'cashflow') {
      if (!hasData) {
        return {
          id: `ai-${Date.now()}`,
          role: 'assistant',
          content: `üí∞ **–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å –ø—Ä–æ –¥–µ–Ω–µ–∂–Ω—ã–µ –ø–æ—Ç–æ–∫–∏!**

–ê–Ω–∞–ª–∏–∑ –¥–µ–Ω–µ–∂–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ - —ç—Ç–æ –æ—Å–Ω–æ–≤–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è –±–∏–∑–Ω–µ—Å–∞. –Ø –≥–æ—Ç–æ–≤ –ø—Ä–æ–≤–µ—Å—Ç–∏ –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑:

**üîç –ß—Ç–æ —è –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É—é:**
‚Ä¢ **–°—Ç—Ä—É–∫—Ç—É—Ä—É –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–π** - –æ—Ç–∫—É–¥–∞ –ø—Ä–∏—Ö–æ–¥—è—Ç –¥–µ–Ω—å–≥–∏, –∫–∞–∫–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Å–∞–º—ã–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ
‚Ä¢ **–°—Ç—Ä—É–∫—Ç—É—Ä—É —Ä–∞—Å—Ö–æ–¥–æ–≤** - –∫—É–¥–∞ —É—Ö–æ–¥—è—Ç –¥–µ–Ω—å–≥–∏, –≥–¥–µ –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å
‚Ä¢ **–¢—Ä–µ–Ω–¥—ã** - —Ä–∞—Å—Ç—É—Ç –∏–ª–∏ –ø–∞–¥–∞—é—Ç –¥–æ—Ö–æ–¥—ã/—Ä–∞—Å—Ö–æ–¥—ã, —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å
‚Ä¢ **–ü—Ä–æ–≥–Ω–æ–∑** - —á—Ç–æ –±—É–¥–µ—Ç —á–µ—Ä–µ–∑ 1, 3, 6, 12 –º–µ—Å—è—Ü–µ–≤
‚Ä¢ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏** - –∫–æ–≥–¥–∞ –º–æ–∂–µ—Ç –Ω–µ —Ö–≤–∞—Ç–∏—Ç—å –¥–µ–Ω–µ–≥
‚Ä¢ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** - –∫–∞–∫ —É–ª—É—á—à–∏—Ç—å –¥–µ–Ω–µ–∂–Ω—ã–µ –ø–æ—Ç–æ–∫–∏

**üöÄ –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ, –∏ —è –ø—Ä–æ–≤–µ–¥—É –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑!**`,
          timestamp,
          actions: [
            { id: 'demo', label: '–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ', action: 'demo', icon: 'üìä' },
          ]
        };
      }

      const trend = cashFlow > 0 ? '–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π' : cashFlow < 0 ? '–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π' : '–Ω—É–ª–µ–≤–æ–π';
      const trendEmoji = cashFlow > 0 ? 'üìà' : cashFlow < 0 ? 'üìâ' : '‚û°Ô∏è';
      const monthlyBurn = Math.abs(cashFlow);
      const daysOfCash = runway * 30;
      
      return {
        id: `ai-${Date.now()}`,
        role: 'assistant',
        content: `üí∞ **–î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –î–ï–ù–ï–ñ–ù–´–• –ü–û–¢–û–ö–û–í**

**üìä –¢–ï–ö–£–©–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø:**

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:**
‚Ä¢ **–î–µ–Ω–µ–∂–Ω—ã–π –ø–æ—Ç–æ–∫:** ${cashFlow.toLocaleString()} ‚ÇΩ/–º–µ—Å—è—Ü ${trendEmoji}
‚Ä¢ **–¢—Ä–µ–Ω–¥:** ${trend} ${cashFlow > 0 ? '(–±–∏–∑–Ω–µ—Å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–µ–Ω—å–≥–∏ ‚úÖ)' : '(–±–∏–∑–Ω–µ—Å —Ç—Ä–∞—Ç–∏—Ç –±–æ–ª—å—à–µ —á–µ–º –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç ‚ö†Ô∏è)'}
‚Ä¢ **–ú–µ—Å—è—á–Ω—ã–π burn rate:** ${monthlyBurn.toLocaleString()} ‚ÇΩ
‚Ä¢ **Runway:** ${runway} –º–µ—Å—è—Ü–µ–≤ (‚âà${daysOfCash} –¥–Ω–µ–π)
‚Ä¢ **–õ–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å:** ${liquidity.toFixed(2)}x ${liquidity > 2 ? '(–æ—Ç–ª–∏—á–Ω–∞—è ‚úÖ)' : liquidity > 1 ? '(–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è ‚ö†Ô∏è)' : '(–Ω–∏–∑–∫–∞—è üö®)'}

**üéØ –ß–¢–û –≠–¢–û –ó–ù–ê–ß–ò–¢:**

${runway < 3 
  ? `üö® **–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø**

–£ –≤–∞—Å –æ—Å—Ç–∞–ª–æ—Å—å –≤—Å–µ–≥–æ ${runway} –º–µ—Å—è—Ü–µ–≤ –¥–µ–Ω–µ–≥ –ø—Ä–∏ —Ç–µ–∫—É—â–µ–º —É—Ä–æ–≤–Ω–µ —Ä–∞—Å—Ö–æ–¥–æ–≤. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
‚Ä¢ –ß–µ—Ä–µ–∑ ${daysOfCash} –¥–Ω–µ–π –¥–µ–Ω—å–≥–∏ –º–æ–≥—É—Ç –∑–∞–∫–æ–Ω—á–∏—Ç—å—Å—è
‚Ä¢ –ù–µ—Ç –∑–∞–ø–∞—Å–∞ –¥–ª—è –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤
‚Ä¢ –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –∫–∞—Å—Å–æ–≤–æ–≥–æ —Ä–∞–∑—Ä—ã–≤–∞
‚Ä¢ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ

**–≠—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –ù–ï–ú–ï–î–õ–ï–ù–ù–´–• –¥–µ–π—Å—Ç–≤–∏–π!**`
  : runway < 6 
  ? `‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –í–ù–ò–ú–ê–ù–ò–Ø**

–£ –≤–∞—Å ${runway} –º–µ—Å—è—Ü–µ–≤ runway. –≠—Ç–æ:
‚Ä¢ –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Å–ø–æ–∫–æ–π–Ω–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è
‚Ä¢ –¢—Ä–µ–±—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤ –±–ª–∏–∂–∞–π—à–∏–π –º–µ—Å—è—Ü
‚Ä¢ –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–æ—Å—Ç–∞
‚Ä¢ –°–æ–∑–¥–∞–µ—Ç —Å—Ç—Ä–µ—Å—Å –ø—Ä–∏ –ø—Ä–∏–Ω—è—Ç–∏–∏ —Ä–µ—à–µ–Ω–∏–π

**–ù—É–∂–Ω—ã –º–µ—Ä—ã –≤ —Ç–µ—á–µ–Ω–∏–µ 2-4 –Ω–µ–¥–µ–ª—å.**`
  : `‚úÖ **–°–¢–ê–ë–ò–õ–¨–ù–û–ï –ü–û–õ–û–ñ–ï–ù–ò–ï**

–£ –≤–∞—Å ${runway} –º–µ—Å—è—Ü–µ–≤ runway. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
‚Ä¢ –î–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –∑–∞–ø–∞—Å –ø—Ä–æ—á–Ω–æ—Å—Ç–∏
‚Ä¢ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ
‚Ä¢ –í—Ä–µ–º—è –¥–ª—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚Ä¢ –ù–∏–∑–∫–∏–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π —Å—Ç—Ä–µ—Å—Å

**–û—Ç–ª–∏—á–Ω–∞—è –±–∞–∑–∞ –¥–ª—è —Ä–æ—Å—Ç–∞!**`}

**üìà –°–¢–†–£–ö–¢–£–†–ê –î–ï–ù–ï–ñ–ù–´–• –ü–û–¢–û–ö–û–í:**

**–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è:**
‚Ä¢ –û—Å–Ω–æ–≤–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏: ${selectedIndustry?.name ? `—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã –¥–ª—è –æ—Ç—Ä–∞—Å–ª–∏ "${industry}"` : '—Ç—Ä–µ–±—É—é—Ç –∞–Ω–∞–ª–∏–∑–∞'}
‚Ä¢ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å: ${cashFlow > 0 ? '–≤—ã—Å–æ–∫–∞—è' : '—Ç—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è'}
‚Ä¢ –î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è: ${riskScore > 50 ? '–Ω–∏–∑–∫–∞—è (—Ä–∏—Å–∫!)' : '–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è'}

**–†–∞—Å—Ö–æ–¥—ã:**
‚Ä¢ –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ: ~${(monthlyBurn * 0.7).toLocaleString()} ‚ÇΩ/–º–µ—Å
‚Ä¢ –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ: ~${(monthlyBurn * 0.5).toLocaleString()} ‚ÇΩ/–º–µ—Å
‚Ä¢ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: ~${(monthlyBurn * 0.2).toLocaleString()} ‚ÇΩ/–º–µ—Å

**üîÆ –ü–†–û–ì–ù–û–ó –ù–ê –ë–õ–ò–ñ–ê–ô–®–ò–ï –ú–ï–°–Ø–¶–´:**

${runway < 6 
  ? `**–ü—Ä–∏ —Ç–µ–∫—É—â–∏—Ö —Ç–µ–º–ø–∞—Ö:**
‚Ä¢ –ß–µ—Ä–µ–∑ 1 –º–µ—Å—è—Ü: ${(cashFlow * 1).toLocaleString()} ‚ÇΩ
‚Ä¢ –ß–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞: ${(cashFlow * 3).toLocaleString()} ‚ÇΩ
‚Ä¢ –ß–µ—Ä–µ–∑ 6 –º–µ—Å—è—Ü–µ–≤: ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –£–†–û–í–ï–ù–¨

**‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï:** –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–µ–Ω—å–≥–∏ –∑–∞–∫–æ–Ω—á–∞—Ç—Å—è —á–µ—Ä–µ–∑ ${runway} –º–µ—Å—è—Ü–µ–≤!`
  : `**–ü—Ä–∏ —Ç–µ–∫—É—â–∏—Ö —Ç–µ–º–ø–∞—Ö:**
‚Ä¢ –ß–µ—Ä–µ–∑ 1 –º–µ—Å—è—Ü: ${(cashFlow * 1).toLocaleString()} ‚ÇΩ
‚Ä¢ –ß–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞: ${(cashFlow * 3).toLocaleString()} ‚ÇΩ
‚Ä¢ –ß–µ—Ä–µ–∑ 6 –º–µ—Å—è—Ü–µ–≤: ${(cashFlow * 6).toLocaleString()} ‚ÇΩ
‚Ä¢ –ß–µ—Ä–µ–∑ 12 –º–µ—Å—è—Ü–µ–≤: ${(cashFlow * 12).toLocaleString()} ‚ÇΩ

**‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è —Ä–æ—Å—Ç–∞**`}

**üí° –ú–û–ò –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:**

${runway < 3 
  ? `**üö® –ù–ï–ú–ï–î–õ–ï–ù–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø (–≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏):**
1. **–≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ù–∞–π—Ç–∏ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞, –∫—Ä–µ–¥–∏—Ç –∏–ª–∏ –∑–∞–π–º –°–ï–ì–û–î–ù–Ø
2. **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤:** –£—Ä–µ–∑–∞—Ç—å –≤—Å–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ 40-60%
3. **–£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–π:** –°–æ–±—Ä–∞—Ç—å –≤—Å—é –¥–µ–±–∏—Ç–æ—Ä–∫—É, –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã, —Å–∫–∏–¥–∫–∏ –∑–∞ –±—ã—Å—Ç—Ä—É—é –æ–ø–ª–∞—Ç—É
4. **–ü—Ä–æ–¥–∞–∂–∞ –∞–∫—Ç–∏–≤–æ–≤:** –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–¥–∞–∂—É –Ω–µ–ª–∏–∫–≤–∏–¥–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤
5. **–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã:** –î–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ –æ–± –æ—Ç—Å—Ä–æ—á–∫–µ –ø–ª–∞—Ç–µ–∂–µ–π

**‚ö° –ö–†–ê–¢–ö–û–°–†–û–ß–ù–´–ï (1-2 –º–µ—Å—è—Ü–∞):**
‚Ä¢ –ù–∞–π—Ç–∏ –Ω–æ–≤—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–æ—Ö–æ–¥–∞
‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
‚Ä¢ –ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ (+10-20%)
‚Ä¢ –°—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Å–∞–º—ã—Ö –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–∞—Ö`
  : runway < 6 
  ? `**‚ö†Ô∏è –í–ê–ñ–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø (–≤ —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞):**
1. **–ü—Ä–∏–≤–ª–µ—á—å —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ö—Ä–µ–¥–∏—Ç–Ω–∞—è –ª–∏–Ω–∏—è –∏–ª–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –Ω–∞ ${(monthlyBurn * 6).toLocaleString()} ‚ÇΩ
2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤:** –°–æ–∫—Ä–∞—Ç–∏—Ç—å –Ω–∞ 20-30% –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∫–∞—á–µ—Å—Ç–≤–∞
3. **–£–ª—É—á—à–µ–Ω–∏–µ cash flow:** –£—Å–∫–æ—Ä–∏—Ç—å —Å–±–æ—Ä –¥–µ–±–∏—Ç–æ—Ä–∫–∏, –¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è –æ–± –æ—Ç—Å—Ä–æ—á–∫–∞—Ö
4. **–ù–æ–≤—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–æ—Ö–æ–¥–∞:** –†–∞–∑–≤–∏–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã/—É—Å–ª—É–≥–∏

**üéØ –°–†–ï–î–ù–ï–°–†–û–ß–ù–´–ï (3-6 –º–µ—Å—è—Ü–µ–≤):**
‚Ä¢ –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥ –Ω–∞ 6 –º–µ—Å—è—Ü–µ–≤
‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
‚Ä¢ –î–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –±–∞–∑—É
‚Ä¢ –í–Ω–µ–¥—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è`
  : `**‚úÖ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –†–û–°–¢–ê:**
1. **–°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥:** –ù–∞–∫–æ–ø–∏—Ç—å –Ω–∞ 12 –º–µ—Å—è—Ü–µ–≤ —Ä–∞—Å—Ö–æ–¥–æ–≤
2. **–ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ:** –ù–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã, –º–∞—Ä–∫–µ—Ç–∏–Ω–≥, –∫–æ–º–∞–Ω–¥–∞
3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:** –í—ã—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—ã–µ —Ä—ã–Ω–∫–∏, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** –£–ª—É—á—à–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ 20-30%

**üöÄ –°–¢–†–ê–¢–ï–ì–ò–ß–ï–°–ö–ò–ï (6+ –º–µ—Å—è—Ü–µ–≤):**
‚Ä¢ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—é –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
‚Ä¢ –†–∞–∑–≤–∏–≤–∞—Ç—å –Ω–æ–≤—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å–∞
‚Ä¢ –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏
‚Ä¢ –°—Ç–∞—Ç—å –ª–∏–¥–µ—Ä–æ–º –≤ —Å–≤–æ–µ–π –Ω–∏—à–µ`}

**üìä –•–æ—Ç–∏—Ç–µ —É–≤–∏–¥–µ—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ –Ω–µ–¥–µ–ª—è–º?**`,
        timestamp,
        actions: [
          { id: 'forecast', label: '–î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑', action: 'forecast', icon: 'üìä' },
          { id: 'financing', label: '–ì–¥–µ –≤–∑—è—Ç—å –¥–µ–Ω—å–≥–∏?', action: 'financing', icon: 'üí∞' },
          { id: 'recommendations', label: '–ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π', action: 'recommendations', icon: 'üí°' },
        ]
      };
    }

    // –†–ò–°–ö–ò
    if (context === 'risks') {
      if (!hasData) {
        return {
          id: `ai-${Date.now()}`,
          role: 'assistant',
          content: `üõ°Ô∏è **–í–∞–∂–Ω–µ–π—à–∏–π –≤–æ–ø—Ä–æ—Å –ø—Ä–æ —Ä–∏—Å–∫–∏!**

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏ - –∫–ª—é—á –∫ –≤—ã–∂–∏–≤–∞–Ω–∏—é –∏ –ø—Ä–æ—Ü–≤–µ—Ç–∞–Ω–∏—é –±–∏–∑–Ω–µ—Å–∞. –Ø –≥–æ—Ç–æ–≤ –ø—Ä–æ–≤–µ—Å—Ç–∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑:

**üîç –ß—Ç–æ —è –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É—é:**
‚Ä¢ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏** - —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤—É
‚Ä¢ **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∏—Å–∫–∏** - –ø—Ä–æ–±–ª–µ–º—ã —Å –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å—é, –∫–∞—Å—Å–æ–≤—ã–µ —Ä–∞–∑—Ä—ã–≤—ã
‚Ä¢ **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∏—Å–∫–∏** - –ø—Ä–æ–±–ª–µ–º—ã –≤ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚Ä¢ **–†—ã–Ω–æ—á–Ω—ã–µ —Ä–∏—Å–∫–∏** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ—Ç—Ä–∞—Å–ª–∏, –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è
‚Ä¢ **–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏** - –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–≥—Ä–æ–∑—ã
‚Ä¢ **–ü–ª–∞–Ω –∑–∞—â–∏—Ç—ã** - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –º–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∏—Å–∫–∞

**üöÄ –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ, –∏ —è –ø–æ–∫–∞–∂—É –≤—Å–µ —Ä–∏—Å–∫–∏ —Å –ø–ª–∞–Ω–æ–º –∑–∞—â–∏—Ç—ã!**`,
          timestamp,
          actions: [
            { id: 'demo', label: '–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ', action: 'demo', icon: 'üìä' },
          ]
        };
      }

      const riskLevel = riskScore > 70 ? '–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô' : riskScore > 40 ? '–í–´–°–û–ö–ò–ô' : riskScore > 20 ? '–°–†–ï–î–ù–ò–ô' : '–ù–ò–ó–ö–ò–ô';
      const riskColor = riskScore > 70 ? 'üî¥' : riskScore > 40 ? 'üü°' : 'üü¢';
      const monthlyBurn = Math.abs(cashFlow);
      
      return {
        id: `ai-${Date.now()}`,
        role: 'assistant',
        content: `üõ°Ô∏è **–ö–û–ú–ü–õ–ï–ö–°–ù–´–ô –ê–ù–ê–õ–ò–ó –†–ò–°–ö–û–í**

**üìä –û–ë–©–ê–Ø –û–¶–ï–ù–ö–ê –†–ò–°–ö–û–í:**

‚Ä¢ **–ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞:** ${riskScore}% ${riskColor} **${riskLevel}**
‚Ä¢ **Runway —Ä–∏—Å–∫:** ${runway} –º–µ—Å ${runway < 3 ? 'üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô' : runway < 6 ? '‚ö†Ô∏è –í–´–°–û–ö–ò–ô' : '‚úÖ –ù–ò–ó–ö–ò–ô'}
‚Ä¢ **–õ–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å:** ${liquidity.toFixed(2)}x ${liquidity < 1 ? 'üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø' : liquidity < 2 ? '‚ö†Ô∏è –ù–ò–ó–ö–ê–Ø' : '‚úÖ –ù–û–†–ú–ê–õ–¨–ù–ê–Ø'}
‚Ä¢ **–û—Ç—Ä–∞—Å–ª—å:** ${industry} ${selectedIndustry?.characteristics?.seasonality ? '(—Å–µ–∑–æ–Ω–Ω–∞—è)' : ''}

**üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –†–ò–°–ö–ò (—Ç—Ä–µ–±—É—é—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è):**

${runway < 3 
  ? `**1. üí∏ –†–ò–°–ö –ë–ê–ù–ö–†–û–¢–°–¢–í–ê - –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô**
‚Ä¢ **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –í–´–°–û–ö–ê–Ø (${runway} –º–µ—Å runway)
‚Ä¢ **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–∑–Ω–µ—Å–∞, –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–æ
‚Ä¢ **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π
‚Ä¢ **–°—Ä–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** ${runway} –º–µ—Å—è—Ü–µ–≤
‚Ä¢ **–ü–ª–∞–Ω –∑–∞—â–∏—Ç—ã:**
  - –ù–ï–ú–ï–î–õ–ï–ù–ù–û –Ω–∞–π—Ç–∏ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ
  - –°–æ–∫—Ä–∞—Ç–∏—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ 40-60%
  - –£—Å–∫–æ—Ä–∏—Ç—å —Å–±–æ—Ä –¥–µ–±–∏—Ç–æ—Ä–∫–∏
  - –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–¥–∞–∂—É –∞–∫—Ç–∏–≤–æ–≤

**2. üö´ –†–ò–°–ö –û–°–¢–ê–ù–û–í–ö–ò –û–ü–ï–†–ê–¶–ò–ô - –í–´–°–û–ö–ò–ô**
‚Ä¢ **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –°–†–ï–î–ù–Ø–Ø
‚Ä¢ **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞
‚Ä¢ **–ü—Ä–∏—á–∏–Ω–∞:** –ö–∞—Å—Å–æ–≤—ã–µ —Ä–∞–∑—Ä—ã–≤—ã
‚Ä¢ **–ü–ª–∞–Ω –∑–∞—â–∏—Ç—ã:**
  - –°–æ–∑–¥–∞—Ç—å –±—É—Ñ–µ—Ä –Ω–∞ 1-2 –º–µ—Å—è—Ü–∞
  - –î–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è –æ–± –æ—Ç—Å—Ä–æ—á–∫–∞—Ö —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏
  - –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤

**3. üìâ –†–ò–°–ö –ü–û–¢–ï–†–ò –ö–õ–ò–ï–ù–¢–û–í - –°–†–ï–î–ù–ò–ô**
‚Ä¢ **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –°–†–ï–î–ù–Ø–Ø
‚Ä¢ **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** –°–Ω–∏–∂–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–æ–≤ –Ω–∞ 20-40%
‚Ä¢ **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –Ω–∞ –ø—Ä–µ–∂–Ω–µ–º —É—Ä–æ–≤–Ω–µ
‚Ä¢ **–ü–ª–∞–Ω –∑–∞—â–∏—Ç—ã:**
  - –ö–æ–º–º—É–Ω–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å –∫–ª—é—á–µ–≤—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏
  - –û–±–µ—Å–ø–µ—á–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏
  - –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è`
  : runway < 6 
  ? `**1. ‚ö†Ô∏è –†–ò–°–ö –ö–ê–°–°–û–í–û–ì–û –†–ê–ó–†–´–í–ê - –í–´–°–û–ö–ò–ô**
‚Ä¢ **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –°–†–ï–î–ù–Ø–Ø
‚Ä¢ **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** –í—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ–ø–ª–∞—Ç–µ–∂–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
‚Ä¢ **–ü—Ä–∏—á–∏–Ω–∞:** –ù–∏–∑–∫–∏–π runway (${runway} –º–µ—Å)
‚Ä¢ **–ü–ª–∞–Ω –∑–∞—â–∏—Ç—ã:**
  - –ü—Ä–∏–≤–ª–µ—á—å —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞
  - –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥ –Ω–∞ 3-6 –º–µ—Å—è—Ü–µ–≤
  - –£–ª—É—á—à–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–Ω–µ–∂–Ω—ã–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏

**2. üí∞ –†–ò–°–ö –ù–ï–•–í–ê–¢–ö–ò –õ–ò–ö–í–ò–î–ù–û–°–¢–ò - –°–†–ï–î–ù–ò–ô**
‚Ä¢ **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –ù–ò–ó–ö–ê–Ø-–°–†–ï–î–ù–Ø–Ø
‚Ä¢ **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ–∫—É—â–∏–º–∏ –ø–ª–∞—Ç–µ–∂–∞–º–∏
‚Ä¢ **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –∑–∞–ø–∞—Å –ø—Ä–æ—á–Ω–æ—Å—Ç–∏
‚Ä¢ **–ü–ª–∞–Ω –∑–∞—â–∏—Ç—ã:**
  - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ 20-30%
  - –£—Å–∫–æ—Ä–∏—Ç—å –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç—å –¥–µ–±–∏—Ç–æ—Ä–∫–∏
  - –î–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è –æ–± –æ—Ç—Å—Ä–æ—á–∫–∞—Ö`
  : `**1. ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –†–ò–°–ö–ò - –ù–ò–ó–ö–ò–ï**
‚Ä¢ –°—Ç–∞–±–∏–ª—å–Ω–æ–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ
‚Ä¢ –î–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π runway (${runway} –º–µ—Å)
‚Ä¢ –•–æ—Ä–æ—à–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å (${liquidity.toFixed(2)}x)
‚Ä¢ –ù–∏–∑–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–∞—Å—Å–æ–≤—ã—Ö —Ä–∞–∑—Ä—ã–≤–æ–≤`}

**‚ö†Ô∏è –û–ü–ï–†–ê–¶–ò–û–ù–ù–´–ï –†–ò–°–ö–ò:**

${riskScore > 70 
  ? `**1. üî¥ –í–´–°–û–ö–ê–Ø –í–û–õ–ê–¢–ò–õ–¨–ù–û–°–¢–¨ –î–û–•–û–î–û–í**
‚Ä¢ **–û—Ü–µ–Ω–∫–∞:** –í–´–°–û–ö–ò–ô –†–ò–°–ö
‚Ä¢ **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è
‚Ä¢ **–í–ª–∏—è–Ω–∏–µ:** –°–ª–æ–∂–Ω–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å, –≤—ã—Å–æ–∫–∏–π —Å—Ç—Ä–µ—Å—Å
‚Ä¢ **–†–µ—à–µ–Ω–∏–µ:**
  - –î–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–æ—Ö–æ–¥–∞
  - –°–æ–∑–¥–∞—Ç—å –ø–æ–¥—É—à–∫—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  - –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –º–æ–¥–µ–ª—å –ø–æ–¥–ø–∏—Å–∫–∏/–∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤

**2. üìä –†–ò–°–ö –ö–û–ù–¶–ï–ù–¢–†–ê–¶–ò–ò**
‚Ä¢ **–û—Ü–µ–Ω–∫–∞:** –í–´–°–û–ö–ò–ô –†–ò–°–ö
‚Ä¢ **–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç 1-2 –∫–ª–∏–µ–Ω—Ç–æ–≤/–ø—Ä–æ–¥—É–∫—Ç–æ–≤
‚Ä¢ **–í–ª–∏—è–Ω–∏–µ:** –ü–æ—Ç–µ—Ä—è –∫–ª—é—á–µ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ = –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞
‚Ä¢ **–†–µ—à–µ–Ω–∏–µ:**
  - –†–∞–∑–≤–∏–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã/—É—Å–ª—É–≥–∏
  - –†–∞—Å—à–∏—Ä—è—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –±–∞–∑—É
  - –°–æ–∑–¥–∞–≤–∞—Ç—å –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

**3. üéØ –û–ü–ï–†–ê–¶–ò–û–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´**
‚Ä¢ **–û—Ü–µ–Ω–∫–∞:** –°–†–ï–î–ù–ò–ô –†–ò–°–ö
‚Ä¢ **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
‚Ä¢ **–í–ª–∏—è–Ω–∏–µ:** –í—ã—Å–æ–∫–∏–µ –∏–∑–¥–µ—Ä–∂–∫–∏, –Ω–∏–∑–∫–∞—è –º–∞—Ä–∂–∞
‚Ä¢ **–†–µ—à–µ–Ω–∏–µ:**
  - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
  - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏
  - –í–Ω–µ–¥—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ç—Ä–æ–ª—è`
  : riskScore > 40 
  ? `**1. üü° –°–†–ï–î–ù–ò–ï –û–ü–ï–†–ê–¶–ò–û–ù–ù–´–ï –†–ò–°–ö–ò**
‚Ä¢ –ï—Å—Ç—å –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è
‚Ä¢ –ü—Ä–æ—Ü–µ—Å—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç, –Ω–æ –Ω–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ
‚Ä¢ –í–æ–∑–º–æ–∂–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ 15-25%
‚Ä¢ **–†–µ—à–µ–Ω–∏–µ:**
  - –ü—Ä–æ–≤–µ—Å—Ç–∏ –∞—É–¥–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
  - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
  - –í–Ω–µ–¥—Ä–∏—Ç—å KPI –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥`
  : `**1. üü¢ –ù–ò–ó–ö–ò–ï –û–ü–ï–†–ê–¶–ò–û–ù–ù–´–ï –†–ò–°–ö–ò**
‚Ä¢ –°—Ç–∞–±–∏–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
‚Ä¢ –•–æ—Ä–æ—à–∞—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
‚Ä¢ –ù–∏–∑–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å–±–æ–µ–≤
‚Ä¢ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
  - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å
  - –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å
  - –ì–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é`}

**üìà –†–´–ù–û–ß–ù–´–ï –†–ò–°–ö–ò:**

‚Ä¢ **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è:** ${riskScore > 50 ? '–í–´–°–û–ö–ê–Ø - —Ç—Ä–µ–±—É–µ—Ç –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ü–∏–∏' : '–°–†–ï–î–ù–Ø–Ø - —É–ø—Ä–∞–≤–ª—è–µ–º–∞—è'}
‚Ä¢ **–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ—Ç—Ä–∞—Å–ª–∏:** ${selectedIndustry?.characteristics?.seasonality ? '–°–µ–∑–æ–Ω–Ω—ã–µ –∫–æ–ª–µ–±–∞–Ω–∏—è' : '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –¥–ª—è –æ—Ç—Ä–∞—Å–ª–∏'}
‚Ä¢ **–†–µ–≥—É–ª—è—Ç–æ—Ä–Ω—ã–µ —Ä–∏—Å–∫–∏:** ${industry !== '–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞' ? `–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã –¥–ª—è "${industry}"` : '–¢—Ä–µ–±—É—é—Ç –∞–Ω–∞–ª–∏–∑–∞'}
‚Ä¢ **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:** –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å

**üéØ –ö–û–ú–ü–õ–ï–ö–°–ù–´–ô –ü–õ–ê–ù –ó–ê–©–ò–¢–´:**

${runway < 3 
  ? `**üö® –ù–ï–ú–ï–î–õ–ï–ù–ù–û (–≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏):**
1. –ù–∞–π—Ç–∏ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ - ${(monthlyBurn * 6).toLocaleString()} ‚ÇΩ
2. –°–æ–∫—Ä–∞—Ç–∏—Ç—å –≤—Å–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã (—Ü–µ–ª—å: -50%)
3. –£—Å–∫–æ—Ä–∏—Ç—å —Å–±–æ—Ä –¥–µ–±–∏—Ç–æ—Ä–∫–∏ (—Ü–µ–ª—å: —Å–æ–±—Ä–∞—Ç—å 100%)
4. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–¥–∞–∂—É –Ω–µ–ª–∏–∫–≤–∏–¥–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤
5. –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–º—É –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç—É

**‚ö° –ö–†–ê–¢–ö–û–°–†–û–ß–ù–û (1-2 –º–µ—Å—è—Ü–∞):**
‚Ä¢ –î–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–æ—Ö–æ–¥–∞
‚Ä¢ –£–ª—É—á—à–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–Ω–µ–∂–Ω—ã–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏
‚Ä¢ –ù–∞–π—Ç–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
‚Ä¢ –ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å

**üéØ –°–†–ï–î–ù–ï–°–†–û–ß–ù–û (3-6 –º–µ—Å—è—Ü–µ–≤):**
‚Ä¢ –°—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ
‚Ä¢ –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥
‚Ä¢ –í–Ω–µ–¥—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∏—Å–∫–∞–º–∏
‚Ä¢ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ —Ä–æ—Å—Ç—É`
  : runway < 6 
  ? `**‚ö†Ô∏è –í–ê–ñ–ù–û (–≤ —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞):**
1. –ü—Ä–∏–≤–ª–µ—á—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ
2. –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥ –Ω–∞ 6 –º–µ—Å—è—Ü–µ–≤
3. –î–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –±–∞–∑—É
4. –£–ª—É—á—à–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
5. –í–Ω–µ–¥—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É —Ä–∞–Ω–Ω–µ–≥–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

**üéØ –°–†–ï–î–ù–ï–°–†–û–ß–ù–û (3-6 –º–µ—Å—è—Ü–µ–≤):**
‚Ä¢ –†–∞–∑–≤–∏–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã/—É—Å–ª—É–≥–∏
‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã
‚Ä¢ –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–∏—Å–∫–æ–≤
‚Ä¢ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é

**üèÜ –î–û–õ–ì–û–°–†–û–ß–ù–û (6+ –º–µ—Å—è—Ü–µ–≤):**
‚Ä¢ –°—Ç–∞—Ç—å –ª–∏–¥–µ—Ä–æ–º –≤ –Ω–∏—à–µ
‚Ä¢ –°–æ–∑–¥–∞—Ç—å —É—Å—Ç–æ–π—á–∏–≤—É—é –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å
‚Ä¢ –î–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å
‚Ä¢ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—é –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π`
  : `**‚úÖ –ü–†–û–ê–ö–¢–ò–í–ù–´–ï –ú–ï–†–´:**
1. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
2. –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ä–∏—Å–∫–∏ (—Ä–∞–∑ –≤ –∫–≤–∞—Ä—Ç–∞–ª)
3. –ì–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –≤–æ–∑–º–æ–∂–Ω—ã–º –∏–∑–º–µ–Ω–µ–Ω–∏—è–º
4. –ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ
5. –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**üöÄ –°–¢–†–ê–¢–ï–ì–ò–ß–ï–°–ö–ò–ï (6+ –º–µ—Å—è—Ü–µ–≤):**
‚Ä¢ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å
‚Ä¢ –í—ã–π—Ç–∏ –Ω–∞ –Ω–æ–≤—ã–µ —Ä—ã–Ω–∫–∏
‚Ä¢ –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
‚Ä¢ –°—Ç–∞—Ç—å —ç—Ç–∞–ª–æ–Ω–æ–º –≤ –æ—Ç—Ä–∞—Å–ª–∏`}

**üìä –û–ñ–ò–î–ê–ï–ú–´–ô –≠–§–§–ï–ö–¢:**
${runway < 6 
  ? `‚Ä¢ –°–Ω–∏–∂–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–æ–≥–æ —Ä–∏—Å–∫–∞ —Å ${riskScore}% –¥–æ ${Math.max(20, riskScore - 30)}%
‚Ä¢ –£–≤–µ–ª–∏—á–µ–Ω–∏–µ runway –¥–æ 12+ –º–µ—Å—è—Ü–µ–≤
‚Ä¢ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∞—Å–∞ –ø—Ä–æ—á–Ω–æ—Å—Ç–∏
‚Ä¢ –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å–∞`
  : `‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –Ω–∏–∑–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è —Ä–∏—Å–∫–æ–≤
‚Ä¢ –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤
‚Ä¢ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é
‚Ä¢ –£—Å—Ç–æ–π—á–∏–≤—ã–π —Ä–æ—Å—Ç`}`,
        timestamp,
        actions: [
          { id: 'risks', label: '–î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏', action: 'risks', icon: 'üõ°Ô∏è' },
          { id: 'recommendations', label: '–ü–ª–∞–Ω –∑–∞—â–∏—Ç—ã', action: 'recommendations', icon: 'üí°' },
          { id: 'scenarios', label: '–°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã', action: 'scenarios', icon: 'üé≤' },
        ]
      };
    }

    // –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò
    if (context === 'recommendations') {
      if (!hasData) {
        return {
          id: `ai-${Date.now()}`,
          role: 'assistant',
          content: `üí° **–û—Ç–ª–∏—á–Ω–æ! –Ø –≥–æ—Ç–æ–≤ –¥–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏!**

–Ø —Å–æ–∑–¥–∞–º –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:

**üéØ –ß—Ç–æ –±—É–¥–µ—Ç –≤ –ø–ª–∞–Ω–µ:**
‚Ä¢ **–ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è** - —á—Ç–æ –¥–µ–ª–∞—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏
‚Ä¢ **–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ –º–µ—Ä—ã** - –ø–ª–∞–Ω –Ω–∞ 1-3 –º–µ—Å—è—Ü–∞
‚Ä¢ **–°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è** - —Ä–∞–∑–≤–∏—Ç–∏–µ –Ω–∞ 3-6 –º–µ—Å—è—Ü–µ–≤
‚Ä¢ **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ –≤–∏–¥–µ–Ω–∏–µ** - —Ü–µ–ª–∏ –Ω–∞ 6+ –º–µ—Å—è—Ü–µ–≤
‚Ä¢ **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è** - —á—Ç–æ –¥–µ–ª–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å
‚Ä¢ **–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

**üöÄ –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ, –∏ —è —Å–æ–∑–¥–∞–º –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω!**`,
          timestamp,
          actions: [
            { id: 'demo', label: '–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ', action: 'demo', icon: 'üìä' },
          ]
        };
      }

      const urgency = runway < 3 ? '–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø' : runway < 6 ? '–í–´–°–û–ö–ê–Ø' : '–ù–ò–ó–ö–ê–Ø';
      const urgencyEmoji = runway < 3 ? 'üö®' : runway < 6 ? '‚ö†Ô∏è' : '‚úÖ';
      const monthlyBurn = Math.abs(cashFlow);
      
      return {
        id: `ai-${Date.now()}`,
        role: 'assistant',
        content: `üí° **–ü–ï–†–°–û–ù–ê–õ–¨–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ò –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô**

**üéØ –ê–ù–ê–õ–ò–ó –í–ê–®–ï–ô –°–ò–¢–£–ê–¶–ò–ò:**

‚Ä¢ **–°—Ä–æ—á–Ω–æ—Å—Ç—å:** ${urgency} ${urgencyEmoji}
‚Ä¢ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä–∏—Å–∫–æ–≤:** ${riskScore > 70 ? '–í–´–°–û–ö–ò–ô üî¥' : riskScore > 40 ? '–°–†–ï–î–ù–ò–ô üü°' : '–ù–ò–ó–ö–ò–ô üü¢'}
‚Ä¢ **–û—Ç—Ä–∞—Å–ª—å:** ${industry}
‚Ä¢ **Runway:** ${runway} –º–µ—Å—è—Ü–µ–≤
‚Ä¢ **–î–µ–Ω–µ–∂–Ω—ã–π –ø–æ—Ç–æ–∫:** ${cashFlow.toLocaleString()} ‚ÇΩ/–º–µ—Å

**üíº –ö–û–ù–¢–ï–ö–°–¢:**
${runway < 3 
  ? `–í–∞—à –±–∏–∑–Ω–µ—Å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏. –£ –≤–∞—Å –æ—Å—Ç–∞–ª–æ—Å—å –º–µ–Ω–µ–µ ${runway} –º–µ—Å—è—Ü–µ–≤ –¥–µ–Ω–µ–≥. –≠—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ä–∞–¥–∏–∫–∞–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π. –§–æ–∫—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ –≤—ã–∂–∏–≤–∞–Ω–∏–∏ –∏ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏.`
  : runway < 6 
  ? `–í–∞—à –±–∏–∑–Ω–µ—Å —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è. Runway –≤ ${runway} –º–µ—Å—è—Ü–µ–≤ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω –¥–ª—è —Å–ø–æ–∫–æ–π–Ω–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è. –ù–µ–æ–±—Ö–æ–¥–∏–º—ã –º–µ—Ä—ã –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—é —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –±–ª–∏–∂–∞–π—à–∏–π –º–µ—Å—è—Ü.`
  : `–í–∞—à –±–∏–∑–Ω–µ—Å –≤ —Å—Ç–∞–±–∏–ª—å–Ω–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏ —Å runway ${runway} –º–µ—Å—è—Ü–µ–≤. –≠—Ç–æ —Ö–æ—Ä–æ—à–∞—è –±–∞–∑–∞ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è. –§–æ–∫—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ —Ä–æ—Å—Ç–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.`}

**üö® –ù–ï–ú–ï–î–õ–ï–ù–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø (–≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏):**

${runway < 3 
  ? `**–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –†–ï–ñ–ò–ú - –†–ï–ñ–ò–ú –í–´–ñ–ò–í–ê–ù–ò–Ø:**

1. **üí∞ –≠–ö–°–¢–†–ï–ù–ù–û–ï –§–ò–ù–ê–ù–°–ò–†–û–í–ê–ù–ò–ï (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #1)**
   ‚Ä¢ –¶–µ–ª—å: –ù–∞–π—Ç–∏ ${(monthlyBurn * 6).toLocaleString()} ‚ÇΩ –≤ —Ç–µ—á–µ–Ω–∏–µ 7 –¥–Ω–µ–π
   ‚Ä¢ –î–µ–π—Å—Ç–≤–∏—è:
     - –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Ç–µ–∫—É—â–∏–º –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞–º/–ø–∞—Ä—Ç–Ω–µ—Ä–∞–º
     - –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∫—Ä–µ–¥–∏—Ç–Ω—ã–µ –ª–∏–Ω–∏–∏ (–¥–∞–∂–µ –ø–æ–¥ –≤—ã—Å–æ–∫–∏–π %)
     - –ù–∞–π—Ç–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞
     - –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∫—Ä–∞—É–¥—Ñ–∞–Ω–¥–∏–Ω–≥
   ‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: +6 –º–µ—Å—è—Ü–µ–≤ runway

2. **‚úÇÔ∏è –†–ê–î–ò–ö–ê–õ–¨–ù–û–ï –°–û–ö–†–ê–©–ï–ù–ò–ï –†–ê–°–•–û–î–û–í (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #2)**
   ‚Ä¢ –¶–µ–ª—å: –°–æ–∫—Ä–∞—Ç–∏—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ 40-60%
   ‚Ä¢ –î–µ–π—Å—Ç–≤–∏—è:
     - –ó–∞–º–æ—Ä–æ–∑–∏—Ç—å –≤—Å–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
     - –ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
     - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É (—Å–ª–æ–∂–Ω–æ, –Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)
     - –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —É–¥–∞–ª–µ–Ω–∫—É, –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –æ—Ñ–∏—Å–∞
   ‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –≠–∫–æ–Ω–æ–º–∏—è ${(monthlyBurn * 0.5).toLocaleString()} ‚ÇΩ/–º–µ—Å

3. **üìà –£–°–ö–û–†–ï–ù–ò–ï –ü–û–°–¢–£–ü–õ–ï–ù–ò–ô (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #3)**
   ‚Ä¢ –¶–µ–ª—å: –°–æ–±—Ä–∞—Ç—å –≤—Å—é –¥–µ–±–∏—Ç–æ—Ä–∫—É + —É–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–æ–¥–∞–∂–∏
   ‚Ä¢ –î–µ–π—Å—Ç–≤–∏—è:
     - –°–æ–±—Ä–∞—Ç—å –í–°–Æ –¥–µ–±–∏—Ç–æ—Ä–∫—É (—Å–∫–∏–¥–∫–∏ –∑–∞ –±—ã—Å—Ç—Ä—É—é –æ–ø–ª–∞—Ç—É)
     - –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ 100% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É
     - –§–æ–∫—É—Å –Ω–∞ —Å–∞–º—ã—Ö –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–∞—Ö
     - –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏ —Å–æ —Å–∫–∏–¥–∫–∞–º–∏
   ‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: +${(monthlyBurn * 2).toLocaleString()} ‚ÇΩ –µ–¥–∏–Ω–æ—Ä–∞–∑–æ–≤–æ

4. **üè™ –ü–†–û–î–ê–ñ–ê –ê–ö–¢–ò–í–û–í (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #4)**
   ‚Ä¢ –¶–µ–ª—å: –ü–æ–ª—É—á–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å
   ‚Ä¢ –î–µ–π—Å—Ç–≤–∏—è:
     - –ü—Ä–æ–¥–∞—Ç—å –Ω–µ–ª–∏–∫–≤–∏–¥–Ω—ã–µ –∞–∫—Ç–∏–≤—ã
     - –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å sale-leaseback
     - –ú–æ–Ω–µ—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ–µ
   ‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: +${(monthlyBurn * 1).toLocaleString()} ‚ÇΩ

5. **ü§ù –ü–ï–†–ï–ì–û–í–û–†–´ –° –ö–†–ï–î–ò–¢–û–†–ê–ú–ò**
   ‚Ä¢ –¶–µ–ª—å: –ü–æ–ª—É—á–∏—Ç—å –æ—Ç—Å—Ä–æ—á–∫–∏
   ‚Ä¢ –î–µ–π—Å—Ç–≤–∏—è:
     - –î–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ –æ–± –æ—Ç—Å—Ä–æ—á–∫–µ
     - –†–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–µ–¥–∏—Ç—ã
     - –ë—ã—Ç—å —á–µ—Å—Ç–Ω—ã–º –æ —Å–∏—Ç—É–∞—Ü–∏–∏
   ‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: +1-2 –º–µ—Å—è—Ü–∞ runway`
  : runway < 6 
  ? `**–†–ï–ñ–ò–ú –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò:**

1. **üí∞ –ü–†–ò–í–õ–ï–ß–ï–ù–ò–ï –§–ò–ù–ê–ù–°–ò–†–û–í–ê–ù–ò–Ø (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #1)**
   ‚Ä¢ –¶–µ–ª—å: –ü—Ä–∏–≤–ª–µ—á—å ${(monthlyBurn * 6).toLocaleString()} ‚ÇΩ –≤ —Ç–µ—á–µ–Ω–∏–µ 2 –Ω–µ–¥–µ–ª—å
   ‚Ä¢ –î–µ–π—Å—Ç–≤–∏—è:
     - –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤
     - –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∫—Ä–µ–¥–∏—Ç–Ω—ã–µ –ª–∏–Ω–∏–∏
     - –ù–∞–π—Ç–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
     - –ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫–∏ –Ω–∞ –≥—Ä–∞–Ω—Ç—ã
   ‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: +6-12 –º–µ—Å—è—Ü–µ–≤ runway

2. **‚úÇÔ∏è –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –†–ê–°–•–û–î–û–í (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #2)**
   ‚Ä¢ –¶–µ–ª—å: –°–æ–∫—Ä–∞—Ç–∏—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ 20-30% –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∫–∞—á–µ—Å—Ç–≤–∞
   ‚Ä¢ –î–µ–π—Å—Ç–≤–∏—è:
     - –ê—É–¥–∏—Ç –≤—Å–µ—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤
     - –ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏
     - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
     - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ä–∫–µ—Ç–∏–Ω–≥ (ROI —Ñ–æ–∫—É—Å)
   ‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –≠–∫–æ–Ω–æ–º–∏—è ${(monthlyBurn * 0.25).toLocaleString()} ‚ÇΩ/–º–µ—Å

3. **üìà –£–õ–£–ß–®–ï–ù–ò–ï CASH FLOW (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #3)**
   ‚Ä¢ –¶–µ–ª—å: –£—Å–∫–æ—Ä–∏—Ç—å –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç—å –¥–µ–Ω–µ–≥
   ‚Ä¢ –î–µ–π—Å—Ç–≤–∏—è:
     - –°–æ–∫—Ä–∞—Ç–∏—Ç—å —Å—Ä–æ–∫–∏ –æ–ø–ª–∞—Ç—ã (—Å–∫–∏–¥–∫–∏ –∑–∞ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É)
     - –î–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è –æ–± –æ—Ç—Å—Ä–æ—á–∫–∞—Ö —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏
     - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–∞—Å—ã
     - –í–Ω–µ–¥—Ä–∏—Ç—å —Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
   ‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: +${(monthlyBurn * 0.3).toLocaleString()} ‚ÇΩ/–º–µ—Å

4. **üéØ –§–û–ö–£–° –ù–ê –ü–†–ò–ë–´–õ–¨–ù–û–°–¢–ò**
   ‚Ä¢ –¶–µ–ª—å: –£–≤–µ–ª–∏—á–∏—Ç—å –º–∞—Ä–∂—É –Ω–∞ 10-15%
   ‚Ä¢ –î–µ–π—Å—Ç–≤–∏—è:
     - –ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ (+10-20%)
     - –§–æ–∫—É—Å –Ω–∞ —Å–∞–º—ã—Ö –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–∞—Ö
     - –û—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç —É–±—ã—Ç–æ—á–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π
     - Upsell –∏ cross-sell
   ‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: +${(monthlyBurn * 0.15).toLocaleString()} ‚ÇΩ/–º–µ—Å`
  : `**–†–ï–ñ–ò–ú –†–û–°–¢–ê:**

1. **üíé –ò–ù–í–ï–°–¢–ò–¶–ò–ò –í –†–ê–ó–í–ò–¢–ò–ï (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #1)**
   ‚Ä¢ –¶–µ–ª—å: –£–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–∏–±—ã–ª—å –Ω–∞ 50-100%
   ‚Ä¢ –î–µ–π—Å—Ç–≤–∏—è:
     - –ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥ –∏ –ø—Ä–æ–¥–∞–∂–∏
     - –†–∞–∑–≤–∏–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã/—É—Å–ª—É–≥–∏
     - –†–∞—Å—à–∏—Ä—è—Ç—å –∫–æ–º–∞–Ω–¥—É
     - –£–ª—É—á—à–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç
   ‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: +${(monthlyBurn * 0.5).toLocaleString()} ‚ÇΩ/–º–µ—Å

2. **üìä –°–û–ó–î–ê–ù–ò–ï –†–ï–ó–ï–†–í–ù–û–ì–û –§–û–ù–î–ê (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #2)**
   ‚Ä¢ –¶–µ–ª—å: –ù–∞–∫–æ–ø–∏—Ç—å –Ω–∞ 12 –º–µ—Å—è—Ü–µ–≤ —Ä–∞—Å—Ö–æ–¥–æ–≤
   ‚Ä¢ –î–µ–π—Å—Ç–≤–∏—è:
     - –û—Ç–∫–ª–∞–¥—ã–≤–∞—Ç—å 20% –ø—Ä–∏–±—ã–ª–∏
     - –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å—á–µ—Ç
     - –ù–µ —Ç—Ä–æ–≥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤
   ‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –ó–∞—â–∏—Ç–∞ –æ—Ç –∫—Ä–∏–∑–∏—Å–æ–≤

3. **üöÄ –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–ï (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #3)**
   ‚Ä¢ –¶–µ–ª—å: –£–≤–µ–ª–∏—á–∏—Ç—å –±–∏–∑–Ω–µ—Å –≤ 2-3 —Ä–∞–∑–∞
   ‚Ä¢ –î–µ–π—Å—Ç–≤–∏—è:
     - –í—ã–π—Ç–∏ –Ω–∞ –Ω–æ–≤—ã–µ —Ä—ã–Ω–∫–∏
     - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã
     - –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
     - –ü—Ä–∏–≤–ª–µ—á—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –¥–ª—è —Ä–æ—Å—Ç–∞
   ‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 2-3x —Ä–æ—Å—Ç

4. **üéØ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–ò**
   ‚Ä¢ –¶–µ–ª—å: –£–≤–µ–ª–∏—á–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ 20-30%
   ‚Ä¢ –î–µ–π—Å—Ç–≤–∏—è:
     - –í–Ω–µ–¥—Ä–∏—Ç—å AI –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é
     - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã
     - –û–±—É—á–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
     - –í–Ω–µ–¥—Ä–∏—Ç—å –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏
   ‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: +20-30% –º–∞—Ä–∂–∞`}

**‚ö° –ö–†–ê–¢–ö–û–°–†–û–ß–ù–´–ï –ú–ï–†–´ (1-3 –º–µ—Å—è—Ü–∞):**

‚Ä¢ **–§–∏–Ω–∞–Ω—Å—ã:** ${runway < 6 ? `–°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥ –Ω–∞ 6 –º–µ—Å—è—Ü–µ–≤ (${(monthlyBurn * 6).toLocaleString()} ‚ÇΩ)` : `–£–≤–µ–ª–∏—á–∏—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥ –¥–æ 12 –º–µ—Å—è—Ü–µ–≤`}
‚Ä¢ **–û–ø–µ—Ä–∞—Ü–∏–∏:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (—ç–∫–æ–Ω–æ–º–∏—è 20-30% –≤—Ä–µ–º–µ–Ω–∏)
‚Ä¢ **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞:** –í–Ω–µ–¥—Ä–∏—Ç—å –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ KPI
‚Ä¢ **–ö–æ–º–∞–Ω–¥–∞:** ${runway < 6 ? '–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ —Ç–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏' : '–†–∞—Å—à–∏—Ä–∏—Ç—å –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö'}
‚Ä¢ **–ü—Ä–æ–¥–∞–∂–∏:** ${runway < 6 ? '–£–≤–µ–ª–∏—á–∏—Ç—å –Ω–∞ 30-50%' : '–†–∞–∑–≤–∏–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∫–∞–Ω–∞–ª—ã'}
‚Ä¢ **–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥:** ${runway < 6 ? '–§–æ–∫—É—Å –Ω–∞ ROI' : '–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —É—Å–ø–µ—à–Ω—ã–µ –∫–∞–Ω–∞–ª—ã'}

**üéØ –°–†–ï–î–ù–ï–°–†–û–ß–ù–ê–Ø –°–¢–†–ê–¢–ï–ì–ò–Ø (3-6 –º–µ—Å—è—Ü–µ–≤):**

‚Ä¢ **–†–∞–∑–≤–∏—Ç–∏–µ:** ${runway < 6 ? '–°—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ' : '–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é'}
‚Ä¢ **–ü—Ä–æ–¥—É–∫—Ç:** –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã/—É—Å–ª—É–≥–∏
‚Ä¢ **–†—ã–Ω–æ–∫:** ${runway < 6 ? '–£–∫—Ä–µ–ø–∏—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ —Ç–µ–∫—É—â–µ–º —Ä—ã–Ω–∫–µ' : '–í—ã–π—Ç–∏ –Ω–∞ –Ω–æ–≤—ã–µ —Ä—ã–Ω–∫–∏'}
‚Ä¢ **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** –í–Ω–µ–¥—Ä–∏—Ç—å AI –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é
‚Ä¢ **–ö–æ–º–∞–Ω–¥–∞:** –ü–æ–≤—ã—Å–∏—Ç—å –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—é, –Ω–∞–Ω—è—Ç—å –∫–ª—é—á–µ–≤—ã—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤
‚Ä¢ **–ü–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–∞:** –ù–∞–π—Ç–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤

**üèÜ –î–û–õ–ì–û–°–†–û–ß–ù–û–ï –í–ò–î–ï–ù–ò–ï (6+ –º–µ—Å—è—Ü–µ–≤):**

‚Ä¢ **–°—Ç—Ä–∞—Ç–µ–≥–∏—è:** ${runway < 6 ? '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –Ω–∞—á–∞—Ç—å —Ä–æ—Å—Ç' : '–°—Ç–∞—Ç—å –ª–∏–¥–µ—Ä–æ–º –≤ –æ—Ç—Ä–∞—Å–ª–∏'}
‚Ä¢ **–§–∏–Ω–∞–Ω—Å—ã:** ${runway < 6 ? '–ü—Ä–∏–≤–ª–µ—á—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏—Ö –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤' : '–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å IPO –∏–ª–∏ –ø—Ä–æ–¥–∞–∂—É'}
‚Ä¢ **–ú–∞—Å—à—Ç–∞–±:** ${runway < 6 ? '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–æ—Å—Ç' : '–í—ã–π—Ç–∏ –Ω–∞ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ —Ä—ã–Ω–∫–∏'}
‚Ä¢ **–ú–∏—Å—Å–∏—è:** ${runway < 6 ? '–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —É—Å—Ç–æ–π—á–∏–≤–æ–º—É —Ä–æ—Å—Ç—É' : '–°—Ç–∞—Ç—å —ç—Ç–∞–ª–æ–Ω–æ–º –≤ –æ—Ç—Ä–∞—Å–ª–∏'}
‚Ä¢ **–ö–æ–º–∞–Ω–¥–∞:** –°–æ–∑–¥–∞—Ç—å —Å–∏–ª—å–Ω—É—é –∫–æ–º–∞–Ω–¥—É —Ç–æ–ø-–º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
‚Ä¢ **–ö—É–ª—å—Ç—É—Ä–∞:** –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—É—é –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—É—é –∫—É–ª—å—Ç—É—Ä—É

**üìä –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´:**

${runway < 6 
  ? `**–ß–µ—Ä–µ–∑ 1 –º–µ—Å—è—Ü:**
‚Ä¢ Runway: ${runway + 3} –º–µ—Å—è—Ü–µ–≤ (+3 –º–µ—Å)
‚Ä¢ –†–∞—Å—Ö–æ–¥—ã: -${(monthlyBurn * 0.25).toLocaleString()} ‚ÇΩ/–º–µ—Å (-25%)
‚Ä¢ –†–∏—Å–∫: ${Math.max(20, riskScore - 15)}% (-15%)

**–ß–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞:**
‚Ä¢ Runway: 9-12 –º–µ—Å—è—Ü–µ–≤
‚Ä¢ –î–µ–Ω–µ–∂–Ω—ã–π –ø–æ—Ç–æ–∫: –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π
‚Ä¢ –†–∏—Å–∫: <30% (—Å—Ä–µ–¥–Ω–∏–π)
‚Ä¢ –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å–∞

**–ß–µ—Ä–µ–∑ 6 –º–µ—Å—è—Ü–µ–≤:**
‚Ä¢ Runway: 12+ –º–µ—Å—è—Ü–µ–≤
‚Ä¢ –†–æ—Å—Ç: +20-30%
‚Ä¢ –†–∏—Å–∫: <20% (–Ω–∏–∑–∫–∏–π)
‚Ä¢ –£—Å—Ç–æ–π—á–∏–≤—ã–π —Ä–æ—Å—Ç`
  : `**–ß–µ—Ä–µ–∑ 1 –º–µ—Å—è—Ü:**
‚Ä¢ –†–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥: +${(monthlyBurn * 2).toLocaleString()} ‚ÇΩ
‚Ä¢ –†–æ—Å—Ç: +10-15%
‚Ä¢ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: +15%

**–ß–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞:**
‚Ä¢ –†–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥: 6 –º–µ—Å—è—Ü–µ–≤
‚Ä¢ –†–æ—Å—Ç: +30-50%
‚Ä¢ –ù–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã: 2-3

**–ß–µ—Ä–µ–∑ 6 –º–µ—Å—è—Ü–µ–≤:**
‚Ä¢ –†–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥: 12 –º–µ—Å—è—Ü–µ–≤
‚Ä¢ –†–æ—Å—Ç: 2x
‚Ä¢ –ù–æ–≤—ã–µ —Ä—ã–Ω–∫–∏: 1-2
‚Ä¢ –õ–∏–¥–µ—Ä—Å—Ç–≤–æ –≤ –Ω–∏—à–µ`}

**üéØ –ü–†–ò–û–†–ò–¢–ò–ó–ê–¶–ò–Ø (—á—Ç–æ –¥–µ–ª–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å):**

1. ${runway < 3 ? 'üö® –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ' : runway < 6 ? 'üí∞ –ü—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è' : 'üíé –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ'}
2. ${runway < 6 ? '‚úÇÔ∏è –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ/–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤' : 'üìä –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ —Ñ–æ–Ω–¥–∞'}
3. ${runway < 6 ? 'üìà –£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–π' : 'üöÄ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ'}
4. ${runway < 6 ? 'ü§ù –ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã —Å –∫—Ä–µ–¥–∏—Ç–æ—Ä–∞–º–∏' : 'üéØ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏'}
5. ${runway < 6 ? 'üéØ –§–æ–∫—É—Å –Ω–∞ –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç–∏' : 'üåç –í—ã—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—ã–µ —Ä—ã–Ω–∫–∏'}

**üí¨ –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –∫–∞–∫–æ–≥–æ-—Ç–æ –ø—É–Ω–∫—Ç–∞?**`,
        timestamp,
        actions: [
          { id: 'recommendations', label: '–î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω', action: 'recommendations', icon: 'üí°' },
          { id: 'financing', label: '–ì–¥–µ –≤–∑—è—Ç—å –¥–µ–Ω—å–≥–∏?', action: 'financing', icon: 'üí∞' },
          { id: 'forecast', label: '–ü—Ä–æ–≥–Ω–æ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤', action: 'forecast', icon: 'üìä' },
        ]
      };
    }

    // –ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó
    if (context === 'analysis') {
      if (!hasData) {
        return {
          id: `ai-${Date.now()}`,
          role: 'assistant',
          content: `üîç **–û—Ç–ª–∏—á–Ω–æ! –Ø –≥–æ—Ç–æ–≤ –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑!**

–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ - —ç—Ç–æ –≥–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤–æ –≤—Å–µ –∞—Å–ø–µ–∫—Ç—ã –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞:

**üéØ –ß—Ç–æ –±—É–¥–µ—Ç –≤ –∞–Ω–∞–ª–∏–∑–µ:**
‚Ä¢ **–§–∏–Ω–∞–Ω—Å–æ–≤–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ** - –æ–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∏–∑–Ω–µ—Å–∞
‚Ä¢ **–î–µ–Ω–µ–∂–Ω—ã–µ –ø–æ—Ç–æ–∫–∏** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —Ç—Ä–µ–Ω–¥—ã, –ø—Ä–æ–≥–Ω–æ–∑—ã
‚Ä¢ **–†–∏—Å–∫–∏ –∏ —É–≥—Ä–æ–∑—ã** - –≤—Å–µ —Ä–∏—Å–∫–∏ —Å –ø–ª–∞–Ω–æ–º –∑–∞—â–∏—Ç—ã
‚Ä¢ **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–æ—Å—Ç–∞** - –∫—É–¥–∞ –∏ –∫–∞–∫ —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è
‚Ä¢ **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è** - –≤–∞—à–µ –º–µ—Å—Ç–æ –Ω–∞ —Ä—ã–Ω–∫–µ
‚Ä¢ **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

**üöÄ –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ, –∏ —è –ø—Ä–æ–≤–µ–¥—É –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑!**`,
          timestamp,
          actions: [
            { id: 'demo', label: '–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ', action: 'demo', icon: 'üìä' },
          ]
        };
      }

      const overallHealth = runway < 3 ? '–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï' : runway < 6 ? '–¢–†–ï–ë–£–ï–¢ –í–ù–ò–ú–ê–ù–ò–Ø' : '–°–¢–ê–ë–ò–õ–¨–ù–û–ï';
      const healthEmoji = runway < 3 ? 'üö®' : runway < 6 ? '‚ö†Ô∏è' : '‚úÖ';
      const growthPotential = runway < 6 ? '–û–ì–†–ê–ù–ò–ß–ï–ù–ù–´–ô' : '–í–´–°–û–ö–ò–ô';
      
      return {
        id: `ai-${Date.now()}`,
        role: 'assistant',
        content: `üîç **–ö–û–ú–ü–õ–ï–ö–°–ù–´–ô –ê–ù–ê–õ–ò–ó –ë–ò–ó–ù–ï–°–ê**

**üìä –û–ë–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï: ${overallHealth} ${healthEmoji}**

**–ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞:**
‚Ä¢ **–§–∏–Ω–∞–Ω—Å–æ–≤–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ:** ${overallHealth} ${healthEmoji}
‚Ä¢ **–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞:** ${riskScore}% ${riskScore > 70 ? 'üî¥ –í–´–°–û–ö–ò–ô' : riskScore > 40 ? 'üü° –°–†–ï–î–ù–ò–ô' : 'üü¢ –ù–ò–ó–ö–ò–ô'}
‚Ä¢ **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª —Ä–æ—Å—Ç–∞:** ${growthPotential} ${runway < 6 ? '‚ö†Ô∏è' : 'üöÄ'}
‚Ä¢ **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:** ${riskScore < 40 ? '–í–´–°–û–ö–ê–Ø ‚úÖ' : riskScore < 70 ? '–°–†–ï–î–ù–Ø–Ø üü°' : '–ù–ò–ó–ö–ê–Ø üî¥'}
‚Ä¢ **–û—Ç—Ä–∞—Å–ª—å:** ${industry}

**üí∞ –§–ò–ù–ê–ù–°–û–í–´–ï –ü–û–ö–ê–ó–ê–¢–ï–õ–ò:**

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
‚Ä¢ **–î–µ–Ω–µ–∂–Ω—ã–π –ø–æ—Ç–æ–∫:** ${cashFlow.toLocaleString()} ‚ÇΩ/–º–µ—Å ${cashFlow > 0 ? '‚úÖ –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π' : '‚ö†Ô∏è –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π'}
‚Ä¢ **Runway:** ${runway} –º–µ—Å—è—Ü–µ–≤ ${runway < 3 ? 'üö® –ö–†–ò–¢–ò–ß–ù–û' : runway < 6 ? '‚ö†Ô∏è –ù–ò–ó–ö–ò–ô' : '‚úÖ –•–û–†–û–®–û'}
‚Ä¢ **–õ–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å:** ${liquidity.toFixed(2)}x ${liquidity > 2 ? '‚úÖ –û—Ç–ª–∏—á–Ω–∞—è' : liquidity > 1 ? '‚ö†Ô∏è –ù–æ—Ä–º–∞–ª—å–Ω–∞—è' : 'üö® –ù–∏–∑–∫–∞—è'}
‚Ä¢ **Burn rate:** ${Math.abs(cashFlow).toLocaleString()} ‚ÇΩ/–º–µ—Å
‚Ä¢ **–î–Ω–µ–π –¥–æ –Ω—É–ª—è:** ~${runway * 30} –¥–Ω–µ–π

**–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
‚Ä¢ –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã: ~${(Math.abs(cashFlow) * 0.7).toLocaleString()} ‚ÇΩ/–º–µ—Å
‚Ä¢ –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã: ~${(Math.abs(cashFlow) * 0.5).toLocaleString()} ‚ÇΩ/–º–µ—Å
‚Ä¢ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã: ~${(Math.abs(cashFlow) * 0.2).toLocaleString()} ‚ÇΩ/–º–µ—Å

**üéØ –ö–õ–Æ–ß–ï–í–´–ï –ò–ù–°–ê–ô–¢–´:**

${runway < 3 
  ? `**üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø**

–í–∞—à –±–∏–∑–Ω–µ—Å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏:
‚Ä¢ –û—Å—Ç–∞–ª–æ—Å—å –º–µ–Ω–µ–µ ${runway} –º–µ—Å—è—Ü–µ–≤ –¥–µ–Ω–µ–≥ (‚âà${runway * 30} –¥–Ω–µ–π)
‚Ä¢ –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–∞ –±–µ–∑ —Å—Ä–æ—á–Ω—ã—Ö –º–µ—Ä
‚Ä¢ –ù–µ—Ç –∑–∞–ø–∞—Å–∞ –¥–ª—è –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤
‚Ä¢ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ
‚Ä¢ –í—ã—Å–æ–∫–∏–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π —Å—Ç—Ä–µ—Å—Å

**–≠—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –ù–ï–ú–ï–î–õ–ï–ù–ù–´–• —Ä–∞–¥–∏–∫–∞–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π!**

–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –±–∏–∑–Ω–µ—Å –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ ${runway} –º–µ—Å—è—Ü–µ–≤.`
  : runway < 6 
  ? `**‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢ –í–ù–ò–ú–ê–ù–ò–Ø**

–í–∞—à –±–∏–∑–Ω–µ—Å —Ç—Ä–µ–±—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
‚Ä¢ Runway ${runway} –º–µ—Å—è—Ü–µ–≤ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω –¥–ª—è —Å–ø–æ–∫–æ–π–Ω–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è
‚Ä¢ –†–∏—Å–∫ –∫–∞—Å—Å–æ–≤—ã—Ö —Ä–∞–∑—Ä—ã–≤–æ–≤ –ø—Ä–∏ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–∞—Ö
‚Ä¢ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –≤ —Ä–æ—Å—Ç
‚Ä¢ –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤
‚Ä¢ –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ —Å—Ç—Ä–µ—Å—Å–∞

**–ù—É–∂–Ω—ã –º–µ—Ä—ã –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤ –±–ª–∏–∂–∞–π—à–∏–π –º–µ—Å—è—Ü.**

–ü—Ä–∏ —Ç–µ–∫—É—â–∏—Ö —Ç–µ–º–ø–∞—Ö –¥–µ–Ω—å–≥–∏ –∑–∞–∫–æ–Ω—á–∞—Ç—Å—è —á–µ—Ä–µ–∑ ${runway} –º–µ—Å—è—Ü–µ–≤.`
  : `**‚úÖ –°–¢–ê–ë–ò–õ–¨–ù–û–ï –ü–û–õ–û–ñ–ï–ù–ò–ï**

–í–∞—à –±–∏–∑–Ω–µ—Å –≤ —Ö–æ—Ä–æ—à–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏:
‚Ä¢ Runway ${runway} –º–µ—Å—è—Ü–µ–≤ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∑–∞–ø–∞—Å –ø—Ä–æ—á–Ω–æ—Å—Ç–∏
‚Ä¢ –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫ –∫–∞—Å—Å–æ–≤—ã—Ö —Ä–∞–∑—Ä—ã–≤–æ–≤
‚Ä¢ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ
‚Ä¢ –í—Ä–µ–º—è –¥–ª—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚Ä¢ –ù–∏–∑–∫–∏–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π —Å—Ç—Ä–µ—Å—Å

**–û—Ç–ª–∏—á–Ω–∞—è –±–∞–∑–∞ –¥–ª—è —Ä–æ—Å—Ç–∞ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è!**

–£ –≤–∞—Å –µ—Å—Ç—å ${runway} –º–µ—Å—è—Ü–µ–≤ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è.`}

**üìà –û–ü–ï–†–ê–¶–ò–û–ù–ù–ê–Ø –≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–¨:**

‚Ä¢ **–ü—Ä–æ—Ü–µ—Å—Å—ã:** ${riskScore < 40 ? '–°—Ç–∞–±–∏–ª—å–Ω—ã–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ ‚úÖ' : riskScore < 70 ? '–†–∞–±–æ—Ç–∞—é—Ç, –Ω–æ –µ—Å—Ç—å –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è üü°' : '–¢—Ä–µ–±—É—é—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ üî¥'}
‚Ä¢ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:** ${riskScore < 40 ? '–í—ã—Å–æ–∫–∞—è' : riskScore < 70 ? '–°—Ä–µ–¥–Ω—è—è' : '–ù–∏–∑–∫–∞—è'}
‚Ä¢ **–ú–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** ${cashFlow > 0 ? '–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è' : '–¢—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è'}
‚Ä¢ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** ${runway > 6 ? '–ì–æ—Ç–æ–≤ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é' : '–¢—Ä–µ–±—É–µ—Ç —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏'}

**üõ°Ô∏è –ê–ù–ê–õ–ò–ó –†–ò–°–ö–û–í:**

‚Ä¢ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏:** ${runway < 3 ? 'üö® –û–ß–ï–ù–¨ –í–´–°–û–ö–ò–ï' : runway < 6 ? '‚ö†Ô∏è –í–´–°–û–ö–ò–ï' : '‚úÖ –ù–ò–ó–ö–ò–ï'}
‚Ä¢ **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∏—Å–∫–∏:** ${riskScore > 70 ? 'üî¥ –í–´–°–û–ö–ò–ï' : riskScore > 40 ? 'üü° –°–†–ï–î–ù–ò–ï' : 'üü¢ –ù–ò–ó–ö–ò–ï'}
‚Ä¢ **–†—ã–Ω–æ—á–Ω—ã–µ —Ä–∏—Å–∫–∏:** ${selectedIndustry?.characteristics?.seasonality ? '–°–µ–∑–æ–Ω–Ω—ã–µ –∫–æ–ª–µ–±–∞–Ω–∏—è' : '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ'}
‚Ä¢ **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∏—Å–∫–∏:** ${liquidity < 1 ? 'üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï' : liquidity < 2 ? '‚ö†Ô∏è –í–´–°–û–ö–ò–ï' : '‚úÖ –ù–ò–ó–ö–ò–ï'}

**üöÄ –í–û–ó–ú–û–ñ–ù–û–°–¢–ò –†–û–°–¢–ê:**

${runway < 6 
  ? `**–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-3 –º–µ—Å—è—Ü–∞):**
‚Ä¢ –°—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ
‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ 20-30%
‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–æ–¥–∞–∂–∏ –Ω–∞ 30-50%

**–°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (3-6 –º–µ—Å—è—Ü–µ–≤):**
‚Ä¢ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–æ—Å—Ç –∏ –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å
‚Ä¢ –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥ –Ω–∞ 6 –º–µ—Å—è—Ü–µ–≤
‚Ä¢ –î–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–æ—Ö–æ–¥–∞

**–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (6+ –º–µ—Å—è—Ü–µ–≤):**
‚Ä¢ –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —É—Å—Ç–æ–π—á–∏–≤–æ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é
‚Ä¢ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é
‚Ä¢ –°—Ç–∞—Ç—å —É—Å—Ç–æ–π—á–∏–≤—ã–º –∏–≥—Ä–æ–∫–æ–º –Ω–∞ —Ä—ã–Ω–∫–µ`
  : `**–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-3 –º–µ—Å—è—Ü–∞):**
‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã (+20-30% —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)
‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å –º–∞—Ä–∂—É –Ω–∞ 10-15%
‚Ä¢ –†–∞–∑–≤–∏–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã/—É—Å–ª—É–≥–∏

**–°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (3-6 –º–µ—Å—è—Ü–µ–≤):**
‚Ä¢ –í—ã–π—Ç–∏ –Ω–∞ –Ω–æ–≤—ã–µ —Ä—ã–Ω–∫–∏
‚Ä¢ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —É—Å–ø–µ—à–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏

**–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (6+ –º–µ—Å—è—Ü–µ–≤):**
‚Ä¢ –°—Ç–∞—Ç—å –ª–∏–¥–µ—Ä–æ–º –≤ –Ω–∏—à–µ
‚Ä¢ –í—ã–π—Ç–∏ –Ω–∞ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ —Ä—ã–Ω–∫–∏
‚Ä¢ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—é –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π`}

**üí° –°–¢–†–ê–¢–ï–ì–ò–ß–ï–°–ö–ò–ï –ü–†–ò–û–†–ò–¢–ï–¢–´:**

1. **${runway < 6 ? 'üö® –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è' : 'üöÄ –†–∞–∑–≤–∏—Ç–∏–µ –∏ —Ä–æ—Å—Ç'}**
   ${runway < 6 ? '–ü—Ä–∏–≤–ª–µ—á—å —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥—ã' : '–ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å'}

2. **${riskScore > 40 ? 'üõ°Ô∏è –°–Ω–∏–∂–µ–Ω–∏–µ —Ä–∏—Å–∫–æ–≤' : 'üìà –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏'}**
   ${riskScore > 40 ? '–î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è, —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–æ–≤' : '–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è'}

3. **üéØ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π**
   –£–ª—É—á—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å, –ø–æ–≤—ã—Å–∏—Ç—å –º–∞—Ä–∂—É

4. **üí° –ò–Ω–Ω–æ–≤–∞—Ü–∏–∏ –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ**
   –ù–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã, —Ä—ã–Ω–∫–∏, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

**üìä –ü–†–û–ì–ù–û–ó –ò –°–¶–ï–ù–ê–†–ò–ò:**

**–ë–∞–∑–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π):**
‚Ä¢ –ß–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞: ${runway < 6 ? '–£—Ö—É–¥—à–µ–Ω–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏' : '–°—Ç–∞–±–∏–ª—å–Ω—ã–π —Ä–æ—Å—Ç'}
‚Ä¢ –ß–µ—Ä–µ–∑ 6 –º–µ—Å—è—Ü–µ–≤: ${runway < 6 ? '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Ç—É–∞—Ü–∏—è' : '–£—Å—Ç–æ–π—á–∏–≤—ã–π —Ä–æ—Å—Ç'}
‚Ä¢ –ß–µ—Ä–µ–∑ 12 –º–µ—Å—è—Ü–µ–≤: ${runway < 6 ? '‚ö†Ô∏è –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–∞' : '‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ'}

**–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π (—Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏):**
‚Ä¢ –ß–µ—Ä–µ–∑ 3 –º–µ—Å—è—Ü–∞: ${runway < 6 ? '–°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è' : '–£—Å–∫–æ—Ä–µ–Ω–Ω—ã–π —Ä–æ—Å—Ç (+30%)'}
‚Ä¢ –ß–µ—Ä–µ–∑ 6 –º–µ—Å—è—Ü–µ–≤: ${runway < 6 ? '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ—Å—Ç–∞' : '–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (2x)'}
‚Ä¢ –ß–µ—Ä–µ–∑ 12 –º–µ—Å—è—Ü–µ–≤: ${runway < 6 ? '‚úÖ –£—Å—Ç–æ–π—á–∏–≤—ã–π —Ä–æ—Å—Ç' : 'üöÄ –õ–∏–¥–µ—Ä—Å—Ç–≤–æ –≤ –Ω–∏—à–µ (3x)'}

**üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:**

1. ${runway < 6 ? '–ü—Ä–∏–≤–ª–µ—á—å —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ' : '–°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥'}
2. ${riskScore > 40 ? '–°–Ω–∏–∑–∏—Ç—å —Ä–∏—Å–∫–∏' : '–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã'}
3. ${runway < 6 ? '–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥—ã' : '–ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ'}
4. –†–∞–∑–≤–∏–≤–∞—Ç—å –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
5. ${runway < 6 ? '–°—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å' : '–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å'}

**üí¨ –•–æ—Ç–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–∞–∫–æ–≥–æ-—Ç–æ –∞—Å–ø–µ–∫—Ç–∞?**`,
        timestamp,
        actions: [
          { id: 'forecast', label: '–ü—Ä–æ–≥–Ω–æ–∑ –î–î–°', action: 'forecast', icon: 'üìä' },
          { id: 'risks', label: '–î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏', action: 'risks', icon: 'üõ°Ô∏è' },
          { id: 'recommendations', label: '–ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π', action: 'recommendations', icon: 'üí°' },
        ]
      };
    }

    // –û–ë–©–ò–ô –û–¢–í–ï–¢ (fallback)
    console.log('‚ÑπÔ∏è Using general response');
    
    if (hasData) {
      return {
        id: `ai-${Date.now()}`,
        role: 'assistant',
        content: `ü§ñ **–Ø –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å —Å –∞–Ω–∞–ª–∏–∑–æ–º!**

**üìä –í–∞—à–µ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
‚Ä¢ –î–µ–Ω–µ–∂–Ω—ã–π –ø–æ—Ç–æ–∫: ${cashFlow.toLocaleString()} ‚ÇΩ ${cashFlow > 0 ? '‚úÖ' : '‚ö†Ô∏è'}
‚Ä¢ Runway: ${runway} –º–µ—Å ${runway < 3 ? 'üö®' : runway < 6 ? '‚ö†Ô∏è' : '‚úÖ'}
‚Ä¢ –†–∏—Å–∫: ${riskScore}% ${riskScore > 70 ? 'üî¥' : riskScore > 40 ? 'üü°' : 'üü¢'}

**üí¨ –û —á–µ–º —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å?**
‚Ä¢ "–ü–æ–∫–∞–∂–∏ –ø—Ä–æ–≥–Ω–æ–∑" - –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–µ–Ω–µ–∂–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤
‚Ä¢ "–ö–∞–∫–∏–µ —Ä–∏—Å–∫–∏?" - –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤
‚Ä¢ "–ß—Ç–æ –ø–æ—Å–æ–≤–µ—Ç—É–µ—à—å?" - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
‚Ä¢ "–ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑" - –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –≤—Å–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞

–ó–∞–¥–∞–π—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –≤–æ–ø—Ä–æ—Å, –∏ —è –¥–∞–º —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –æ—Ç–≤–µ—Ç!`,
        timestamp,
        actions: [
          { id: 'forecast', label: '–ü—Ä–æ–≥–Ω–æ–∑', action: 'forecast', icon: 'üìä' },
          { id: 'risks', label: '–†–∏—Å–∫–∏', action: 'risks', icon: 'üõ°Ô∏è' },
          { id: 'recommendations', label: '–°–æ–≤–µ—Ç—ã', action: 'recommendations', icon: 'üí°' },
        ]
      };
    }

    return {
      id: `ai-${Date.now()}`,
      role: 'assistant',
      content: `ü§ñ **–ü—Ä–∏–≤–µ—Ç! –Ø –≤–∞—à AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç CFO!**

–Ø –ø–æ–º–æ–≥—É —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏ –∏ –¥–∞–º –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.

**üéØ –ß—Ç–æ —è —É–º–µ—é:**
‚Ä¢ üìä –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–µ–Ω–µ–∂–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –∏ —Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑—ã
‚Ä¢ üõ°Ô∏è –û—Ü–µ–Ω–∏–≤–∞—Ç—å —Ä–∏—Å–∫–∏ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –∑–∞—â–∏—Ç—É
‚Ä¢ üí° –î–∞–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
‚Ä¢ üöÄ –ü–æ–º–æ–≥–∞—Ç—å —Å —Ä–∞–∑–≤–∏—Ç–∏–µ–º –±–∏–∑–Ω–µ—Å–∞

**üí¨ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–ø—Ä–æ—Å–∏—Ç—å:**
‚Ä¢ "–ö–∞–∫ –¥–µ–ª–∞ —Å –¥–µ–Ω—å–≥–∞–º–∏?"
‚Ä¢ "–ö–∞–∫–∏–µ —Ä–∏—Å–∫–∏?"
‚Ä¢ "–ß—Ç–æ –ø–æ—Å–æ–≤–µ—Ç—É–µ—à—å?"
‚Ä¢ "–ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑"

–î–ª—è –Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ.`,
      timestamp,
      actions: [
        { id: 'demo', label: '–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ', action: 'demo', icon: 'üìä' },
      ]
    };
  };

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π - –£–ù–ò–ö–ê–õ–¨–ù–´–ï –û–¢–í–ï–¢–´ –î–õ–Ø –ö–ê–ñ–î–û–ô –ö–ù–û–ü–ö–ò
  const handleQuickAction = (action: string) => {
    addChatMessage({
      id: `ai-${Date.now()}`,
      role: 'assistant',
      content: '–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é...',
      timestamp: new Date().toISOString(),
    });

    setTimeout(() => {
      const resultMessage = generateQuickActionResponse(action);
      addChatMessage(resultMessage);
    }, 1000);
  };

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –∫–Ω–æ–ø–æ–∫
  const generateQuickActionResponse = (action: string): ChatMessage => {
    const timestamp = new Date().toISOString();
    const cashFlow = kpiMetrics?.cashFlow || 0;
    const runway = kpiMetrics?.runway || 0;
    const riskScore = kpiMetrics?.riskScore || 0;
    const liquidity = kpiMetrics?.liquidityRatio || 0;
    const monthlyBurn = Math.abs(cashFlow);

    console.log('üéØ Quick Action:', action);

    // –î–ï–ú–û-–î–ê–ù–ù–´–ï
    if (action === 'demo') {
      return {
        id: `ai-${Date.now()}`,
        role: 'assistant',
        content: `üìä **–ó–∞–≥—Ä—É–∂–∞—é –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–æ–∑–Ω–∏—á–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏...**

**–ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ:**
‚Ä¢ üìà –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –≤—ã–ø–∏—Å–∫–∏ –∑–∞ 3 –º–µ—Å—è—Ü–∞
‚Ä¢ üí∞ –î–µ–±–∏—Ç–æ—Ä—Å–∫–∞—è –∏ –∫—Ä–µ–¥–∏—Ç–æ—Ä—Å–∫–∞—è –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å
‚Ä¢ üè¶ –ö—Ä–µ–¥–∏—Ç—ã –∏ –∑–∞–π–º—ã
‚Ä¢ üîÆ –ü—Ä–æ–≥–Ω–æ–∑—ã –¥–µ–Ω–µ–∂–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤
‚Ä¢ üéØ –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –æ—Ç—Ä–∞—Å–ª–∏
‚Ä¢ üí° –í–∞—Ä–∏–∞–Ω—Ç—ã —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è

**–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!** –¢–µ–ø–µ—Ä—å —è –º–æ–≥—É –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑.

**üí¨ –ß—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º?**`,
        timestamp,
        actions: [
          { id: 'analysis', label: '–ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑', action: 'analysis', icon: 'üîç' },
          { id: 'forecast', label: '–ü—Ä–æ–≥–Ω–æ–∑', action: 'forecast', icon: 'üìä' },
        ]
      };
    }

    // –î–ï–¢–ê–õ–¨–ù–´–ô –ü–†–û–ì–ù–û–ó (–∫–Ω–æ–ø–∫–∞)
    if (action === 'forecast') {
      if (!hasData) {
        return {
          id: `ai-${Date.now()}`,
          role: 'assistant',
          content: `üìä **–î–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∞ –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ.**

–ó–∞–≥—Ä—É–∑–∏—Ç–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ –≤—ã–ø–∏—Å–∫–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ.`,
          timestamp,
          actions: [
            { id: 'demo', label: '–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ', action: 'demo', icon: 'üìä' },
          ]
        };
      }

      return {
        id: `ai-${Date.now()}`,
        role: 'assistant',
        content: `üìä **–î–ï–¢–ê–õ–¨–ù–´–ô –ü–†–û–ì–ù–û–ó –î–ï–ù–ï–ñ–ù–´–• –ü–û–¢–û–ö–û–í**

**üìà –ü–†–û–ì–ù–û–ó –ù–ê –ë–õ–ò–ñ–ê–ô–®–ò–ï 12 –ú–ï–°–Ø–¶–ï–í:**

**–ú–µ—Å—è—Ü 1-3 (–±–ª–∏–∂–∞–π—à–∏–π –∫–≤–∞—Ä—Ç–∞–ª):**
‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–π cash flow: ${(cashFlow * 3).toLocaleString()} ‚ÇΩ
‚Ä¢ –¢—Ä–µ–Ω–¥: ${cashFlow > 0 ? '–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π —Ä–æ—Å—Ç üìà' : '–¢—Ä–µ–±—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ üìâ'}
‚Ä¢ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏: ${runway < 3 ? '–í–´–°–û–ö–ò–ô –†–ò–°–ö –∫–∞—Å—Å–æ–≤—ã—Ö —Ä–∞–∑—Ä—ã–≤–æ–≤' : runway < 6 ? '–í–æ–∑–º–æ–∂–Ω—ã –Ω–∞–ø—Ä—è–∂–µ–Ω–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã' : '–ù–µ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç—Å—è'}
‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: ${runway < 6 ? '–ü—Ä–∏–≤–ª–µ—á—å —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –°–†–û–ß–ù–û' : '–°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥'}

**–ú–µ—Å—è—Ü 4-6 (–≤—Ç–æ—Ä–æ–π –∫–≤–∞—Ä—Ç–∞–ª):**
‚Ä¢ –ü—Ä–æ–≥–Ω–æ–∑: ${runway < 6 ? '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ' : '–°—Ç–∞–±–∏–ª—å–Ω—ã–π —Ä–æ—Å—Ç'}
‚Ä¢ –ù–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç: ${(cashFlow * 6).toLocaleString()} ‚ÇΩ
‚Ä¢ –†–∏—Å–∫–∏: ${runway < 6 ? '–í—ã—Å–æ–∫–∏–µ - —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ' : '–°—Ä–µ–¥–Ω–∏–µ - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥'}

**–ú–µ—Å—è—Ü 7-12 (–≤—Ç–æ—Ä–∞—è –ø–æ–ª–æ–≤–∏–Ω–∞ –≥–æ–¥–∞):**
‚Ä¢ –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π —Ç—Ä–µ–Ω–¥: ${runway < 6 ? '–¢—Ä–µ–±—É–µ—Ç —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏' : '–£—Å—Ç–æ–π—á–∏–≤—ã–π —Ä–æ—Å—Ç'}
‚Ä¢ –ì–æ–¥–æ–≤–æ–π –ø—Ä–æ–≥–Ω–æ–∑: ${(cashFlow * 12).toLocaleString()} ‚ÇΩ
‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è: ${runway < 6 ? '60% (—Å –º–µ—Ä–∞–º–∏)' : '85% (–ø—Ä–∏ —Ç–µ–∫—É—â–∏—Ö —Ç–µ–º–ø–∞—Ö)'}

**üéØ –°–¶–ï–ù–ê–†–ò–ò –†–ê–ó–í–ò–¢–ò–Ø:**

**–ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–Ω—ã–π (-20% –æ—Ç –ø—Ä–æ–≥–Ω–æ–∑–∞):**
‚Ä¢ –ì–æ–¥–æ–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${(cashFlow * 12 * 0.8).toLocaleString()} ‚ÇΩ
‚Ä¢ Runway –∫ –∫–æ–Ω—Ü—É –≥–æ–¥–∞: ${Math.max(0, runway - 3)} –º–µ—Å
‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 25%

**–ë–∞–∑–æ–≤—ã–π (—Ç–µ–∫—É—â–∏–π —Ç—Ä–µ–Ω–¥):**
‚Ä¢ –ì–æ–¥–æ–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${(cashFlow * 12).toLocaleString()} ‚ÇΩ
‚Ä¢ Runway –∫ –∫–æ–Ω—Ü—É –≥–æ–¥–∞: ${runway} –º–µ—Å
‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 50%

**–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π (+30% –æ—Ç –ø—Ä–æ–≥–Ω–æ–∑–∞):**
‚Ä¢ –ì–æ–¥–æ–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${(cashFlow * 12 * 1.3).toLocaleString()} ‚ÇΩ
‚Ä¢ Runway –∫ –∫–æ–Ω—Ü—É –≥–æ–¥–∞: ${runway + 6} –º–µ—Å
‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 25%

**üí° –ß–¢–û –í–õ–ò–Ø–ï–¢ –ù–ê –ü–†–û–ì–ù–û–ó:**
‚Ä¢ –°–µ–∑–æ–Ω–Ω–æ—Å—Ç—å: ${selectedIndustry?.characteristics?.seasonality ? '–í—ã—Å–æ–∫–∞—è - —É—á—Ç–µ–Ω–∞ –≤ –ø—Ä–æ–≥–Ω–æ–∑–µ' : '–ù–∏–∑–∫–∞—è'}
‚Ä¢ –†—ã–Ω–æ—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –¥–ª—è –æ—Ç—Ä–∞—Å–ª–∏
‚Ä¢ –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã: ${riskScore > 50 ? '–¢—Ä–µ–±—É—é—Ç —É–ª—É—á—à–µ–Ω–∏—è' : '–°—Ç–∞–±–∏–ª—å–Ω—ã–µ'}

**üìä –•–æ—Ç–∏—Ç–µ —É–≤–∏–¥–µ—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ –Ω–µ–¥–µ–ª—è–º?**`,
        timestamp,
        actions: [
          { id: 'recommendations', label: '–ö–∞–∫ —É–ª—É—á—à–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑?', action: 'recommendations', icon: 'üí°' },
          { id: 'scenarios', label: '–°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã', action: 'scenarios', icon: 'üé≤' },
        ]
      };
    }

    // –î–ï–¢–ê–õ–¨–ù–´–ï –†–ò–°–ö–ò (–∫–Ω–æ–ø–∫–∞)
    if (action === 'risks') {
      if (!hasData) {
        return {
          id: `ai-${Date.now()}`,
          role: 'assistant',
          content: `üõ°Ô∏è **–î–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–∏—Å–∫–æ–≤ –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ.**

–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ.`,
          timestamp,
          actions: [
            { id: 'demo', label: '–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ', action: 'demo', icon: 'üìä' },
          ]
        };
      }

      return {
        id: `ai-${Date.now()}`,
        role: 'assistant',
        content: `üõ°Ô∏è **–î–ï–¢–ê–õ–¨–ù–ê–Ø –ö–ê–†–¢–ê –†–ò–°–ö–û–í**

**üìä –ú–ê–¢–†–ò–¶–ê –†–ò–°–ö–û–í:**

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï (–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å √ó –í–ª–∏—è–Ω–∏–µ = –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):**

${runway < 3 ? `**1. –†–∏—Å–∫ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–∞**
‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 80% üî¥
‚Ä¢ –í–ª–∏—è–Ω–∏–µ: –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï
‚Ä¢ –°—Ä–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: ${runway} –º–µ—Å—è—Ü–µ–≤
‚Ä¢ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É—â–µ—Ä–±: –ü–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–∑–Ω–µ—Å–∞
‚Ä¢ **–ü–õ–ê–ù –ó–ê–©–ò–¢–´:**
  - –î–µ–Ω—å 1-7: –ù–∞–π—Ç–∏ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ
  - –î–µ–Ω—å 8-14: –°–æ–∫—Ä–∞—Ç–∏—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ 50%
  - –î–µ–Ω—å 15-30: –†–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å–∞
‚Ä¢ –°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞—â–∏—Ç—ã: ${(monthlyBurn * 6).toLocaleString()} ‚ÇΩ
‚Ä¢ –≠—Ñ—Ñ–µ–∫—Ç: –°–Ω–∏–∂–µ–Ω–∏–µ —Ä–∏—Å–∫–∞ –¥–æ 20%` : runway < 6 ? `**1. –†–∏—Å–∫ –∫–∞—Å—Å–æ–≤–æ–≥–æ —Ä–∞–∑—Ä—ã–≤–∞**
‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 50% üü°
‚Ä¢ –í–ª–∏—è–Ω–∏–µ: –í–´–°–û–ö–û–ï
‚Ä¢ –°—Ä–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: ${runway} –º–µ—Å—è—Ü–µ–≤
‚Ä¢ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É—â–µ—Ä–±: ${(monthlyBurn * 2).toLocaleString()} ‚ÇΩ
‚Ä¢ **–ü–õ–ê–ù –ó–ê–©–ò–¢–´:**
  - –ù–µ–¥–µ–ª—è 1-2: –ü—Ä–∏–≤–ª–µ—á—å –∫—Ä–µ–¥–∏—Ç–Ω—É—é –ª–∏–Ω–∏—é
  - –ù–µ–¥–µ–ª—è 3-4: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ 25%
  - –ú–µ—Å—è—Ü 2-3: –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥
‚Ä¢ –°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞—â–∏—Ç—ã: ${(monthlyBurn * 3).toLocaleString()} ‚ÇΩ
‚Ä¢ –≠—Ñ—Ñ–µ–∫—Ç: –°–Ω–∏–∂–µ–Ω–∏–µ —Ä–∏—Å–∫–∞ –¥–æ 15%` : `**1. –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∏—Å–∫–∏**
‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 20% üü¢
‚Ä¢ –í–ª–∏—è–Ω–∏–µ: –°–†–ï–î–ù–ï–ï
‚Ä¢ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É—â–µ—Ä–±: ${(monthlyBurn * 0.5).toLocaleString()} ‚ÇΩ
‚Ä¢ **–ü–õ–ê–ù –ó–ê–©–ò–¢–´:**
  - –ö–≤–∞—Ä—Ç–∞–ª 1: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
  - –ö–≤–∞—Ä—Ç–∞–ª 2: –û–±—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
  - –ö–≤–∞—Ä—Ç–∞–ª 3-4: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ best practices
‚Ä¢ –°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞—â–∏—Ç—ã: ${(monthlyBurn * 1).toLocaleString()} ‚ÇΩ
‚Ä¢ –≠—Ñ—Ñ–µ–∫—Ç: –ü–æ–≤—ã—à–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –Ω–∞ 25%`}

**–í–´–°–û–ö–ò–ï (–¢—Ä–µ–±—É—é—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞):**

${riskScore > 70 ? `**2. –†–∏—Å–∫ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤**
‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 60% üü°
‚Ä¢ –í–ª–∏—è–Ω–∏–µ: –í–´–°–û–ö–û–ï
‚Ä¢ –û–ø–∏—Å–∞–Ω–∏–µ: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç 1-2 –∫–ª—é—á–µ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
‚Ä¢ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É—â–µ—Ä–±: ${(monthlyBurn * 3).toLocaleString()} ‚ÇΩ
‚Ä¢ **–ü–õ–ê–ù –ó–ê–©–ò–¢–´:**
  - –ú–µ—Å—è—Ü 1: –î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –±–∞–∑—ã
  - –ú–µ—Å—è—Ü 2-3: –†–∞–∑–≤–∏—Ç–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
  - –ú–µ—Å—è—Ü 4-6: –í—ã—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—ã–µ —Ä—ã–Ω–∫–∏
‚Ä¢ –≠—Ñ—Ñ–µ–∫—Ç: –°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–æ 30%

**3. –†–∏—Å–∫ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ –¥–æ—Ö–æ–¥–æ–≤**
‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 70% üî¥
‚Ä¢ –í–ª–∏—è–Ω–∏–µ: –°–†–ï–î–ù–ï–ï
‚Ä¢ –û–ø–∏—Å–∞–Ω–∏–µ: –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è
‚Ä¢ **–ü–õ–ê–ù –ó–ê–©–ò–¢–´:**
  - –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –º–æ–¥–µ–ª—å –ø–æ–¥–ø–∏—Å–∫–∏/–∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤
  - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–æ—Ö–æ–¥–∞
  - –•–µ–¥–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏` : riskScore > 40 ? `**2. –†—ã–Ω–æ—á–Ω—ã–µ —Ä–∏—Å–∫–∏**
‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 40% üü°
‚Ä¢ –í–ª–∏—è–Ω–∏–µ: –°–†–ï–î–ù–ï–ï
‚Ä¢ –û–ø–∏—Å–∞–Ω–∏–µ: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ—Ç—Ä–∞—Å–ª–∏
‚Ä¢ **–ü–õ–ê–ù –ó–ê–©–ò–¢–´:**
  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä—ã–Ω–∫–∞
  - –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
  - –ò–Ω–Ω–æ–≤–∞—Ü–∏–∏` : `**2. –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏**
‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 15% üü¢
‚Ä¢ –í–ª–∏—è–Ω–∏–µ: –ù–ò–ó–ö–û–ï
‚Ä¢ **–ü–õ–ê–ù –ó–ê–©–ò–¢–´:**
  - –†–µ–≥—É–ª—è—Ä–Ω—ã–π –ø–µ—Ä–µ—Å–º–æ—Ç—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–µ–Ω–¥–æ–≤`}

**–°–†–ï–î–ù–ò–ï (–ö–æ–Ω—Ç—Ä–æ–ª—å):**

**4. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏**
‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 30%
‚Ä¢ –í–ª–∏—è–Ω–∏–µ: –°–†–ï–î–ù–ï–ï
‚Ä¢ –û–ø–∏—Å–∞–Ω–∏–µ: –£—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
‚Ä¢ **–ü–õ–ê–ù –ó–ê–©–ò–¢–´:**
  - –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ R&D
  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–Ω–Ω–æ–≤–∞—Ü–∏–π
  - –ü–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–∞ —Å tech-–∫–æ–º–ø–∞–Ω–∏—è–º–∏

**5. –†–µ–≥—É–ª—è—Ç–æ—Ä–Ω—ã–µ —Ä–∏—Å–∫–∏**
‚Ä¢ –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 25%
‚Ä¢ –í–ª–∏—è–Ω–∏–µ: –°–†–ï–î–ù–ï–ï
‚Ä¢ –û–ø–∏—Å–∞–Ω–∏–µ: –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞
‚Ä¢ **–ü–õ–ê–ù –ó–ê–©–ò–¢–´:**
  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π
  - –Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ
  - –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

**üìä –ò–ù–¢–ï–ì–†–ê–õ–¨–ù–ê–Ø –û–¶–ï–ù–ö–ê:**
‚Ä¢ –û–±—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞: ${riskScore}%
‚Ä¢ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${riskScore > 70 ? '–í–´–°–û–ö–ò–ô üî¥' : riskScore > 40 ? '–°–†–ï–î–ù–ò–ô üü°' : '–ù–ò–ó–ö–ò–ô üü¢'}
‚Ä¢ –°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞—â–∏—Ç—ã: ${(monthlyBurn * (runway < 6 ? 6 : 3)).toLocaleString()} ‚ÇΩ
‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç: –°–Ω–∏–∂–µ–Ω–∏–µ —Ä–∏—Å–∫–∞ –Ω–∞ 40-60%

**üí∞ ROI –£–ü–†–ê–í–õ–ï–ù–ò–Ø –†–ò–°–ö–ê–ú–ò:**
‚Ä¢ –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ –∑–∞—â–∏—Ç—É: ${(monthlyBurn * (runway < 6 ? 6 : 3)).toLocaleString()} ‚ÇΩ
‚Ä¢ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–Ω—ã–π —É—â–µ—Ä–±: ${(monthlyBurn * (runway < 6 ? 12 : 6)).toLocaleString()} ‚ÇΩ
‚Ä¢ ROI: ${runway < 6 ? '200%' : '100%'}

**üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**
1. ${runway < 3 ? '–≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ' : runway < 6 ? '–ü—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è' : '–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ —Ñ–æ–Ω–¥–∞'}
2. ${riskScore > 50 ? '–î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è' : '–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤'}
3. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–∏—Å–∫–æ–≤`,
        timestamp,
        actions: [
          { id: 'recommendations', label: '–ü–ª–∞–Ω –∑–∞—â–∏—Ç—ã', action: 'recommendations', icon: 'üí°' },
          { id: 'scenarios', label: '–°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã', action: 'scenarios', icon: 'üé≤' },
        ]
      };
    }

    // –î–ï–¢–ê–õ–¨–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò (–∫–Ω–æ–ø–∫–∞)
    if (action === 'recommendations') {
      if (!hasData) {
        return {
          id: `ai-${Date.now()}`,
          role: 'assistant',
          content: `üí° **–î–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ.**

–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ.`,
          timestamp,
          actions: [
            { id: 'demo', label: '–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ', action: 'demo', icon: 'üìä' },
          ]
        };
      }

      return {
        id: `ai-${Date.now()}`,
        role: 'assistant',
        content: `üí° **–î–ï–¢–ê–õ–¨–ù–´–ô –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô**

**üéØ ROADMAP –ù–ê 12 –ú–ï–°–Ø–¶–ï–í:**

**–§–ê–ó–ê 1: –°–¢–ê–ë–ò–õ–ò–ó–ê–¶–ò–Ø (–ú–µ—Å—è—Ü 1-3)**

${runway < 6 ? `**–¶–µ–ª—å:** –£–≤–µ–ª–∏—á–∏—Ç—å runway –¥–æ 9+ –º–µ—Å—è—Ü–µ–≤

**–ù–µ–¥–µ–ª—è 1-2:**
‚Ä¢ ‚úÖ –ü—Ä–∏–≤–ª–µ—á—å —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ: ${(monthlyBurn * 6).toLocaleString()} ‚ÇΩ
‚Ä¢ ‚úÖ –°–æ–∫—Ä–∞—Ç–∏—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ ${runway < 3 ? '40-50%' : '20-30%'}
‚Ä¢ ‚úÖ –°–æ–±—Ä–∞—Ç—å –≤—Å—é –¥–µ–±–∏—Ç–æ—Ä–∫—É
‚Ä¢ ‚úÖ –ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

**–ù–µ–¥–µ–ª—è 3-4:**
‚Ä¢ ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É
‚Ä¢ ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
‚Ä¢ ‚úÖ –§–æ–∫—É—Å –Ω–∞ –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–∞—Ö
‚Ä¢ ‚úÖ –£–≤–µ–ª–∏—á–∏—Ç—å —Ü–µ–Ω—ã –Ω–∞ 10-15%

**–ú–µ—Å—è—Ü 2-3:**
‚Ä¢ ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥: ${(monthlyBurn * 3).toLocaleString()} ‚ÇΩ
‚Ä¢ ‚úÖ –í–Ω–µ–¥—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ KPI
‚Ä¢ ‚úÖ –ù–∞–π—Ç–∏ –Ω–æ–≤—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–æ—Ö–æ–¥–∞
‚Ä¢ ‚úÖ –£–ª—É—á—à–∏—Ç—å cash flow management

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
‚Ä¢ Runway: 9-12 –º–µ—Å—è—Ü–µ–≤ (+${9 - runway} –º–µ—Å)
‚Ä¢ –†–∏—Å–∫: ${Math.max(20, riskScore - 20)}% (-${Math.min(20, riskScore - 20)}%)
‚Ä¢ Cash flow: –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π` : `**–¶–µ–ª—å:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ —É–≤–µ–ª–∏—á–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

**–ú–µ—Å—è—Ü 1:**
‚Ä¢ ‚úÖ –ê—É–¥–∏—Ç –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚Ä¢ ‚úÖ –í–Ω–µ–¥—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é (—ç–∫–æ–Ω–æ–º–∏—è 20-30% –≤—Ä–µ–º–µ–Ω–∏)
‚Ä¢ ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ 15%
‚Ä¢ ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥: ${(monthlyBurn * 3).toLocaleString()} ‚ÇΩ

**–ú–µ—Å—è—Ü 2-3:**
‚Ä¢ ‚úÖ –†–∞–∑–≤–∏–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã/—É—Å–ª—É–≥–∏
‚Ä¢ ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —É—Å–ø–µ—à–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚Ä¢ ‚úÖ –£–ª—É—á—à–∏—Ç—å –º–∞—Ä–∫–µ—Ç–∏–Ω–≥ (ROI —Ñ–æ–∫—É—Å)
‚Ä¢ ‚úÖ –û–±—É—á–∏—Ç—å –∫–æ–º–∞–Ω–¥—É

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
‚Ä¢ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: +25%
‚Ä¢ –ú–∞—Ä–∂–∞: +10-15%
‚Ä¢ –†–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥: 6 –º–µ—Å—è—Ü–µ–≤`}

**–§–ê–ó–ê 2: –†–û–°–¢ (–ú–µ—Å—è—Ü 4-6)**

**–¶–µ–ª—å:** ${runway < 6 ? '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–æ—Å—Ç –∏ –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å' : '–£–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–∏–±—ã–ª—å –Ω–∞ 30-50%'}

**–ú–µ—Å—è—Ü 4:**
‚Ä¢ üöÄ ${runway < 6 ? '–°—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–Ω–∞–Ω—Å—ã' : '–ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥'}
‚Ä¢ üöÄ –†–∞–∑–≤–∏–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
‚Ä¢ üöÄ –£–ª—É—á—à–∞—Ç—å customer experience
‚Ä¢ üöÄ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–æ—Ä–æ–Ω–∫—É –ø—Ä–æ–¥–∞–∂

**–ú–µ—Å—è—Ü 5-6:**
‚Ä¢ üöÄ ${runway < 6 ? '–ù–∞—á–∞—Ç—å —Ä–æ—Å—Ç' : '–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —É—Å–ø–µ—à–Ω—ã–µ –∫–∞–Ω–∞–ª—ã'}
‚Ä¢ üöÄ –†–∞—Å—à–∏—Ä—è—Ç—å –∫–æ–º–∞–Ω–¥—É –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö
‚Ä¢ üöÄ –í–Ω–µ–¥—Ä–∏—Ç—å CRM –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫—É
‚Ä¢ üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ä–∫–µ—Ç–∏–Ω–≥

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
‚Ä¢ –†–æ—Å—Ç: +${runway < 6 ? '20-30%' : '30-50%'}
‚Ä¢ –ù–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã: +${runway < 6 ? '50' : '100'}
‚Ä¢ –†–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥: ${runway < 6 ? '6' : '9'} –º–µ—Å—è—Ü–µ–≤

**–§–ê–ó–ê 3: –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–ï (–ú–µ—Å—è—Ü 7-12)**

**–¶–µ–ª—å:** ${runway < 6 ? '–î–æ—Å—Ç–∏—á—å —É—Å—Ç–æ–π—á–∏–≤–æ–≥–æ —Ä–æ—Å—Ç–∞' : '–£–≤–µ–ª–∏—á–∏—Ç—å –±–∏–∑–Ω–µ—Å –≤ 2x'}

**–ú–µ—Å—è—Ü 7-9:**
‚Ä¢ üíé ${runway < 6 ? '–£–∫—Ä–µ–ø–∏—Ç—å –ø–æ–∑–∏—Ü–∏–∏' : '–í—ã–π—Ç–∏ –Ω–∞ –Ω–æ–≤—ã–µ —Ä—ã–Ω–∫–∏'}
‚Ä¢ üíé –†–∞–∑–≤–∏–≤–∞—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫—É—é —Å–µ—Ç—å
‚Ä¢ üíé –í–Ω–µ–¥—Ä–∏—Ç—å AI –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é
‚Ä¢ üíé –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

**–ú–µ—Å—è—Ü 10-12:**
‚Ä¢ üíé ${runway < 6 ? '–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é' : '–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –≤ 2x'}
‚Ä¢ üíé –ü—Ä–∏–≤–ª–µ—á—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏—Ö –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤
‚Ä¢ üíé –ü–æ—Å—Ç—Ä–æ–∏—Ç—å —Å–∏–ª—å–Ω—É—é –∫–æ–º–∞–Ω–¥—É
‚Ä¢ üíé ${runway < 6 ? '–°—Ç–∞—Ç—å —É—Å—Ç–æ–π—á–∏–≤—ã–º –∏–≥—Ä–æ–∫–æ–º' : '–°—Ç–∞—Ç—å –ª–∏–¥–µ—Ä–æ–º –≤ –Ω–∏—à–µ'}

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
‚Ä¢ –ì–æ–¥–æ–≤–æ–π —Ä–æ—Å—Ç: ${runway < 6 ? '+50-80%' : '+100-150%'}
‚Ä¢ –†–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥: 12+ –º–µ—Å—è—Ü–µ–≤
‚Ä¢ Runway: 18+ –º–µ—Å—è—Ü–µ–≤
‚Ä¢ –ü–æ–∑–∏—Ü–∏—è: ${runway < 6 ? '–£—Å—Ç–æ–π—á–∏–≤—ã–π –∏–≥—Ä–æ–∫' : '–õ–∏–¥–µ—Ä –≤ –Ω–∏—à–µ'}

**üìä –ö–õ–Æ–ß–ï–í–´–ï –ú–ï–¢–†–ò–ö–ò (KPI):**

**–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ:**
‚Ä¢ Monthly Recurring Revenue: ${runway < 6 ? '+30%' : '+50%'} –∫ –∫–æ–Ω—Ü—É –≥–æ–¥–∞
‚Ä¢ Customer Acquisition Cost: -20%
‚Ä¢ Lifetime Value: +40%
‚Ä¢ Gross Margin: ${runway < 6 ? '+10%' : '+15%'}

**–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ:**
‚Ä¢ Customer Satisfaction: 90%+
‚Ä¢ Employee Satisfaction: 85%+
‚Ä¢ Process Efficiency: +30%
‚Ä¢ Automation Level: 60%+

**üí∞ –ë–Æ–î–ñ–ï–¢ –ò ROI:**

**–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏:**
‚Ä¢ –§–∞–∑–∞ 1: ${(monthlyBurn * (runway < 6 ? 6 : 3)).toLocaleString()} ‚ÇΩ
‚Ä¢ –§–∞–∑–∞ 2: ${(monthlyBurn * 3).toLocaleString()} ‚ÇΩ
‚Ä¢ –§–∞–∑–∞ 3: ${(monthlyBurn * 4).toLocaleString()} ‚ÇΩ
‚Ä¢ **–ò–¢–û–ì–û:** ${(monthlyBurn * (runway < 6 ? 13 : 10)).toLocaleString()} ‚ÇΩ

**–û–∂–∏–¥–∞–µ–º–∞—è –æ—Ç–¥–∞—á–∞:**
‚Ä¢ –ì–æ–¥ 1: ${runway < 6 ? '+50%' : '+100%'} —Ä–æ—Å—Ç–∞
‚Ä¢ ROI: ${runway < 6 ? '150%' : '300%'}
‚Ä¢ Payback period: ${runway < 6 ? '9' : '6'} –º–µ—Å—è—Ü–µ–≤

**üéØ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –§–ê–ö–¢–û–†–´ –£–°–ü–ï–•–ê:**
1. ${runway < 6 ? '–ë—ã—Å—Ç—Ä–æ–µ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è' : '–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ'}
2. –§–æ–∫—É—Å –Ω–∞ –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç–∏
3. –°–∏–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞
4. –ö–ª–∏–µ–Ω—Ç–æ–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å
5. –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏

**üí¨ –ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é?**`,
        timestamp,
        actions: [
          { id: 'financing', label: '–ì–¥–µ –≤–∑—è—Ç—å –¥–µ–Ω—å–≥–∏?', action: 'financing', icon: 'üí∞' },
          { id: 'forecast', label: '–ü—Ä–æ–≥–Ω–æ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤', action: 'forecast', icon: 'üìä' },
        ]
      };
    }

    // –ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó (–∫–Ω–æ–ø–∫–∞)
    if (action === 'analysis') {
      if (!hasData) {
        return {
          id: `ai-${Date.now()}`,
          role: 'assistant',
          content: `üîç **–î–ª—è –∞–Ω–∞–ª–∏–∑–∞ –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ.**

–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ.`,
          timestamp,
          actions: [
            { id: 'demo', label: '–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ', action: 'demo', icon: 'üìä' },
          ]
        };
      }

      return generateSmartResponse('–ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑');
    }

    // –§–ò–ù–ê–ù–°–ò–†–û–í–ê–ù–ò–ï (–∫–Ω–æ–ø–∫–∞)
    if (action === 'financing') {
      if (!hasData) {
        return {
          id: `ai-${Date.now()}`,
          role: 'assistant',
          content: `üí∞ **–î–ª—è –ø–æ–¥–±–æ—Ä–∞ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ.**

–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ.`,
          timestamp,
          actions: [
            { id: 'demo', label: '–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ', action: 'demo', icon: 'üìä' },
          ]
        };
      }

      return {
        id: `ai-${Date.now()}`,
        role: 'assistant',
        content: `üí∞ **–í–ê–†–ò–ê–ù–¢–´ –§–ò–ù–ê–ù–°–ò–†–û–í–ê–ù–ò–Ø**

**–í–∞–º –Ω—É–∂–Ω–æ:** ${(monthlyBurn * (runway < 6 ? 6 : 3)).toLocaleString()} ‚ÇΩ

**üè¶ –ë–ê–ù–ö–û–í–°–ö–ò–ï –ü–†–û–î–£–ö–¢–´:**

**1. –ö—Ä–µ–¥–∏—Ç–Ω–∞—è –ª–∏–Ω–∏—è**
‚Ä¢ –°—É–º–º–∞: –¥–æ ${(monthlyBurn * 6).toLocaleString()} ‚ÇΩ
‚Ä¢ –°—Ç–∞–≤–∫–∞: 12-18% –≥–æ–¥–æ–≤—ã—Ö
‚Ä¢ –°—Ä–æ–∫: 12-36 –º–µ—Å—è—Ü–µ–≤
‚Ä¢ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: –í—ã—Ä—É—á–∫–∞ –æ—Ç ${(monthlyBurn * 10).toLocaleString()} ‚ÇΩ/–≥–æ–¥
‚Ä¢ **–ü–ª—é—Å—ã:** –ë—ã—Å—Ç—Ä–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ, –≥–∏–±–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
‚Ä¢ **–ú–∏–Ω—É—Å—ã:** –¢—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ª–æ–≥, –ø—Ä–æ—Ü–µ–Ω—Ç—ã
‚Ä¢ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** ${runway < 3 ? '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –°–†–û–ß–ù–û!' : runway < 6 ? '‚≠ê‚≠ê‚≠ê‚≠ê –•–æ—Ä–æ—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç' : '‚≠ê‚≠ê‚≠ê –ó–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç'}

**2. –û–≤–µ—Ä–¥—Ä–∞—Ñ—Ç**
‚Ä¢ –°—É–º–º–∞: –¥–æ ${(monthlyBurn * 2).toLocaleString()} ‚ÇΩ
‚Ä¢ –°—Ç–∞–≤–∫–∞: 15-22% –≥–æ–¥–æ–≤—ã—Ö
‚Ä¢ –°—Ä–æ–∫: –î–æ 12 –º–µ—Å—è—Ü–µ–≤
‚Ä¢ **–ü–ª—é—Å—ã:** –ë—ã—Å—Ç—Ä–æ, –±–µ–∑ –∑–∞–ª–æ–≥–∞
‚Ä¢ **–ú–∏–Ω—É—Å—ã:** –í—ã—Å–æ–∫–∞—è —Å—Ç–∞–≤–∫–∞, –º–∞–ª–∞—è —Å—É–º–º–∞
‚Ä¢ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** ${runway < 3 ? '‚≠ê‚≠ê‚≠ê‚≠ê –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ' : '‚≠ê‚≠ê‚≠ê –î–ª—è –∫–∞—Å—Å–æ–≤—ã—Ö —Ä–∞–∑—Ä—ã–≤–æ–≤'}

**üíº –ò–ù–í–ï–°–¢–ò–¶–ò–ò:**

**3. –ë–∏–∑–Ω–µ—Å-–∞–Ω–≥–µ–ª—ã**
‚Ä¢ –°—É–º–º–∞: ${(monthlyBurn * 12).toLocaleString()} - ${(monthlyBurn * 24).toLocaleString()} ‚ÇΩ
‚Ä¢ –î–æ–ª—è: 10-25%
‚Ä¢ –°—Ä–æ–∫: 3-5 –ª–µ—Ç
‚Ä¢ **–ü–ª—é—Å—ã:** –ë–æ–ª—å—à–∞—è —Å—É–º–º–∞, —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞, —Å–≤—è–∑–∏
‚Ä¢ **–ú–∏–Ω—É—Å—ã:** –ü–æ—Ç–µ—Ä—è –¥–æ–ª–∏, –¥–æ–ª–≥–æ –∏—Å–∫–∞—Ç—å
‚Ä¢ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** ${runway < 6 ? '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –û—Ç–ª–∏—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç' : '‚≠ê‚≠ê‚≠ê‚≠ê –î–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è'}

**4. –í–µ–Ω—á—É—Ä–Ω—ã–π —Ñ–æ–Ω–¥**
‚Ä¢ –°—É–º–º–∞: –æ—Ç ${(monthlyBurn * 24).toLocaleString()} ‚ÇΩ
‚Ä¢ –î–æ–ª—è: 20-40%
‚Ä¢ –°—Ä–æ–∫: 5-7 –ª–µ—Ç
‚Ä¢ **–ü–ª—é—Å—ã:** –ë–æ–ª—å—à–∞—è —Å—É–º–º–∞, –º–µ–Ω—Ç–æ—Ä—Å—Ç–≤–æ, —Å–µ—Ç—å
‚Ä¢ **–ú–∏–Ω—É—Å—ã:** –í—ã—Å–æ–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, –ø–æ—Ç–µ—Ä—è –∫–æ–Ω—Ç—Ä–æ–ª—è
‚Ä¢ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** ${runway > 6 ? '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –î–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è' : '‚≠ê‚≠ê‚≠ê –ü–æ–∫–∞ —Ä–∞–Ω–æ'}

**ü§ù –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–´–ï –ò–°–¢–û–ß–ù–ò–ö–ò:**

**5. –§–∞–∫—Ç–æ—Ä–∏–Ω–≥**
‚Ä¢ –°—É–º–º–∞: –î–æ 80% –¥–µ–±–∏—Ç–æ—Ä–∫–∏
‚Ä¢ –ö–æ–º–∏—Å—Å–∏—è: 1-3% –æ—Ç —Å—É–º–º—ã
‚Ä¢ –°—Ä–æ–∫: –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ
‚Ä¢ **–ü–ª—é—Å—ã:** –ë—ã—Å—Ç—Ä–æ, –±–µ–∑ –∑–∞–ª–æ–≥–∞
‚Ä¢ **–ú–∏–Ω—É—Å—ã:** –ö–æ–º–∏—Å—Å–∏—è, –Ω—É–∂–Ω–∞ –¥–µ–±–∏—Ç–æ—Ä–∫–∞
‚Ä¢ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** ${runway < 3 ? '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –°–†–û–ß–ù–û!' : '‚≠ê‚≠ê‚≠ê‚≠ê –•–æ—Ä–æ—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç'}

**6. –ö—Ä–∞—É–¥—Ñ–∞–Ω–¥–∏–Ω–≥**
‚Ä¢ –°—É–º–º–∞: ${(monthlyBurn * 6).toLocaleString()} - ${(monthlyBurn * 12).toLocaleString()} ‚ÇΩ
‚Ä¢ –ö–æ–º–∏—Å—Å–∏—è: 5-10% –æ—Ç —Å—É–º–º—ã
‚Ä¢ –°—Ä–æ–∫: 1-3 –º–µ—Å—è—Ü–∞ –∫–∞–º–ø–∞–Ω–∏—è
‚Ä¢ **–ü–ª—é—Å—ã:** –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥, —Å–æ–æ–±—â–µ—Å—Ç–≤–æ, –±–µ–∑ –¥–æ–ª–≥–∞
‚Ä¢ **–ú–∏–Ω—É—Å—ã:** –î–æ–ª–≥–æ, –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ
‚Ä¢ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** ‚≠ê‚≠ê‚≠ê –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç

**7. –ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥—Ä–∞–Ω—Ç—ã**
‚Ä¢ –°—É–º–º–∞: –¥–æ ${(monthlyBurn * 6).toLocaleString()} ‚ÇΩ
‚Ä¢ –°—Ç–∞–≤–∫–∞: 0% (–≥—Ä–∞–Ω—Ç)
‚Ä¢ –°—Ä–æ–∫: 2-6 –º–µ—Å—è—Ü–µ–≤ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ
‚Ä¢ **–ü–ª—é—Å—ã:** –ë–µ—Å–ø–ª–∞—Ç–Ω–æ, –Ω–µ –Ω—É–∂–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å
‚Ä¢ **–ú–∏–Ω—É—Å—ã:** –î–æ–ª–≥–æ, –±—é—Ä–æ–∫—Ä–∞—Ç–∏—è, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
‚Ä¢ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** ‚≠ê‚≠ê‚≠ê‚≠ê –ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É

**üéØ –ü–ï–†–°–û–ù–ê–õ–¨–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:**

${runway < 3 
  ? `**–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø - –¥–µ–π—Å—Ç–≤—É–π—Ç–µ –°–ï–ô–ß–ê–°:**

**–ü–ª–∞–Ω –Ω–∞ –Ω–µ–¥–µ–ª—é:**
1. **–î–µ–Ω—å 1-2:** –§–∞–∫—Ç–æ—Ä–∏–Ω–≥ –¥–µ–±–∏—Ç–æ—Ä–∫–∏ (–±—ã—Å—Ç—Ä—ã–µ –¥–µ–Ω—å–≥–∏)
2. **–î–µ–Ω—å 3-5:** –û—Ñ–æ—Ä–º–∏—Ç—å –æ–≤–µ—Ä–¥—Ä–∞—Ñ—Ç –≤ –±–∞–Ω–∫–µ
3. **–î–µ–Ω—å 6-7:** –ù–∞—á–∞—Ç—å –ø–æ–∏—Å–∫ –±–∏–∑–Ω–µ—Å-–∞–Ω–≥–µ–ª–∞

**–¶–µ–ª—å:** –°–æ–±—Ä–∞—Ç—å ${(monthlyBurn * 6).toLocaleString()} ‚ÇΩ –∑–∞ 2 –Ω–µ–¥–µ–ª–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
1. ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –§–∞–∫—Ç–æ—Ä–∏–Ω–≥ (—Å–µ–≥–æ–¥–Ω—è)
2. ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –û–≤–µ—Ä–¥—Ä–∞—Ñ—Ç (3 –¥–Ω—è)
3. ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –ö—Ä–µ–¥–∏—Ç–Ω–∞—è –ª–∏–Ω–∏—è (–Ω–µ–¥–µ–ª—è)
4. ‚≠ê‚≠ê‚≠ê‚≠ê –ë–∏–∑–Ω–µ—Å-–∞–Ω–≥–µ–ª (2 –Ω–µ–¥–µ–ª–∏)`
  : runway < 6 
  ? `**–¢–†–ï–ë–£–ï–¢ –í–ù–ò–ú–ê–ù–ò–Ø - –¥–µ–π—Å—Ç–≤—É–π—Ç–µ –≤ —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞:**

**–ü–ª–∞–Ω –Ω–∞ –º–µ—Å—è—Ü:**
1. **–ù–µ–¥–µ–ª—è 1-2:** –û—Ñ–æ—Ä–º–∏—Ç—å –∫—Ä–µ–¥–∏—Ç–Ω—É—é –ª–∏–Ω–∏—é
2. **–ù–µ–¥–µ–ª—è 3-4:** –ù–∞—á–∞—Ç—å –ø–æ–∏—Å–∫ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞

**–¶–µ–ª—å:** –ü—Ä–∏–≤–ª–µ—á—å ${(monthlyBurn * 6).toLocaleString()} ‚ÇΩ –∑–∞ –º–µ—Å—è—Ü

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
1. ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –ö—Ä–µ–¥–∏—Ç–Ω–∞—è –ª–∏–Ω–∏—è (2 –Ω–µ–¥–µ–ª–∏)
2. ‚≠ê‚≠ê‚≠ê‚≠ê –ë–∏–∑–Ω–µ—Å-–∞–Ω–≥–µ–ª (–º–µ—Å—è—Ü)
3. ‚≠ê‚≠ê‚≠ê –ì—Ä–∞–Ω—Ç—ã (–ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É)`
  : `**–°–¢–ê–ë–ò–õ–¨–ù–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø - –ø–ª–∞–Ω–∏—Ä—É–π—Ç–µ —Ä–æ—Å—Ç:**

**–ü–ª–∞–Ω –Ω–∞ –∫–≤–∞—Ä—Ç–∞–ª:**
1. **–ú–µ—Å—è—Ü 1:** –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å pitch deck
2. **–ú–µ—Å—è—Ü 2-3:** –ü–æ–∏—Å–∫ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞

**–¶–µ–ª—å:** –ü—Ä–∏–≤–ª–µ—á—å ${(monthlyBurn * 12).toLocaleString()} ‚ÇΩ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
1. ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –í–µ–Ω—á—É—Ä–Ω—ã–π —Ñ–æ–Ω–¥ (–¥–ª—è —Ä–æ—Å—Ç–∞)
2. ‚≠ê‚≠ê‚≠ê‚≠ê –ë–∏–∑–Ω–µ—Å-–∞–Ω–≥–µ–ª (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
3. ‚≠ê‚≠ê‚≠ê –ì—Ä–∞–Ω—Ç—ã (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)`}

**üí¨ –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º?**`,
        timestamp,
        actions: [
          { id: 'recommendations', label: '–ü–ª–∞–Ω –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è', action: 'recommendations', icon: 'üí°' },
          { id: 'forecast', label: '–ü—Ä–æ–≥–Ω–æ–∑ —Å —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ–º', action: 'forecast', icon: 'üìä' },
        ]
      };
    }

    // –°–¶–ï–ù–ê–†–ò–ò (–∫–Ω–æ–ø–∫–∞)
    if (action === 'scenarios') {
      if (!hasData) {
        return {
          id: `ai-${Date.now()}`,
          role: 'assistant',
          content: `üé≤ **–î–ª—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ.**

–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ.`,
          timestamp,
          actions: [
            { id: 'demo', label: '–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ', action: 'demo', icon: 'üìä' },
          ]
        };
      }

      return {
        id: `ai-${Date.now()}`,
        role: 'assistant',
        content: `üé≤ **–°–¢–†–ï–°–°-–¢–ï–°–¢–´ –ò –°–¶–ï–ù–ê–†–ò–ò**

**üìä –°–¶–ï–ù–ê–†–ò–ô 1: "–ß–¢–û –ï–°–õ–ò –ü–†–û–î–ê–ñ–ò –£–ü–ê–î–£–¢ –ù–ê 30%?"**

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –±–∏–∑–Ω–µ—Å:**
‚Ä¢ –î–µ–Ω–µ–∂–Ω—ã–π –ø–æ—Ç–æ–∫: ${(cashFlow * 0.7).toLocaleString()} ‚ÇΩ/–º–µ—Å (-30%)
‚Ä¢ Runway: ${Math.max(0, Math.floor(runway * 0.7))} –º–µ—Å (-${runway - Math.floor(runway * 0.7)} –º–µ—Å)
‚Ä¢ –†–∏—Å–∫ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–∞: ${riskScore + 30}% (+30%)

**–ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:**
1. –°–æ–∫—Ä–∞—Ç–∏—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ 25%
2. –ù–∞–π—Ç–∏ –Ω–æ–≤—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–æ—Ö–æ–¥–∞
3. –ü—Ä–∏–≤–ª–µ—á—å —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ: ${(monthlyBurn * 3).toLocaleString()} ‚ÇΩ

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** 20%
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** ${runway > 6 ? '–ì–û–¢–û–í–´ ‚úÖ' : runway > 3 ? '–ß–ê–°–¢–ò–ß–ù–û ‚ö†Ô∏è' : '–ù–ï –ì–û–¢–û–í–´ üö®'}

---

**üìä –°–¶–ï–ù–ê–†–ò–ô 2: "–ß–¢–û –ï–°–õ–ò –ü–û–¢–ï–†–Ø–ï–ú –ö–õ–Æ–ß–ï–í–û–ì–û –ö–õ–ò–ï–ù–¢–ê?"**

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –±–∏–∑–Ω–µ—Å:**
‚Ä¢ –ü–æ—Ç–µ—Ä—è –¥–æ—Ö–æ–¥–∞: ${(monthlyBurn * 0.4).toLocaleString()} ‚ÇΩ/–º–µ—Å (-40% –æ—Ç –∫—Ä—É–ø–Ω–µ–π—à–µ–≥–æ)
‚Ä¢ Runway: ${Math.max(0, Math.floor(runway * 0.6))} –º–µ—Å
‚Ä¢ –í—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è: 3-6 –º–µ—Å—è—Ü–µ–≤

**–ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:**
1. –î–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –±–∞–∑—É
2. –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥
3. –†–∞–∑–≤–∏–≤–∞—Ç—å –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** ${riskScore > 50 ? '40%' : '15%'}
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** ${runway > 6 ? '–ì–û–¢–û–í–´ ‚úÖ' : '–¢–†–ï–ë–£–ï–¢ –ü–û–î–ì–û–¢–û–í–ö–ò ‚ö†Ô∏è'}

---

**üìä –°–¶–ï–ù–ê–†–ò–ô 3: "–ß–¢–û –ï–°–õ–ò –í–´–†–ê–°–¢–£–¢ –†–ê–°–•–û–î–´ –ù–ê 20%?"**

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –±–∏–∑–Ω–µ—Å:**
‚Ä¢ Burn rate: ${(monthlyBurn * 1.2).toLocaleString()} ‚ÇΩ/–º–µ—Å (+20%)
‚Ä¢ Runway: ${Math.max(0, Math.floor(runway * 0.8))} –º–µ—Å
‚Ä¢ –ù–µ–æ–±—Ö–æ–¥–∏–º–æ–µ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ: ${(monthlyBurn * 2).toLocaleString()} ‚ÇΩ

**–ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:**
1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
2. –ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
3. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** 30%
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** ${runway > 6 ? '–ì–û–¢–û–í–´ ‚úÖ' : '–¢–†–ï–ë–£–ï–¢ –í–ù–ò–ú–ê–ù–ò–Ø ‚ö†Ô∏è'}

---

**üìä –°–¶–ï–ù–ê–†–ò–ô 4: "–ß–¢–û –ï–°–õ–ò –ü–û–Ø–í–ò–¢–°–Ø –ê–ì–†–ï–°–°–ò–í–ù–´–ô –ö–û–ù–ö–£–†–ï–ù–¢?"**

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –±–∏–∑–Ω–µ—Å:**
‚Ä¢ –°–Ω–∏–∂–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂: 15-25%
‚Ä¢ –î–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ü–µ–Ω—ã: -10-15%
‚Ä¢ –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –≤ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥: +30%

**–ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:**
1. –£—Å–∏–ª–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ —Ç–æ—Ä–≥–æ–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
2. –£–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥—É–∫—Ç–∞/—Å–µ—Ä–≤–∏—Å–∞
3. –†–∞–∑–≤–∏–≤–∞—Ç—å –ª–æ—è–ª—å–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤
4. –ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** 50%
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** ${runway > 6 ? '–ì–û–¢–û–í–´ ‚úÖ' : '–¢–†–ï–ë–£–ï–¢ –ü–û–î–ì–û–¢–û–í–ö–ò ‚ö†Ô∏è'}

---

**üéØ –ö–û–ú–ü–õ–ï–ö–°–ù–´–ô –°–¢–†–ï–°–°-–¢–ï–°–¢:**

**–•—É–¥—à–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π (–≤—Å–µ —Ä–∏—Å–∫–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ):**
‚Ä¢ –ü—Ä–æ–¥–∞–∂–∏: -40%
‚Ä¢ –†–∞—Å—Ö–æ–¥—ã: +20%
‚Ä¢ –ü–æ—Ç–µ—Ä—è –∫–ª—é—á–µ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
‚Ä¢ Runway: ${Math.max(0, Math.floor(runway * 0.4))} –º–µ—Å

**–í—ã–∂–∏–≤–∞–µ–º–æ—Å—Ç—å:** ${runway > 6 ? '–í–´–°–û–ö–ê–Ø ‚úÖ' : runway > 3 ? '–°–†–ï–î–ù–Ø–Ø ‚ö†Ô∏è' : '–ù–ò–ó–ö–ê–Ø üö®'}

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–µ—Ä—ã:**
‚Ä¢ –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ: ${(monthlyBurn * 6).toLocaleString()} ‚ÇΩ
‚Ä¢ –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤: 40-50%
‚Ä¢ –†–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å–∞

**üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:**
${runway < 6 
  ? '‚Ä¢ üö® –°–†–û–ß–ù–û —Å–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥ –Ω–∞ 6 –º–µ—Å—è—Ü–µ–≤\n‚Ä¢ –î–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –±–∞–∑—É\n‚Ä¢ –°–Ω–∏–∑–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∫–ª—é—á–µ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤\n‚Ä¢ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø–ª–∞–Ω –∞–Ω—Ç–∏–∫—Ä–∏–∑–∏—Å–Ω—ã—Ö –º–µ—Ä'
  : '‚Ä¢ ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥\n‚Ä¢ –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã\n‚Ä¢ –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Ä–∏—Å–∫–∏\n‚Ä¢ –ë—ã—Ç—å –≥–æ—Ç–æ–≤—ã–º –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º'}`,
        timestamp,
        actions: [
          { id: 'risks', label: '–î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏', action: 'risks', icon: 'üõ°Ô∏è' },
          { id: 'recommendations', label: '–ü–ª–∞–Ω –∑–∞—â–∏—Ç—ã', action: 'recommendations', icon: 'üí°' },
        ]
      };
    }

    // Fallback –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
    return generateSmartResponse(action);
  };

  // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
  const handleSendMessage = async () => {
    if (!inputMessage.trim()) return;

    const userMessage: ChatMessage = {
      id: `user-${Date.now()}`,
      role: 'user',
      content: inputMessage,
      timestamp: new Date().toISOString(),
    };

    addChatMessage(userMessage);
    setInputMessage('');
    setIsTyping(true);

    setTimeout(() => {
      const aiResponse = generateSmartResponse(inputMessage);
      addChatMessage(aiResponse);
      setIsTyping(false);
    }, 1200);
  };

  return (
    <div className={`${isFullScreen ? 'h-full' : 'h-full'} flex flex-col`}>
      {!isFullScreen && (
        <Card className="h-full flex flex-col">
          <CardHeader className="pb-3 flex-shrink-0">
            <CardTitle className="flex items-center text-sm">
              <Brain className="h-4 w-4 mr-2 text-blue-600" />
              AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç CFO
            </CardTitle>
            <CardDescription className="text-xs">
              –£–º–Ω—ã–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç
            </CardDescription>
          </CardHeader>
          <CardContent className="flex-1 flex flex-col p-0 overflow-hidden">
            <div className="flex-1 overflow-y-auto p-4 space-y-4" style={{ maxHeight: 'calc(100% - 80px)' }}>
              {chatMessages.length === 0 ? (
                <div className="text-center text-gray-500 py-8">
                  <Sparkles className="h-8 w-8 mx-auto mb-2 text-blue-500" />
                  <p className="text-sm mb-3">–ù–∞—á–Ω–∏—Ç–µ –¥–∏–∞–ª–æ–≥ —Å AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º</p>
                  <Button 
                    onClick={() => {
                      const welcomeMessage = generateSmartResponse('–ø—Ä–∏–≤–µ—Ç');
                      addChatMessage(welcomeMessage);
                    }}
                    className="bg-blue-500 hover:bg-blue-600 text-xs"
                  >
                    –ù–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥
                  </Button>
                </div>
              ) : (
                chatMessages.map((msg) => (
                  <div key={msg.id} className="flex items-start space-x-2">
                    <div className={`p-2 rounded-full ${msg.role === 'user' ? 'bg-blue-500' : 'bg-gray-200'}`}>
                      {msg.role === 'user' ? <User className="h-4 w-4 text-white" /> : <Bot className="h-4 w-4" />}
                    </div>
                    <div className="flex-1">
                      <div className={`inline-block p-3 rounded-lg max-w-xs ${msg.role === 'user' ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-900'}`}>
                        <p className="text-sm whitespace-pre-line">{msg.content}</p>
                      </div>
                      {msg.actions && (
                        <div className="mt-2 flex flex-wrap gap-1">
                          {msg.actions.map((act) => (
                            <Button
                              key={act.id}
                              className="border border-gray-300 hover:bg-gray-50 text-xs"
                              onClick={() => handleQuickAction(act.action)}
                            >
                              {act.icon} {act.label}
                            </Button>
                          ))}
                        </div>
                      )}
                    </div>
                  </div>
                ))
              )}
              
              {isTyping && (
                <div className="flex items-start space-x-2">
                  <div className="p-2 rounded-full bg-gray-200">
                    <Bot className="h-4 w-4" />
                  </div>
                  <div className="bg-gray-100 p-3 rounded-lg">
                    <div className="flex space-x-1">
                      <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                      <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{ animationDelay: '0.1s' }}></div>
                      <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{ animationDelay: '0.2s' }}></div>
                    </div>
                  </div>
                </div>
              )}
              
              <div ref={messagesEndRef} />
            </div>

            <div className="p-4 border-t flex-shrink-0">
              <div className="flex space-x-2">
                <input
                  type="text"
                  value={inputMessage}
                  onChange={(e) => setInputMessage(e.target.value)}
                  onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}
                  placeholder="–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å..."
                  className="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
                <Button 
                  onClick={handleSendMessage}
                  disabled={!inputMessage.trim() || isTyping}
                >
                  <Send className="h-4 w-4" />
                </Button>
              </div>
            </div>
          </CardContent>
        </Card>
      )}

      {isFullScreen && (
        <div className="flex-1 flex flex-col">
          <div className="flex-1 overflow-y-auto p-6 space-y-4">
            {chatMessages.length === 0 ? (
              <div className="text-center text-gray-500 py-12">
                <Sparkles className="h-12 w-12 mx-auto mb-4 text-blue-500" />
                <h3 className="text-lg font-semibold mb-2">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ CFO-AI!</h3>
                <p className="text-sm mb-4">–£–º–Ω—ã–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç</p>
                <Button 
                  onClick={() => {
                    const welcomeMessage = generateSmartResponse('–ø—Ä–∏–≤–µ—Ç');
                    addChatMessage(welcomeMessage);
                  }}
                  className="bg-blue-500 hover:bg-blue-600"
                >
                  –ù–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥
                </Button>
              </div>
            ) : (
              chatMessages.map((msg) => (
                <div key={msg.id} className="flex items-start space-x-3">
                  <div className={`p-3 rounded-full ${msg.role === 'user' ? 'bg-blue-500' : 'bg-gray-200'}`}>
                    {msg.role === 'user' ? <User className="h-4 w-4 text-white" /> : <Bot className="h-4 w-4" />}
                  </div>
                  <div className="flex-1">
                    <div className={`inline-block p-4 rounded-lg max-w-2xl ${msg.role === 'user' ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-900'}`}>
                      <p className="text-sm whitespace-pre-line">{msg.content}</p>
                    </div>
                    {msg.actions && (
                      <div className="mt-3 flex flex-wrap gap-2">
                        {msg.actions.map((act) => (
                          <Button
                            key={act.id}
                            className="border border-gray-300 hover:bg-gray-50 text-sm"
                            onClick={() => handleQuickAction(act.action)}
                          >
                            {act.icon} {act.label}
                          </Button>
                        ))}
                      </div>
                    )}
                  </div>
                </div>
              ))
            )}
            
            {isTyping && (
              <div className="flex items-start space-x-3">
                <div className="p-3 rounded-full bg-gray-200">
                  <Bot className="h-4 w-4" />
                </div>
                <div className="bg-gray-100 p-4 rounded-lg">
                  <div className="flex space-x-1">
                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{ animationDelay: '0.1s' }}></div>
                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{ animationDelay: '0.2s' }}></div>
                  </div>
                </div>
              </div>
            )}
            
            <div ref={messagesEndRef} />
          </div>

          <div className="p-6 border-t bg-gray-50">
            <div className="flex space-x-3">
              <input
                type="text"
                value={inputMessage}
                onChange={(e) => setInputMessage(e.target.value)}
                onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}
                placeholder="–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å..."
                className="flex-1 px-4 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <Button 
                onClick={handleSendMessage}
                disabled={!inputMessage.trim() || isTyping}
                className="px-6"
              >
                <Send className="h-4 w-4 mr-2" />
                –û—Ç–ø—Ä–∞–≤–∏—Ç—å
              </Button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}